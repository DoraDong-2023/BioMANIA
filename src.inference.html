<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>src.inference package &mdash; BioMANIA 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/BioMANIA.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">src.inference package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-src.inference.execution_UI">src.inference.execution_UI module</a><ul>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData"><code class="docutils literal notranslate"><span class="pre">AnnData</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.T"><code class="docutils literal notranslate"><span class="pre">AnnData.T</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.X"><code class="docutils literal notranslate"><span class="pre">AnnData.X</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.chunk_X"><code class="docutils literal notranslate"><span class="pre">AnnData.chunk_X()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.chunked_X"><code class="docutils literal notranslate"><span class="pre">AnnData.chunked_X()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.concatenate"><code class="docutils literal notranslate"><span class="pre">AnnData.concatenate()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.copy"><code class="docutils literal notranslate"><span class="pre">AnnData.copy()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.filename"><code class="docutils literal notranslate"><span class="pre">AnnData.filename</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.is_view"><code class="docutils literal notranslate"><span class="pre">AnnData.is_view</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.isbacked"><code class="docutils literal notranslate"><span class="pre">AnnData.isbacked</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.layers"><code class="docutils literal notranslate"><span class="pre">AnnData.layers</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.n_obs"><code class="docutils literal notranslate"><span class="pre">AnnData.n_obs</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.n_vars"><code class="docutils literal notranslate"><span class="pre">AnnData.n_vars</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.obs"><code class="docutils literal notranslate"><span class="pre">AnnData.obs</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.obs_keys"><code class="docutils literal notranslate"><span class="pre">AnnData.obs_keys()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.obs_names"><code class="docutils literal notranslate"><span class="pre">AnnData.obs_names</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.obs_names_make_unique"><code class="docutils literal notranslate"><span class="pre">AnnData.obs_names_make_unique()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.obs_vector"><code class="docutils literal notranslate"><span class="pre">AnnData.obs_vector()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.obsm"><code class="docutils literal notranslate"><span class="pre">AnnData.obsm</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.obsm_keys"><code class="docutils literal notranslate"><span class="pre">AnnData.obsm_keys()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.obsp"><code class="docutils literal notranslate"><span class="pre">AnnData.obsp</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.raw"><code class="docutils literal notranslate"><span class="pre">AnnData.raw</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.rename_categories"><code class="docutils literal notranslate"><span class="pre">AnnData.rename_categories()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.shape"><code class="docutils literal notranslate"><span class="pre">AnnData.shape</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.strings_to_categoricals"><code class="docutils literal notranslate"><span class="pre">AnnData.strings_to_categoricals()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.to_df"><code class="docutils literal notranslate"><span class="pre">AnnData.to_df()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.to_memory"><code class="docutils literal notranslate"><span class="pre">AnnData.to_memory()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.transpose"><code class="docutils literal notranslate"><span class="pre">AnnData.transpose()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.uns"><code class="docutils literal notranslate"><span class="pre">AnnData.uns</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.uns_keys"><code class="docutils literal notranslate"><span class="pre">AnnData.uns_keys()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.var"><code class="docutils literal notranslate"><span class="pre">AnnData.var</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.var_keys"><code class="docutils literal notranslate"><span class="pre">AnnData.var_keys()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.var_names"><code class="docutils literal notranslate"><span class="pre">AnnData.var_names</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.var_names_make_unique"><code class="docutils literal notranslate"><span class="pre">AnnData.var_names_make_unique()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.var_vector"><code class="docutils literal notranslate"><span class="pre">AnnData.var_vector()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.varm"><code class="docutils literal notranslate"><span class="pre">AnnData.varm</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.varm_keys"><code class="docutils literal notranslate"><span class="pre">AnnData.varm_keys()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.varp"><code class="docutils literal notranslate"><span class="pre">AnnData.varp</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.write"><code class="docutils literal notranslate"><span class="pre">AnnData.write()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.write_csvs"><code class="docutils literal notranslate"><span class="pre">AnnData.write_csvs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.write_h5ad"><code class="docutils literal notranslate"><span class="pre">AnnData.write_h5ad()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.write_loom"><code class="docutils literal notranslate"><span class="pre">AnnData.write_loom()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.AnnData.write_zarr"><code class="docutils literal notranslate"><span class="pre">AnnData.write_zarr()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor"><code class="docutils literal notranslate"><span class="pre">CodeExecutor</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.execute_api_call"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.execute_api_call()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.execute_code_past_success"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.execute_code_past_success()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.execute_one_pass"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.execute_one_pass()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.filter_picklable_variables"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.filter_picklable_variables()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.format_arguments"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.format_arguments()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.format_value"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.format_value()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.generate_execution_code"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.generate_execution_code()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.generate_execution_code_for_one_api"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.generate_execution_code_for_one_api()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.get_import_code"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.get_import_code()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.get_max_result_from_variable_list"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.get_max_result_from_variable_list()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.is_picklable"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.is_picklable()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.is_str_at_first_level"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.is_str_at_first_level()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.load_environment"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.load_environment()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.load_object"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.load_object()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.load_variables_to_json"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.load_variables_to_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.makeup_for_missing_parameters"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.makeup_for_missing_parameters()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.makeup_for_missing_single_parameter"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.makeup_for_missing_single_parameter()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.makeup_for_missing_single_parameter_type_special"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.makeup_for_missing_single_parameter_type_special()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.save_environment"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.save_environment()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.save_object"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.save_object()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.save_special_objects"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.save_special_objects()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.save_variables_to_json"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.save_variables_to_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.select_parameters"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.select_parameters()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.CodeExecutor.split_tuple_variable"><code class="docutils literal notranslate"><span class="pre">CodeExecutor.split_tuple_variable()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.execution_UI.load_json"><code class="docutils literal notranslate"><span class="pre">load_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.execution_UI.save_json"><code class="docutils literal notranslate"><span class="pre">save_json()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.inference.retriever_batch_inference">src.inference.retriever_batch_inference module</a><ul>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.T_destination"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.T_destination</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.add_module"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.add_module()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.append"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.append()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.apply"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.apply()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.bfloat16"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.bfloat16()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.buffers"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.buffers()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.call_super_init"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.call_super_init</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.children"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.children()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.cpu"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.cpu()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.cuda"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.cuda()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.device"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.device</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.double"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.double()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.dump_patches"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.dump_patches</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.encode"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.encode()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.encode_multi_process"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.encode_multi_process()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.eval"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.eval()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.evaluate"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.evaluate()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.extend"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.extend()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.extra_repr"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.extra_repr()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.fit"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.fit()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.float"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.float()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.forward"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.forward()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_buffer"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_buffer()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_extra_state"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_extra_state()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_max_seq_length"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_max_seq_length()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_parameter"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_parameter()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_sentence_embedding_dimension"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_sentence_embedding_dimension()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_sentence_features"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_sentence_features()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_submodule"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_submodule()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.half"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.half()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.insert"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.insert()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.ipu"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.ipu()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.load"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.load()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.load_state_dict()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.max_seq_length"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.max_seq_length</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.modules"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.modules()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.named_buffers"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.named_buffers()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.named_children"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.named_children()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.named_modules"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.named_modules()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.named_parameters"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.named_parameters()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.parameters"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.parameters()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.pop"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.pop()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_backward_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_backward_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_buffer"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_buffer()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_forward_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_forward_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_forward_pre_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_forward_pre_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_full_backward_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_full_backward_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_full_backward_pre_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_full_backward_pre_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_load_state_dict_post_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_load_state_dict_post_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_module"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_module()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_parameter"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_parameter()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_state_dict_pre_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_state_dict_pre_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.requires_grad_"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.requires_grad_()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.save"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.save()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.save_to_hub"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.save_to_hub()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.set_extra_state"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.set_extra_state()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.share_memory"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.share_memory()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.smart_batching_collate"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.smart_batching_collate()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.start_multi_process_pool"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.start_multi_process_pool()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.state_dict()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.stop_multi_process_pool"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.stop_multi_process_pool()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.to"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.to()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.to_empty"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.to_empty()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.tokenize"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.tokenize()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.tokenizer"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.tokenizer</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.train"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.train()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.training"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.training</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.type"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.type()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.xpu"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.xpu()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.SentenceTransformer.zero_grad"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.zero_grad()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.compress_api_str_from_list_query_version"><code class="docutils literal notranslate"><span class="pre">compress_api_str_from_list_query_version()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.load_query"><code class="docutils literal notranslate"><span class="pre">load_query()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.load_relevant_docs"><code class="docutils literal notranslate"><span class="pre">load_relevant_docs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.process_retrieval_document_query_version"><code class="docutils literal notranslate"><span class="pre">process_retrieval_document_query_version()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.retrieve_inference"><code class="docutils literal notranslate"><span class="pre">retrieve_inference()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_batch_inference.save_json"><code class="docutils literal notranslate"><span class="pre">save_json()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.inference.retriever_bm25_inference">src.inference.retriever_bm25_inference module</a><ul>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Okapi"><code class="docutils literal notranslate"><span class="pre">BM25Okapi</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Okapi.get_batch_scores"><code class="docutils literal notranslate"><span class="pre">BM25Okapi.get_batch_scores()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Okapi.get_scores"><code class="docutils literal notranslate"><span class="pre">BM25Okapi.get_scores()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Okapi.get_top_n"><code class="docutils literal notranslate"><span class="pre">BM25Okapi.get_top_n()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever"><code class="docutils literal notranslate"><span class="pre">BM25Retriever</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.Config"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.Config</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.aget_relevant_documents"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.aget_relevant_documents()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.construct"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.construct()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.copy"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.copy()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.corpus"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.corpus</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.dict"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.dict()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.from_orm"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.from_orm()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.get_relevant_documents"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.get_relevant_documents()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.index"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.index</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.json"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.parse_file"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.parse_file()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.parse_obj"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.parse_obj()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.parse_raw"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.parse_raw()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.query_kwargs"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.query_kwargs</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.schema"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.schema()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.schema_json"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.schema_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.update_forward_refs"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.update_forward_refs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.BM25Retriever.validate"><code class="docutils literal notranslate"><span class="pre">BM25Retriever.validate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.LLM_model"><code class="docutils literal notranslate"><span class="pre">LLM_model()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.LLM_response"><code class="docutils literal notranslate"><span class="pre">LLM_response()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.Config"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.Config</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.Config.extra"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.Config.extra</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.aembed_documents"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.aembed_documents()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.aembed_query"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.aembed_query()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.allowed_special"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.allowed_special</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.build_extra"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.build_extra()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.chunk_size"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.chunk_size</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.construct"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.construct()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.copy"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.copy()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.deployment"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.deployment</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.dict"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.dict()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.disallowed_special"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.disallowed_special</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.embed_documents"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.embed_documents()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.embed_query"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.embed_query()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.embedding_ctx_length"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.embedding_ctx_length</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.from_orm"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.from_orm()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.headers"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.headers</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.json"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.max_retries"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.max_retries</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.model"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.model</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.model_kwargs"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.model_kwargs</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_base"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.openai_api_base</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_key"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.openai_api_key</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_type"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.openai_api_type</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_version"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.openai_api_version</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_organization"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.openai_organization</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_proxy"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.openai_proxy</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_file"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.parse_file()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_obj"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.parse_obj()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_raw"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.parse_raw()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.request_timeout"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.request_timeout</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.schema"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.schema()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.schema_json"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.schema_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.show_progress_bar"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.show_progress_bar</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.skip_empty"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.skip_empty</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.tiktoken_model_name"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.tiktoken_model_name</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.update_forward_refs"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.update_forward_refs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.validate"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.validate()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.validate_environment"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddings.validate_environment()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.embedding_model"><code class="docutils literal notranslate"><span class="pre">embedding_model()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.evaluate_query_pairs"><code class="docutils literal notranslate"><span class="pre">evaluate_query_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.find_similar_two_pairs"><code class="docutils literal notranslate"><span class="pre">find_similar_two_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.generate_completion_stream"><code class="docutils literal notranslate"><span class="pre">generate_completion_stream()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.get_all_basic_func_from_cheatsheet"><code class="docutils literal notranslate"><span class="pre">get_all_basic_func_from_cheatsheet()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.get_all_variable_from_cheatsheet"><code class="docutils literal notranslate"><span class="pre">get_all_variable_from_cheatsheet()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.get_query_pairs"><code class="docutils literal notranslate"><span class="pre">get_query_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.load_dotenv"><code class="docutils literal notranslate"><span class="pre">load_dotenv()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.load_json"><code class="docutils literal notranslate"><span class="pre">load_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_bm25_inference.prepare_corpus"><code class="docutils literal notranslate"><span class="pre">prepare_corpus()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.inference.retriever_finetune_inference">src.inference.retriever_finetune_inference module</a><ul>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.T_destination"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.T_destination</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.add_module"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.add_module()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.append"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.append()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.apply"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.apply()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.bfloat16"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.bfloat16()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.buffers"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.buffers()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.call_super_init"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.call_super_init</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.children"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.children()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.cpu"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.cpu()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.cuda"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.cuda()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.device"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.device</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.double"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.double()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.dump_patches"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.dump_patches</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.encode"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.encode()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.encode_multi_process"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.encode_multi_process()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.eval"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.eval()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.evaluate"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.evaluate()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.extend"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.extend()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.extra_repr"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.extra_repr()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.fit"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.fit()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.float"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.float()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.forward"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.forward()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_buffer"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_buffer()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_extra_state"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_extra_state()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_max_seq_length"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_max_seq_length()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_parameter"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_parameter()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_sentence_embedding_dimension"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_sentence_embedding_dimension()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_sentence_features"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_sentence_features()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_submodule"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.get_submodule()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.half"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.half()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.insert"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.insert()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.ipu"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.ipu()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.load"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.load()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.load_state_dict()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.max_seq_length"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.max_seq_length</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.modules"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.modules()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.named_buffers"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.named_buffers()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.named_children"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.named_children()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.named_modules"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.named_modules()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.named_parameters"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.named_parameters()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.parameters"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.parameters()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.pop"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.pop()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_backward_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_backward_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_buffer"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_buffer()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_forward_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_forward_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_forward_pre_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_forward_pre_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_full_backward_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_full_backward_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_full_backward_pre_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_full_backward_pre_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_load_state_dict_post_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_load_state_dict_post_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_module"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_module()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_parameter"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_parameter()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_state_dict_pre_hook"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.register_state_dict_pre_hook()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.requires_grad_"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.requires_grad_()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.save"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.save()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.save_to_hub"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.save_to_hub()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.set_extra_state"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.set_extra_state()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.share_memory"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.share_memory()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.smart_batching_collate"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.smart_batching_collate()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.start_multi_process_pool"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.start_multi_process_pool()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.state_dict()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.stop_multi_process_pool"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.stop_multi_process_pool()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.to"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.to()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.to_empty"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.to_empty()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.tokenize"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.tokenize()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.tokenizer"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.tokenizer</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.train"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.train()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.training"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.training</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.type"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.type()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.xpu"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.xpu()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.SentenceTransformer.zero_grad"><code class="docutils literal notranslate"><span class="pre">SentenceTransformer.zero_grad()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.ToolRetriever"><code class="docutils literal notranslate"><span class="pre">ToolRetriever</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.ToolRetriever.build_and_merge_corpus"><code class="docutils literal notranslate"><span class="pre">ToolRetriever.build_and_merge_corpus()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.ToolRetriever.build_shuffle_data"><code class="docutils literal notranslate"><span class="pre">ToolRetriever.build_shuffle_data()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.ToolRetriever.retrieve_similar_queries"><code class="docutils literal notranslate"><span class="pre">ToolRetriever.retrieve_similar_queries()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.ToolRetriever.retrieving"><code class="docutils literal notranslate"><span class="pre">ToolRetriever.retrieving()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.compute_accuracy"><code class="docutils literal notranslate"><span class="pre">compute_accuracy()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.compute_accuracy_filter_compositeAPI"><code class="docutils literal notranslate"><span class="pre">compute_accuracy_filter_compositeAPI()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.compute_and_plot"><code class="docutils literal notranslate"><span class="pre">compute_and_plot()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.find_similar_two_pairs"><code class="docutils literal notranslate"><span class="pre">find_similar_two_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.get_all_variable_from_cheatsheet"><code class="docutils literal notranslate"><span class="pre">get_all_variable_from_cheatsheet()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.is_pair_in_merged_pairs"><code class="docutils literal notranslate"><span class="pre">is_pair_in_merged_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.load_json"><code class="docutils literal notranslate"><span class="pre">load_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.plot_boxplot"><code class="docutils literal notranslate"><span class="pre">plot_boxplot()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.process_retrieval_document_query_version"><code class="docutils literal notranslate"><span class="pre">process_retrieval_document_query_version()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.save_json"><code class="docutils literal notranslate"><span class="pre">save_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm"><code class="docutils literal notranslate"><span class="pre">tqdm</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.clear"><code class="docutils literal notranslate"><span class="pre">tqdm.clear()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.close"><code class="docutils literal notranslate"><span class="pre">tqdm.close()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.display"><code class="docutils literal notranslate"><span class="pre">tqdm.display()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.external_write_mode"><code class="docutils literal notranslate"><span class="pre">tqdm.external_write_mode()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.format_dict"><code class="docutils literal notranslate"><span class="pre">tqdm.format_dict</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.format_interval"><code class="docutils literal notranslate"><span class="pre">tqdm.format_interval()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.format_meter"><code class="docutils literal notranslate"><span class="pre">tqdm.format_meter()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.format_num"><code class="docutils literal notranslate"><span class="pre">tqdm.format_num()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.format_sizeof"><code class="docutils literal notranslate"><span class="pre">tqdm.format_sizeof()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.get_lock"><code class="docutils literal notranslate"><span class="pre">tqdm.get_lock()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.monitor"><code class="docutils literal notranslate"><span class="pre">tqdm.monitor</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.monitor_interval"><code class="docutils literal notranslate"><span class="pre">tqdm.monitor_interval</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.moveto"><code class="docutils literal notranslate"><span class="pre">tqdm.moveto()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.pandas"><code class="docutils literal notranslate"><span class="pre">tqdm.pandas()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.refresh"><code class="docutils literal notranslate"><span class="pre">tqdm.refresh()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.reset"><code class="docutils literal notranslate"><span class="pre">tqdm.reset()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.set_description"><code class="docutils literal notranslate"><span class="pre">tqdm.set_description()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.set_description_str"><code class="docutils literal notranslate"><span class="pre">tqdm.set_description_str()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.set_lock"><code class="docutils literal notranslate"><span class="pre">tqdm.set_lock()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.set_postfix"><code class="docutils literal notranslate"><span class="pre">tqdm.set_postfix()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.set_postfix_str"><code class="docutils literal notranslate"><span class="pre">tqdm.set_postfix_str()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.status_printer"><code class="docutils literal notranslate"><span class="pre">tqdm.status_printer()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.unpause"><code class="docutils literal notranslate"><span class="pre">tqdm.unpause()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.update"><code class="docutils literal notranslate"><span class="pre">tqdm.update()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.wrapattr"><code class="docutils literal notranslate"><span class="pre">tqdm.wrapattr()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.retriever_finetune_inference.tqdm.write"><code class="docutils literal notranslate"><span class="pre">tqdm.write()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.inference.utils">src.inference.utils module</a><ul>
<li><a class="reference internal" href="#src.inference.utils.bert_embed"><code class="docutils literal notranslate"><span class="pre">bert_embed()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.compress_and_save_image"><code class="docutils literal notranslate"><span class="pre">compress_and_save_image()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.compress_api_str_from_list"><code class="docutils literal notranslate"><span class="pre">compress_api_str_from_list()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.compress_api_str_from_list_query_version"><code class="docutils literal notranslate"><span class="pre">compress_api_str_from_list_query_version()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.compress_desc"><code class="docutils literal notranslate"><span class="pre">compress_desc()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.compress_tut_version"><code class="docutils literal notranslate"><span class="pre">compress_tut_version()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict"><code class="docutils literal notranslate"><span class="pre">defaultdict</span></code></a><ul>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.clear"><code class="docutils literal notranslate"><span class="pre">defaultdict.clear()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.copy"><code class="docutils literal notranslate"><span class="pre">defaultdict.copy()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.default_factory"><code class="docutils literal notranslate"><span class="pre">defaultdict.default_factory</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.fromkeys"><code class="docutils literal notranslate"><span class="pre">defaultdict.fromkeys()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.get"><code class="docutils literal notranslate"><span class="pre">defaultdict.get()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.items"><code class="docutils literal notranslate"><span class="pre">defaultdict.items()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.keys"><code class="docutils literal notranslate"><span class="pre">defaultdict.keys()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.pop"><code class="docutils literal notranslate"><span class="pre">defaultdict.pop()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.popitem"><code class="docutils literal notranslate"><span class="pre">defaultdict.popitem()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.setdefault"><code class="docutils literal notranslate"><span class="pre">defaultdict.setdefault()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.update"><code class="docutils literal notranslate"><span class="pre">defaultdict.update()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.defaultdict.values"><code class="docutils literal notranslate"><span class="pre">defaultdict.values()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src.inference.utils.find_similar_api_pairs"><code class="docutils literal notranslate"><span class="pre">find_similar_api_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.find_similar_pairs"><code class="docutils literal notranslate"><span class="pre">find_similar_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.find_similar_two_pairs"><code class="docutils literal notranslate"><span class="pre">find_similar_two_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.get_all_api_json"><code class="docutils literal notranslate"><span class="pre">get_all_api_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.get_all_types_in_API"><code class="docutils literal notranslate"><span class="pre">get_all_types_in_API()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.get_ambiguous_pairs"><code class="docutils literal notranslate"><span class="pre">get_ambiguous_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.is_pair_in_merged_pairs"><code class="docutils literal notranslate"><span class="pre">is_pair_in_merged_pairs()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.json_to_docstring"><code class="docutils literal notranslate"><span class="pre">json_to_docstring()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.load_json"><code class="docutils literal notranslate"><span class="pre">load_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.predict_by_similarity"><code class="docutils literal notranslate"><span class="pre">predict_by_similarity()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.process_retrieval_desc"><code class="docutils literal notranslate"><span class="pre">process_retrieval_desc()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.process_retrieval_document"><code class="docutils literal notranslate"><span class="pre">process_retrieval_document()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.process_retrieval_document_query_version"><code class="docutils literal notranslate"><span class="pre">process_retrieval_document_query_version()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.process_tut_version"><code class="docutils literal notranslate"><span class="pre">process_tut_version()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.save_json"><code class="docutils literal notranslate"><span class="pre">save_json()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.save_plot_with_timestamp"><code class="docutils literal notranslate"><span class="pre">save_plot_with_timestamp()</span></code></a></li>
<li><a class="reference internal" href="#src.inference.utils.sentence_transformer_embed"><code class="docutils literal notranslate"><span class="pre">sentence_transformer_embed()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.inference">Module contents</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BioMANIA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">src.inference package</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/batmen-lab/BioMANIA/blob/main/docs/source/src.inference.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="src-inference-package">
<h1>src.inference package<a class="headerlink" href="#src-inference-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-src.inference.execution_UI">
<span id="src-inference-execution-ui-module"></span><h2>src.inference.execution_UI module<a class="headerlink" href="#module-src.inference.execution_UI" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.execution_UI.</span></span><span class="sig-name descname"><span class="pre">AnnData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">spmatrix</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">spmatrix</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">type</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filemode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'r'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'r+'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asview</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oidx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">slice</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vidx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">slice</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An annotated data matrix.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code> stores a data matrix <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a> together with annotations
of observations <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a> (<a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obsm" title="src.inference.execution_UI.AnnData.obsm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obsm</span></code></a>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obsp" title="src.inference.execution_UI.AnnData.obsp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obsp</span></code></a>),
variables <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a> (<a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.varm" title="src.inference.execution_UI.AnnData.varm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">varm</span></code></a>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.varp" title="src.inference.execution_UI.AnnData.varp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">varp</span></code></a>),
and unstructured annotations <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.uns" title="src.inference.execution_UI.AnnData.uns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">uns</span></code></a>.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_static/img/anndata_schema.svg"><img alt="../_static/img/anndata_schema.svg" src="../_static/img/anndata_schema.svg" width="260px" /></a>
</figure>
<p>An <code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code> object <cite>adata</cite> can be sliced like a
<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>,
for instance <cite>adata_subset = adata[:, list_of_variable_names]</cite>.
<code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code>s basic structure is similar to Rs ExpressionSet
<span id="id1">[Huber15]</span>. If setting an <cite>.h5ad</cite>-formatted HDF5 backing file <cite>.filename</cite>,
data remains on the disk but is automatically loaded into memory if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong>  A #observations  #variables data matrix. A view of the data is used if the
data type matches, otherwise, a copy is made.</p></li>
<li><p><strong>obs</strong>  Key-indexed one-dimensional observations annotation of length #observations.</p></li>
<li><p><strong>var</strong>  Key-indexed one-dimensional variables annotation of length #variables.</p></li>
<li><p><strong>uns</strong>  Key-indexed unstructured annotation.</p></li>
<li><p><strong>obsm</strong>  Key-indexed multi-dimensional observations annotation of length #observations.
If passing a <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, it needs to have a structured datatype.</p></li>
<li><p><strong>varm</strong>  Key-indexed multi-dimensional variables annotation of length #variables.
If passing a <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, it needs to have a structured datatype.</p></li>
<li><p><strong>layers</strong>  Key-indexed multi-dimensional arrays aligned to dimensions of <cite>X</cite>.</p></li>
<li><p><strong>shape</strong>  Shape tuple (#observations, #variables). Can only be provided if <cite>X</cite> is <cite>None</cite>.</p></li>
<li><p><strong>filename</strong>  Name of backing file. See <code class="xref py py-class docutils literal notranslate"><span class="pre">h5py.File</span></code>.</p></li>
<li><p><strong>filemode</strong>  Open mode of backing file. See <code class="xref py py-class docutils literal notranslate"><span class="pre">h5py.File</span></code>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_h5ad</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">read_csv</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">read_excel</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">read_hdf</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">read_loom</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">read_zarr</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">read_mtx</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">read_text</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">read_umi_tools</span></code></p>
</div>
<p class="rubric">Notes</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code> stores observations (samples) of variables/features
in the rows of a matrix.
This is the convention of the modern classics of statistics <span id="id2">[Hastie09]</span>
and machine learning <span id="id3">[Murphy12]</span>,
the convention of dataframes both in R and Python and the established statistics
and machine learning packages in Python (<a class="reference external" href="http://www.statsmodels.org/stable/index.html">statsmodels</a>, <a class="reference external" href="http://scikit-learn.org/">scikit-learn</a>).</p>
<p>Single dimensional annotations of the observation and variables are stored
in the <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a> and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a> attributes as <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>s.
This is intended for metrics calculated over their axes.
Multi-dimensional annotations are stored in <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obsm" title="src.inference.execution_UI.AnnData.obsm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obsm</span></code></a> and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.varm" title="src.inference.execution_UI.AnnData.varm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">varm</span></code></a>,
which are aligned to the objects observation and variable dimensions respectively.
Square matrices representing graphs are stored in <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obsp" title="src.inference.execution_UI.AnnData.obsp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obsp</span></code></a> and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.varp" title="src.inference.execution_UI.AnnData.varp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">varp</span></code></a>,
with both of their own dimensions aligned to their associated axis.
Additional measurements across both observations and variables are stored in
<a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.layers" title="src.inference.execution_UI.AnnData.layers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">layers</span></code></a>.</p>
<p>Indexing into an AnnData object can be performed by relative position
with numeric indices (like pandas <code class="xref py py-meth docutils literal notranslate"><span class="pre">iloc()</span></code>),
or by labels (like <code class="xref py py-meth docutils literal notranslate"><span class="pre">loc()</span></code>).
To avoid ambiguity with numeric indexing into observations or variables,
indexes of the AnnData object are converted to strings by the constructor.</p>
<p>Subsetting an AnnData object by indexing into it will also subset its elements
according to the dimensions they were aligned to.
This means an operation like <cite>adata[list_of_obs, :]</cite> will also subset <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a>,
<a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obsm" title="src.inference.execution_UI.AnnData.obsm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obsm</span></code></a>, and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.layers" title="src.inference.execution_UI.AnnData.layers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">layers</span></code></a>.</p>
<p>Subsetting an AnnData object returns a view into the original object,
meaning very little additional memory is used upon subsetting.
This is achieved lazily, meaning that the constituent arrays are subset on access.
Copying a view causes an equivalent real AnnData object to be generated.
Attempting to modify a view (at any attribute except X) is handled
in a copy-on-modify manner, meaning the object is initialized in place.
Heres an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">batch1</span> <span class="o">=</span> <span class="n">adata</span><span class="p">[</span><span class="n">adata</span><span class="o">.</span><span class="n">obs</span><span class="p">[</span><span class="s2">&quot;batch&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;batch1&quot;</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">batch1</span><span class="o">.</span><span class="n">obs</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># This makes batch1 a real AnnData object</span>
</pre></div>
</div>
<p>At the end of this snippet: <cite>adata</cite> was not modified,
and <cite>batch1</cite> is its own AnnData object with its own data.</p>
<p>Similar to Bioconductors <cite>ExpressionSet</cite> and <code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.sparse</span></code> matrices,
subsetting an AnnData object retains the dimensionality of its constituent arrays.
Therefore, unlike with the classes exposed by <code class="xref py py-mod docutils literal notranslate"><span class="pre">pandas</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code>,
and <cite>xarray</cite>, there is no concept of a one dimensional AnnData object.
AnnDatas always have two inherent dimensions, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a> and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a>.
Additionally, maintaining the dimensionality of the AnnData object allows for
consistent handling of <code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.sparse</span></code> matrices and <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> arrays.</p>
<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.T">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">T</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData" title="anndata._core.anndata.AnnData"><span class="pre">AnnData</span></a></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.T" title="Permalink to this definition"></a></dt>
<dd><p>Transpose whole object.</p>
<p>Data matrix is transposed, observations and variables are interchanged.</p>
<p>Ignores <cite>.raw</cite>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.X">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">X</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">spmatrix</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ArrayView</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.X" title="Permalink to this definition"></a></dt>
<dd><p>Data matrix of shape <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.n_obs" title="src.inference.execution_UI.AnnData.n_obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">n_obs</span></code></a>  <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.n_vars" title="src.inference.execution_UI.AnnData.n_vars"><code class="xref py py-attr docutils literal notranslate"><span class="pre">n_vars</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.chunk_X">
<span class="sig-name descname"><span class="pre">chunk_X</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.chunk_X" title="Permalink to this definition"></a></dt>
<dd><p>Return a chunk of the data matrix <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a> with random or specified indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>select</strong>  <p>Depending on the type:</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></dt><dd><p>A random chunk with <cite>select</cite> rows will be returned.</p>
</dd>
<dt><span class="xref std std-term">sequence</span> (e.g. a list, tuple or numpy array) of <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></dt><dd><p>A chunk with these indices will be returned.</p>
</dd>
</dl>
</p></li>
<li><p><strong>replace</strong>  If <cite>select</cite> is an integer then <cite>True</cite> means random sampling of
indices with replacement, <cite>False</cite> without replacement.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.chunked_X">
<span class="sig-name descname"><span class="pre">chunked_X</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.chunked_X" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator over the rows of the data matrix <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>chunk_size</strong>  Row size of a single chunk.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.concatenate">
<span class="sig-name descname"><span class="pre">concatenate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">adatas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData" title="anndata._core.anndata.AnnData"><span class="pre">AnnData</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">join</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'inner'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'batch'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_categories</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uns_merge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_unique</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData" title="anndata._core.anndata.AnnData"><span class="pre">AnnData</span></a></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.concatenate" title="Permalink to this definition"></a></dt>
<dd><p>Concatenate along the observations axis.</p>
<p>The <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.uns" title="src.inference.execution_UI.AnnData.uns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">uns</span></code></a>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.varm" title="src.inference.execution_UI.AnnData.varm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">varm</span></code></a> and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obsm" title="src.inference.execution_UI.AnnData.obsm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obsm</span></code></a> attributes are ignored.</p>
<p>Currently, this works only in <cite>memory</cite> mode.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more flexible and efficient concatenation, see: <code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adatas</strong>  AnnData matrices to concatenate with. Each matrix is referred to as
a batch.</p></li>
<li><p><strong>join</strong>  Use intersection (<cite>inner</cite>) or union (<cite>outer</cite>) of variables.</p></li>
<li><p><strong>batch_key</strong>  Add the batch annotation to <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a> using this key.</p></li>
<li><p><strong>batch_categories</strong>  Use these as categories for the batch annotation. By default, use increasing numbers.</p></li>
<li><p><strong>uns_merge</strong>  <p>Strategy to use for merging entries of uns. These strategies are applied recusivley.
Currently implemented strategies include:</p>
<ul>
<li><p><cite>None</cite>: The default. The concatenated object will just have an empty dict for <cite>uns</cite>.</p></li>
<li><p><cite>same</cite>: Only entries which have the same value in all AnnData objects are kept.</p></li>
<li><p><cite>unique</cite>: Only entries which have one unique value in all AnnData objects are kept.</p></li>
<li><p><cite>first</cite>: The first non-missing value is used.</p></li>
<li><p><cite>only</cite>: A value is included if only one of the AnnData objects has a value at this
path.</p></li>
</ul>
</p></li>
<li><p><strong>index_unique</strong>  Make the index unique by joining the existing index names with the
batch category, using <cite>index_unique=-</cite>, for instance. Provide
<cite>None</cite> to keep existing indices.</p></li>
<li><p><strong>fill_value</strong>  <p>Scalar value to fill newly missing values in arrays with. Note: only applies to arrays
and sparse matrices (not dataframes) and will only be used if <cite>join=outer</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If not provided, the default value is <cite>0</cite> for sparse matrices and <cite>np.nan</cite>
for numpy arrays. See the examples below for more information.</p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The concatenated <code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code>, where <cite>adata.obs[batch_key]</cite>
stores a categorical variable labeling the batch.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use <cite>join=outer</cite> this fills 0s for sparse data when
variables are absent in a batch. Use this with care. Dense data is
filled with <cite>NaN</cite>. See the examples.</p>
</div>
<p class="rubric">Examples</p>
<p>Joining on intersection of variables.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">adata1</span> <span class="o">=</span> <span class="n">AnnData</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">obs_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;s1&#39;</span><span class="p">,</span> <span class="s1">&#39;s2&#39;</span><span class="p">],</span> <span class="n">anno1</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">var_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">annoA</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata2</span> <span class="o">=</span> <span class="n">AnnData</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">obs_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;s3&#39;</span><span class="p">,</span> <span class="s1">&#39;s4&#39;</span><span class="p">],</span> <span class="n">anno1</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c3&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">var_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">annoA</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata3</span> <span class="o">=</span> <span class="n">AnnData</span><span class="p">(</span>
<span class="gp">... </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">obs_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;s1&#39;</span><span class="p">,</span> <span class="s1">&#39;s2&#39;</span><span class="p">],</span> <span class="n">anno2</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d3&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">var_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">annoA</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">annoB</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span> <span class="o">=</span> <span class="n">adata1</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">adata2</span><span class="p">,</span> <span class="n">adata3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span>
<span class="go">AnnData object with n_obs  n_vars = 6  2</span>
<span class="go">    obs: &#39;anno1&#39;, &#39;anno2&#39;, &#39;batch&#39;</span>
<span class="go">    var: &#39;annoA-0&#39;, &#39;annoA-1&#39;, &#39;annoA-2&#39;, &#39;annoB-2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">X</span>
<span class="go">array([[2, 3],</span>
<span class="go">       [5, 6],</span>
<span class="go">       [3, 2],</span>
<span class="go">       [6, 5],</span>
<span class="go">       [3, 2],</span>
<span class="go">       [6, 5]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">obs</span>
<span class="go">     anno1 anno2 batch</span>
<span class="go">s1-0    c1   NaN     0</span>
<span class="go">s2-0    c2   NaN     0</span>
<span class="go">s3-1    c3   NaN     1</span>
<span class="go">s4-1    c4   NaN     1</span>
<span class="go">s1-2   NaN    d3     2</span>
<span class="go">s2-2   NaN    d4     2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">var</span><span class="o">.</span><span class="n">T</span>
<span class="go">         b  c</span>
<span class="go">annoA-0  1  2</span>
<span class="go">annoA-1  2  1</span>
<span class="go">annoA-2  3  2</span>
<span class="go">annoB-2  2  1</span>
</pre></div>
</div>
<p>Joining on the union of variables.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span> <span class="o">=</span> <span class="n">adata1</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">adata2</span><span class="p">,</span> <span class="n">adata3</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span>
<span class="go">AnnData object with n_obs  n_vars = 6  4</span>
<span class="go">    obs: &#39;anno1&#39;, &#39;anno2&#39;, &#39;batch&#39;</span>
<span class="go">    var: &#39;annoA-0&#39;, &#39;annoA-1&#39;, &#39;annoA-2&#39;, &#39;annoB-2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">var</span><span class="o">.</span><span class="n">T</span>
<span class="go">           a    b    c    d</span>
<span class="go">annoA-0  0.0  1.0  2.0  NaN</span>
<span class="go">annoA-1  NaN  2.0  1.0  0.0</span>
<span class="go">annoA-2  NaN  3.0  2.0  0.0</span>
<span class="go">annoB-2  NaN  2.0  1.0  0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">var_names</span>
<span class="go">Index([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], dtype=&#39;object&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">X</span>
<span class="go">array([[ 1.,  2.,  3., nan],</span>
<span class="go">       [ 4.,  5.,  6., nan],</span>
<span class="go">       [nan,  3.,  2.,  1.],</span>
<span class="go">       [nan,  6.,  5.,  4.],</span>
<span class="go">       [nan,  3.,  2.,  1.],</span>
<span class="go">       [nan,  6.,  5.,  4.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">array([nan, 25., 23., nan])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Xdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">outer</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">outer</span><span class="o">.</span><span class="n">var_names</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Xdf</span>
<span class="go">     a    b    c    d</span>
<span class="go">0  1.0  2.0  3.0  NaN</span>
<span class="go">1  4.0  5.0  6.0  NaN</span>
<span class="go">2  NaN  3.0  2.0  1.0</span>
<span class="go">3  NaN  6.0  5.0  4.0</span>
<span class="go">4  NaN  3.0  2.0  1.0</span>
<span class="go">5  NaN  6.0  5.0  4.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Xdf</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">a     5.0</span>
<span class="go">b    25.0</span>
<span class="go">c    23.0</span>
<span class="go">d    10.0</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>One way to deal with missing values is to use masked arrays:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">ma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">masked_invalid</span><span class="p">(</span><span class="n">outer</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">X</span>
<span class="go">masked_array(</span>
<span class="go">  data=[[1.0, 2.0, 3.0, --],</span>
<span class="go">        [4.0, 5.0, 6.0, --],</span>
<span class="go">        [--, 3.0, 2.0, 1.0],</span>
<span class="go">        [--, 6.0, 5.0, 4.0],</span>
<span class="go">        [--, 3.0, 2.0, 1.0],</span>
<span class="go">        [--, 6.0, 5.0, 4.0]],</span>
<span class="go">  mask=[[False, False, False,  True],</span>
<span class="go">        [False, False, False,  True],</span>
<span class="go">        [ True, False, False, False],</span>
<span class="go">        [ True, False, False, False],</span>
<span class="go">        [ True, False, False, False],</span>
<span class="go">        [ True, False, False, False]],</span>
<span class="go">  fill_value=1e+20)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([ 5., 25., 23., 10.])</span>
</pre></div>
</div>
<p>The masked array is not saved but has to be reinstantiated after saving.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;./test.h5ad&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">anndata</span> <span class="kn">import</span> <span class="n">read_h5ad</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span> <span class="o">=</span> <span class="n">read_h5ad</span><span class="p">(</span><span class="s1">&#39;./test.h5ad&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer</span><span class="o">.</span><span class="n">X</span>
<span class="go">array([[ 1.,  2.,  3., nan],</span>
<span class="go">       [ 4.,  5.,  6., nan],</span>
<span class="go">       [nan,  3.,  2.,  1.],</span>
<span class="go">       [nan,  6.,  5.,  4.],</span>
<span class="go">       [nan,  3.,  2.,  1.],</span>
<span class="go">       [nan,  6.,  5.,  4.]])</span>
</pre></div>
</div>
<p>For sparse data, everything behaves similarly,
except that for <cite>join=outer</cite>, zeros are added.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">csr_matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata1</span> <span class="o">=</span> <span class="n">AnnData</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">csr_matrix</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">obs_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;s1&#39;</span><span class="p">,</span> <span class="s1">&#39;s2&#39;</span><span class="p">],</span> <span class="n">anno1</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">var_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata2</span> <span class="o">=</span> <span class="n">AnnData</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">csr_matrix</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">obs_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;s3&#39;</span><span class="p">,</span> <span class="s1">&#39;s4&#39;</span><span class="p">],</span> <span class="n">anno1</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c3&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">var_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata3</span> <span class="o">=</span> <span class="n">AnnData</span><span class="p">(</span>
<span class="gp">... </span><span class="n">csr_matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">obs_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;s5&#39;</span><span class="p">,</span> <span class="s1">&#39;s6&#39;</span><span class="p">],</span> <span class="n">anno2</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d3&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">var_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span> <span class="o">=</span> <span class="n">adata1</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">adata2</span><span class="p">,</span> <span class="n">adata3</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">var_names</span>
<span class="go">Index([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], dtype=&#39;object&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span>
<span class="go">array([[0., 2., 3., 0.],</span>
<span class="go">       [0., 5., 6., 0.],</span>
<span class="go">       [0., 3., 2., 0.],</span>
<span class="go">       [0., 6., 5., 0.],</span>
<span class="go">       [0., 0., 2., 1.],</span>
<span class="go">       [0., 6., 5., 0.]], dtype=float32)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData" title="anndata._core.anndata.AnnData"><span class="pre">AnnData</span></a></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.copy" title="Permalink to this definition"></a></dt>
<dd><p>Full copy, optionally on disk.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.filename">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">filename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="src.models.inference_classification.html#src.models.inference_classification.Path" title="pathlib.Path"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.filename" title="Permalink to this definition"></a></dt>
<dd><p>Change to backing mode by setting the filename of a <cite>.h5ad</cite> file.</p>
<ul class="simple">
<li><p>Setting the filename writes the stored data to disk.</p></li>
<li><p>Setting the filename when the filename was previously another name
moves the backing file from the previous file to the new file.
If you want to copy the previous file, use <cite>copy(filename=new_filename)</cite>.</p></li>
</ul>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.is_view">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_view</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.is_view" title="Permalink to this definition"></a></dt>
<dd><p><cite>True</cite> if object is view of another AnnData object, <cite>False</cite> otherwise.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.isbacked">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">isbacked</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.isbacked" title="Permalink to this definition"></a></dt>
<dd><p><cite>True</cite> if object is backed on disk, <cite>False</cite> otherwise.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.layers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">layers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Layers</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">LayersView</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.layers" title="Permalink to this definition"></a></dt>
<dd><p>Dictionary-like object with values of the same dimensions as <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a>.</p>
<p>Layers in AnnData are inspired by loompys <span class="xref std std-ref">loomlayers</span>.</p>
<p>Return the layer named <cite>unspliced</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adata</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="s2">&quot;unspliced&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Create or replace the <cite>spliced</cite> layer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adata</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="s2">&quot;spliced&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>
</div>
<p>Assign the 10th column of layer <cite>spliced</cite> to the variable a:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">adata</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="s2">&quot;spliced&quot;</span><span class="p">][:,</span> <span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p>Delete the <cite>spliced</cite> layer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">adata</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="s2">&quot;spliced&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Return layers names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adata</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.n_obs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_obs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.n_obs" title="Permalink to this definition"></a></dt>
<dd><p>Number of observations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.n_vars">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_vars</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.n_vars" title="Permalink to this definition"></a></dt>
<dd><p>Number of variables/features.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.obs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">obs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.obs" title="Permalink to this definition"></a></dt>
<dd><p>One-dimensional annotation of observations (<cite>pd.DataFrame</cite>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.obs_keys">
<span class="sig-name descname"><span class="pre">obs_keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.obs_keys" title="Permalink to this definition"></a></dt>
<dd><p>List keys of observation annotation <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.obs_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">obs_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Index</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.obs_names" title="Permalink to this definition"></a></dt>
<dd><p>Names of observations (alias for <cite>.obs.index</cite>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.obs_names_make_unique">
<span class="sig-name descname"><span class="pre">obs_names_make_unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">join</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'-'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.obs_names_make_unique" title="Permalink to this definition"></a></dt>
<dd><p>Makes the index unique by appending a number string to each duplicate index element:
1, 2, etc.</p>
<p>If a tentative name created by the algorithm already exists in the index, it tries
the next integer in the sequence.</p>
<p>The first occurrence of a non-unique value is ignored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>join</strong>  The connecting string between name and integer.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">anndata</span> <span class="kn">import</span> <span class="n">AnnData</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span> <span class="o">=</span> <span class="n">AnnData</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">var</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">var_names</span>
<span class="go">Index([&#39;a&#39;, &#39;a&#39;, &#39;b&#39;], dtype=&#39;object&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">var_names_make_unique</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">var_names</span>
<span class="go">Index([&#39;a&#39;, &#39;a-1&#39;, &#39;b&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.obs_vector">
<span class="sig-name descname"><span class="pre">obs_vector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.obs_vector" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function for returning a 1 dimensional ndarray of values
from <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.layers" title="src.inference.execution_UI.AnnData.layers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">layers</span></code></a><cite>[k]</cite>, or <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a>.</p>
<p>Made for convenience, not performance.
Intentionally permissive about arguments, for easy iterative use.</p>
<section id="params">
<h3>Params<a class="headerlink" href="#params" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>k</dt><dd><p>Key to use. Should be in <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var_names" title="src.inference.execution_UI.AnnData.var_names"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var_names</span></code></a> or <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a><cite>.columns</cite>.</p>
</dd>
<dt>layer</dt><dd><p>What layer values should be returned from. If <cite>None</cite>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a> is used.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><em>A one dimensional nd array, with values for each obs in the same order</em></p></li>
<li><p>as <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs_names" title="src.inference.execution_UI.AnnData.obs_names"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs_names</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.obsm">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">obsm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">AxisArrays</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">AxisArraysView</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.obsm" title="Permalink to this definition"></a></dt>
<dd><p>Multi-dimensional annotation of observations
(mutable structured <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>).</p>
<p>Stores for each key a two or higher-dimensional <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
of length <cite>n_obs</cite>.
Is sliced with <cite>data</cite> and <cite>obs</cite> but behaves otherwise like a <span class="xref std std-term">mapping</span>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.obsm_keys">
<span class="sig-name descname"><span class="pre">obsm_keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.obsm_keys" title="Permalink to this definition"></a></dt>
<dd><p>List keys of observation annotation <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obsm" title="src.inference.execution_UI.AnnData.obsm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obsm</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.obsp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">obsp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">PairwiseArrays</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PairwiseArraysView</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.obsp" title="Permalink to this definition"></a></dt>
<dd><p>Pairwise annotation of observations,
a mutable mapping with array-like values.</p>
<p>Stores for each key a two or higher-dimensional <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
whose first two dimensions are of length <cite>n_obs</cite>.
Is sliced with <cite>data</cite> and <cite>obs</cite> but behaves otherwise like a <span class="xref std std-term">mapping</span>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.raw">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">raw</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Raw</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.raw" title="Permalink to this definition"></a></dt>
<dd><p>Store raw version of <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a> and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a> as <cite>.raw.X</cite> and <cite>.raw.var</cite>.</p>
<p>The <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.raw" title="src.inference.execution_UI.AnnData.raw"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw</span></code></a> attribute is initialized with the current content
of an object by setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adata</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="n">adata</span>
</pre></div>
</div>
<p>Its content can be deleted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adata</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># or</span>
<span class="k">del</span> <span class="n">adata</span><span class="o">.</span><span class="n">raw</span>
</pre></div>
</div>
<p>Upon slicing an AnnData object along the obs (row) axis, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.raw" title="src.inference.execution_UI.AnnData.raw"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw</span></code></a>
is also sliced. Slicing an AnnData object along the vars (columns) axis
leaves <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.raw" title="src.inference.execution_UI.AnnData.raw"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw</span></code></a> unaffected. Note that you can call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adata</span><span class="o">.</span><span class="n">raw</span><span class="p">[:,</span> <span class="s1">&#39;orig_variable_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">X</span>
</pre></div>
</div>
<p>to retrieve the data associated with a variable that might have been
filtered out or compressed away in <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.rename_categories">
<span class="sig-name descname"><span class="pre">rename_categories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categories</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.rename_categories" title="Permalink to this definition"></a></dt>
<dd><p>Rename categories of annotation <cite>key</cite> in <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a>,
and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.uns" title="src.inference.execution_UI.AnnData.uns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">uns</span></code></a>.</p>
<p>Only supports passing a list/array-like <cite>categories</cite> argument.</p>
<p>Besides calling <cite>self.obs[key].cat.categories = categories</cite> 
similar for <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a> - this also renames categories in unstructured
annotation that uses the categorical annotation <cite>key</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong>  Key for observations or variables annotation.</p></li>
<li><p><strong>categories</strong>  New categories, the same number as the old categories.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.shape">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shape</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.shape" title="Permalink to this definition"></a></dt>
<dd><p>Shape of data matrix (<a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.n_obs" title="src.inference.execution_UI.AnnData.n_obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">n_obs</span></code></a>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.n_vars" title="src.inference.execution_UI.AnnData.n_vars"><code class="xref py py-attr docutils literal notranslate"><span class="pre">n_vars</span></code></a>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.strings_to_categoricals">
<span class="sig-name descname"><span class="pre">strings_to_categoricals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.strings_to_categoricals" title="Permalink to this definition"></a></dt>
<dd><p>Transform string annotations to categoricals.</p>
<p>Only affects string annotations that lead to less categories than the
total number of observations.</p>
<section id="id4">
<h3>Params<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>df</dt><dd><p>If <cite>df</cite> is <cite>None</cite>, modifies both <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a> and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a>,
otherwise modifies <cite>df</cite> inplace.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Turns the view of an <code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code> into an actual
<code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code>.</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.to_df">
<span class="sig-name descname"><span class="pre">to_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.to_df" title="Permalink to this definition"></a></dt>
<dd><p>Generate shallow <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<p>The data matrix <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a> is returned as
<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, where <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs_names" title="src.inference.execution_UI.AnnData.obs_names"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs_names</span></code></a> initializes the
index, and <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var_names" title="src.inference.execution_UI.AnnData.var_names"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var_names</span></code></a> the columns.</p>
<ul class="simple">
<li><p>No annotations are maintained in the returned object.</p></li>
<li><p>The data matrix is densified in case it is sparse.</p></li>
</ul>
<section id="id5">
<h3>Params<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>layer<span class="classifier">str</span></dt><dd><p>Key for <cite>.layers</cite>.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.to_memory">
<span class="sig-name descname"><span class="pre">to_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData" title="anndata._core.anndata.AnnData"><span class="pre">AnnData</span></a></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.to_memory" title="Permalink to this definition"></a></dt>
<dd><p>Return a new AnnData object with all backed arrays loaded into memory.</p>
<section id="id6">
<h3>Params<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<blockquote>
<div><dl class="simple">
<dt>copy:</dt><dd><p>Whether the arrays that are already in-memory should be copied.</p>
</dd>
</dl>
</div></blockquote>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">anndata</span>
<span class="n">backed</span> <span class="o">=</span> <span class="n">anndata</span><span class="o">.</span><span class="n">read_h5ad</span><span class="p">(</span><span class="s2">&quot;file.h5ad&quot;</span><span class="p">,</span> <span class="n">backed</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="n">mem</span> <span class="o">=</span> <span class="n">backed</span><span class="p">[</span><span class="n">backed</span><span class="o">.</span><span class="n">obs</span><span class="p">[</span><span class="s2">&quot;cluster&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">to_memory</span><span class="p">()</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.transpose">
<span class="sig-name descname"><span class="pre">transpose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData" title="anndata._core.anndata.AnnData"><span class="pre">AnnData</span></a></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.transpose" title="Permalink to this definition"></a></dt>
<dd><p>Transpose whole object.</p>
<p>Data matrix is transposed, observations and variables are interchanged.</p>
<p>Ignores <cite>.raw</cite>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.uns">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">uns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">MutableMapping</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.uns" title="Permalink to this definition"></a></dt>
<dd><p>Unstructured annotation (ordered dictionary).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.uns_keys">
<span class="sig-name descname"><span class="pre">uns_keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.uns_keys" title="Permalink to this definition"></a></dt>
<dd><p>List keys of unstructured annotation.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.var">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">var</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.var" title="Permalink to this definition"></a></dt>
<dd><p>One-dimensional annotation of variables/ features (<cite>pd.DataFrame</cite>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.var_keys">
<span class="sig-name descname"><span class="pre">var_keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.var_keys" title="Permalink to this definition"></a></dt>
<dd><p>List keys of variable annotation <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.var_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">var_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Index</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.var_names" title="Permalink to this definition"></a></dt>
<dd><p>Names of variables (alias for <cite>.var.index</cite>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.var_names_make_unique">
<span class="sig-name descname"><span class="pre">var_names_make_unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">join</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'-'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.var_names_make_unique" title="Permalink to this definition"></a></dt>
<dd><p>Makes the index unique by appending a number string to each duplicate index element:
1, 2, etc.</p>
<p>If a tentative name created by the algorithm already exists in the index, it tries
the next integer in the sequence.</p>
<p>The first occurrence of a non-unique value is ignored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>join</strong>  The connecting string between name and integer.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">anndata</span> <span class="kn">import</span> <span class="n">AnnData</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span> <span class="o">=</span> <span class="n">AnnData</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">var</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">var_names</span>
<span class="go">Index([&#39;a&#39;, &#39;a&#39;, &#39;b&#39;], dtype=&#39;object&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">var_names_make_unique</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adata</span><span class="o">.</span><span class="n">var_names</span>
<span class="go">Index([&#39;a&#39;, &#39;a-1&#39;, &#39;b&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.var_vector">
<span class="sig-name descname"><span class="pre">var_vector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.var_vector" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function for returning a 1 dimensional ndarray of values
from <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.layers" title="src.inference.execution_UI.AnnData.layers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">layers</span></code></a><cite>[k]</cite>, or <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs" title="src.inference.execution_UI.AnnData.obs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs</span></code></a>.</p>
<p>Made for convenience, not performance. Intentionally permissive about
arguments, for easy iterative use.</p>
<section id="id7">
<h3>Params<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>k</dt><dd><p>Key to use. Should be in <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.obs_names" title="src.inference.execution_UI.AnnData.obs_names"><code class="xref py py-attr docutils literal notranslate"><span class="pre">obs_names</span></code></a> or <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var" title="src.inference.execution_UI.AnnData.var"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var</span></code></a><cite>.columns</cite>.</p>
</dd>
<dt>layer</dt><dd><p>What layer values should be returned from. If <cite>None</cite>, <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a> is used.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><em>A one dimensional nd array, with values for each var in the same order</em></p></li>
<li><p>as <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.var_names" title="src.inference.execution_UI.AnnData.var_names"><code class="xref py py-attr docutils literal notranslate"><span class="pre">var_names</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.varm">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">varm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">AxisArrays</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">AxisArraysView</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.varm" title="Permalink to this definition"></a></dt>
<dd><p>Multi-dimensional annotation of variables/features
(mutable structured <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>).</p>
<p>Stores for each key a two or higher-dimensional <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
of length <cite>n_vars</cite>.
Is sliced with <cite>data</cite> and <cite>var</cite> but behaves otherwise like a <span class="xref std std-term">mapping</span>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.varm_keys">
<span class="sig-name descname"><span class="pre">varm_keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.execution_UI.AnnData.varm_keys" title="Permalink to this definition"></a></dt>
<dd><p>List keys of variable annotation <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.varm" title="src.inference.execution_UI.AnnData.varm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">varm</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.varp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">varp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">PairwiseArrays</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PairwiseArraysView</span></em><a class="headerlink" href="#src.inference.execution_UI.AnnData.varp" title="Permalink to this definition"></a></dt>
<dd><p>Pairwise annotation of variables/features,
a mutable mapping with array-like values.</p>
<p>Stores for each key a two or higher-dimensional <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
whose first two dimensions are of length <cite>n_var</cite>.
Is sliced with <cite>data</cite> and <cite>var</cite> but behaves otherwise like a <span class="xref std std-term">mapping</span>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'gzip'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'lzf'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression_opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_dense</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.write" title="Permalink to this definition"></a></dt>
<dd><p>Write <cite>.h5ad</cite>-formatted hdf5 file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Setting compression to <cite>gzip</cite> can save disk space
but will slow down writing and subsequent reading.
Prior to v0.6.16, this was the default for parameter <cite>compression</cite>.</p>
</div>
<p>Generally, if you have sparse data that are stored as a dense matrix,
you can dramatically improve performance and reduce disk space
by converting to a <code class="xref py py-class docutils literal notranslate"><span class="pre">csr_matrix</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">csr_matrix</span>
<span class="n">adata</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="n">csr_matrix</span><span class="p">(</span><span class="n">adata</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong>  Filename of data file. Defaults to backing file.</p></li>
<li><p><strong>compression</strong>  <p>For [<cite>lzf</cite>, <cite>gzip</cite>], see the h5py <span class="xref std std-ref">dataset_compression</span>.</p>
<p>Alternative compression filters such as <cite>zstd</cite> can be passed
from the <span class="xref std std-doc">hdf5plugin</span> library.
Experimental.</p>
<p>Usage example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hdf5plugin</span>
<span class="n">adata</span><span class="o">.</span><span class="n">write_h5ad</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">compression</span><span class="o">=</span><span class="n">hdf5plugin</span><span class="o">.</span><span class="n">FILTERS</span><span class="p">[</span><span class="s2">&quot;zstd&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Datasets written with hdf5plugin-provided compressors
cannot be opened without first loading the hdf5plugin
library using <cite>import hdf5plugin</cite>. When using alternative
compression filters such as <cite>zstd</cite>, consider writing to
<cite>zarr</cite> format instead of <cite>h5ad</cite>, as the <cite>zarr</cite> library
provides a more transparent compression pipeline.</p>
</div>
</p></li>
<li><p><strong>compression_opts</strong>  <p>For [<cite>lzf</cite>, <cite>gzip</cite>], see the h5py <span class="xref std std-ref">dataset_compression</span>.</p>
<p>Alternative compression filters such as <cite>zstd</cite> can be configured
using helpers from the <span class="xref std std-doc">hdf5plugin</span>
library. Experimental.</p>
<p>Usage example (setting <cite>zstd</cite> compression level to 5):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hdf5plugin</span>
<span class="n">adata</span><span class="o">.</span><span class="n">write_h5ad</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">compression</span><span class="o">=</span><span class="n">hdf5plugin</span><span class="o">.</span><span class="n">FILTERS</span><span class="p">[</span><span class="s2">&quot;zstd&quot;</span><span class="p">],</span>
    <span class="n">compression_opts</span><span class="o">=</span><span class="n">hdf5plugin</span><span class="o">.</span><span class="n">Zstd</span><span class="p">(</span><span class="n">clevel</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">filter_options</span>
<span class="p">)</span>
</pre></div>
</div>
</p></li>
<li><p><strong>as_dense</strong>  Sparse arrays in AnnData object to write as dense. Currently only
supports <cite>X</cite> and <cite>raw/X</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.write_csvs">
<span class="sig-name descname"><span class="pre">write_csvs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">','</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.write_csvs" title="Permalink to this definition"></a></dt>
<dd><p>Write annotation to <cite>.csv</cite> files.</p>
<p>It is not possible to recover the full <code class="xref py py-class docutils literal notranslate"><span class="pre">AnnData</span></code> from
these files. Use <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.write" title="src.inference.execution_UI.AnnData.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code></a> for this.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong>  Name of directory to which to export.</p></li>
<li><p><strong>skip_data</strong>  Skip the data matrix <a class="reference internal" href="src.inference.execution_UI.html#src.inference.execution_UI.AnnData.X" title="src.inference.execution_UI.AnnData.X"><code class="xref py py-attr docutils literal notranslate"><span class="pre">X</span></code></a>.</p></li>
<li><p><strong>sep</strong>  Separator for the data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.write_h5ad">
<span class="sig-name descname"><span class="pre">write_h5ad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'gzip'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'lzf'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression_opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_dense</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.write_h5ad" title="Permalink to this definition"></a></dt>
<dd><p>Write <cite>.h5ad</cite>-formatted hdf5 file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Setting compression to <cite>gzip</cite> can save disk space
but will slow down writing and subsequent reading.
Prior to v0.6.16, this was the default for parameter <cite>compression</cite>.</p>
</div>
<p>Generally, if you have sparse data that are stored as a dense matrix,
you can dramatically improve performance and reduce disk space
by converting to a <code class="xref py py-class docutils literal notranslate"><span class="pre">csr_matrix</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">csr_matrix</span>
<span class="n">adata</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="n">csr_matrix</span><span class="p">(</span><span class="n">adata</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong>  Filename of data file. Defaults to backing file.</p></li>
<li><p><strong>compression</strong>  <p>For [<cite>lzf</cite>, <cite>gzip</cite>], see the h5py <span class="xref std std-ref">dataset_compression</span>.</p>
<p>Alternative compression filters such as <cite>zstd</cite> can be passed
from the <span class="xref std std-doc">hdf5plugin</span> library.
Experimental.</p>
<p>Usage example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hdf5plugin</span>
<span class="n">adata</span><span class="o">.</span><span class="n">write_h5ad</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">compression</span><span class="o">=</span><span class="n">hdf5plugin</span><span class="o">.</span><span class="n">FILTERS</span><span class="p">[</span><span class="s2">&quot;zstd&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Datasets written with hdf5plugin-provided compressors
cannot be opened without first loading the hdf5plugin
library using <cite>import hdf5plugin</cite>. When using alternative
compression filters such as <cite>zstd</cite>, consider writing to
<cite>zarr</cite> format instead of <cite>h5ad</cite>, as the <cite>zarr</cite> library
provides a more transparent compression pipeline.</p>
</div>
</p></li>
<li><p><strong>compression_opts</strong>  <p>For [<cite>lzf</cite>, <cite>gzip</cite>], see the h5py <span class="xref std std-ref">dataset_compression</span>.</p>
<p>Alternative compression filters such as <cite>zstd</cite> can be configured
using helpers from the <span class="xref std std-doc">hdf5plugin</span>
library. Experimental.</p>
<p>Usage example (setting <cite>zstd</cite> compression level to 5):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hdf5plugin</span>
<span class="n">adata</span><span class="o">.</span><span class="n">write_h5ad</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">compression</span><span class="o">=</span><span class="n">hdf5plugin</span><span class="o">.</span><span class="n">FILTERS</span><span class="p">[</span><span class="s2">&quot;zstd&quot;</span><span class="p">],</span>
    <span class="n">compression_opts</span><span class="o">=</span><span class="n">hdf5plugin</span><span class="o">.</span><span class="n">Zstd</span><span class="p">(</span><span class="n">clevel</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">filter_options</span>
<span class="p">)</span>
</pre></div>
</div>
</p></li>
<li><p><strong>as_dense</strong>  Sparse arrays in AnnData object to write as dense. Currently only
supports <cite>X</cite> and <cite>raw/X</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.write_loom">
<span class="sig-name descname"><span class="pre">write_loom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_obsm_varm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.write_loom" title="Permalink to this definition"></a></dt>
<dd><p>Write <cite>.loom</cite>-formatted hdf5 file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong>  The filename.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.AnnData.write_zarr">
<span class="sig-name descname"><span class="pre">write_zarr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">MutableMapping</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.AnnData.write_zarr" title="Permalink to this definition"></a></dt>
<dd><p>Write a hierarchical Zarr array store.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong>  The filename, a <code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code>, or a Zarr storage class.</p></li>
<li><p><strong>chunks</strong>  Chunk shape.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.execution_UI.</span></span><span class="sig-name descname"><span class="pre">CodeExecutor</span></span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.execute_api_call">
<span class="sig-name descname"><span class="pre">execute_api_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_call_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.execute_api_call" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.execute_code_past_success">
<span class="sig-name descname"><span class="pre">execute_code_past_success</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'import'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.execute_code_past_success" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.execute_one_pass">
<span class="sig-name descname"><span class="pre">execute_one_pass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.execute_one_pass" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.filter_picklable_variables">
<span class="sig-name descname"><span class="pre">filter_picklable_variables</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.filter_picklable_variables" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.format_arguments">
<span class="sig-name descname"><span class="pre">format_arguments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected_params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.format_arguments" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.format_value">
<span class="sig-name descname"><span class="pre">format_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.format_value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.generate_execution_code">
<span class="sig-name descname"><span class="pre">generate_execution_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_params_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.generate_execution_code" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.generate_execution_code_for_one_api">
<span class="sig-name descname"><span class="pre">generate_execution_code_for_one_api</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selected_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_selected_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_class_API</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.generate_execution_code_for_one_api" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.get_import_code">
<span class="sig-name descname"><span class="pre">get_import_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.get_import_code" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.get_max_result_from_variable_list">
<span class="sig-name descname"><span class="pre">get_max_result_from_variable_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result_name_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.get_max_result_from_variable_list" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.is_picklable">
<span class="sig-name descname"><span class="pre">is_picklable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.is_picklable" title="Permalink to this definition"></a></dt>
<dd><p>Check if an object is picklable, with a special case for AnnData.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.is_str_at_first_level">
<span class="sig-name descname"><span class="pre">is_str_at_first_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.is_str_at_first_level" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.load_environment">
<span class="sig-name descname"><span class="pre">load_environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.load_environment" title="Permalink to this definition"></a></dt>
<dd><p>Load environment, with special handling for AnnData objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.load_object">
<span class="sig-name descname"><span class="pre">load_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.load_object" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.load_variables_to_json">
<span class="sig-name descname"><span class="pre">load_variables_to_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.load_variables_to_json" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.makeup_for_missing_parameters">
<span class="sig-name descname"><span class="pre">makeup_for_missing_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_input</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.makeup_for_missing_parameters" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.makeup_for_missing_single_parameter">
<span class="sig-name descname"><span class="pre">makeup_for_missing_single_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_name_to_update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_spec_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'&#64;'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.makeup_for_missing_single_parameter" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.makeup_for_missing_single_parameter_type_special">
<span class="sig-name descname"><span class="pre">makeup_for_missing_single_parameter_type_special</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_name_to_update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_input</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.makeup_for_missing_single_parameter_type_special" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.save_environment">
<span class="sig-name descname"><span class="pre">save_environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.save_environment" title="Permalink to this definition"></a></dt>
<dd><p>Save environment, with special handling for AnnData objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.save_object">
<span class="sig-name descname"><span class="pre">save_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.save_object" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.save_special_objects">
<span class="sig-name descname"><span class="pre">save_special_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.save_special_objects" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.save_variables_to_json">
<span class="sig-name descname"><span class="pre">save_variables_to_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.save_variables_to_json" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.select_parameters">
<span class="sig-name descname"><span class="pre">select_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.select_parameters" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.execution_UI.CodeExecutor.split_tuple_variable">
<span class="sig-name descname"><span class="pre">split_tuple_variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">last_code_status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.execution_UI.CodeExecutor.split_tuple_variable" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.execution_UI.load_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.execution_UI.</span></span><span class="sig-name descname"><span class="pre">load_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#src.inference.execution_UI.load_json" title="Permalink to this definition"></a></dt>
<dd><p>Load JSON data from a specified file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>)  The path to the JSON file to be loaded.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The data loaded from the JSON file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.execution_UI.save_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.execution_UI.</span></span><span class="sig-name descname"><span class="pre">save_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.execution_UI.save_json" title="Permalink to this definition"></a></dt>
<dd><p>Save results to a JSON file with indentation of 4 spaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_path</strong> (<em>str</em>)  Path to the output file.</p></li>
<li><p><strong>results</strong> (<em>dict</em>)  Dictionary containing the results to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">save_json</span><span class="p">(</span><span class="s1">&#39;output.json&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-src.inference.retriever_batch_inference">
<span id="src-inference-retriever-batch-inference-module"></span><h2>src.inference.retriever_batch_inference module<a class="headerlink" href="#module-src.inference.retriever_batch_inference" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.retriever_batch_inference.</span></span><span class="sig-name descname"><span class="pre">SentenceTransformer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name_or_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modules</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_auth_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequential</span></code></p>
<p>Loads or create a SentenceTransformer model, that can be used to map sentences / text to embeddings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name_or_path</strong>  If it is a filepath on disc, it loads the model from that path. If it is not a path, it first tries to download a pre-trained SentenceTransformer model. If that fails, tries to construct a model from Huggingface models repository with that name.</p></li>
<li><p><strong>modules</strong>  This parameter can be used to create custom SentenceTransformer models from scratch.</p></li>
<li><p><strong>device</strong>  Device (like cuda / cpu) that should be used for computation. If None, checks if a GPU can be used.</p></li>
<li><p><strong>cache_folder</strong>  Path to store models</p></li>
<li><p><strong>use_auth_token</strong>  HuggingFace authentication token to download private models.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.T_destination">
<span class="sig-name descname"><span class="pre">T_destination</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">~T_destination</span></em><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.T_destination" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.add_module">
<span class="sig-name descname"><span class="pre">add_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.add_module" title="Permalink to this definition"></a></dt>
<dd><p>Adds a child module to the current module.</p>
<p>The module can be accessed as an attribute using the given name.</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>name (str): name of the child module. The child module can be</dt><dd><p>accessed from this module using the given name</p>
</dd>
</dl>
<p>module (Module): child module to be added to the module.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequential</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.append" title="Permalink to this definition"></a></dt>
<dd><p>Appends a given module to the end.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>module (nn.Module): module to append</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.apply" title="Permalink to this definition"></a></dt>
<dd><p>Applies <code class="docutils literal notranslate"><span class="pre">fn</span></code> recursively to every submodule (as returned by <code class="docutils literal notranslate"><span class="pre">.children()</span></code>)
as well as self. Typical use includes initializing the parameters of a model
(see also <span class="xref std std-ref">nn-init-doc</span>).</p>
<dl class="simple">
<dt>Args:</dt><dd><p>fn (<code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> -&gt; None): function to be applied to each submodule</p>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">init_weights</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">==</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">m</span><span class="o">.</span><span class="n">weight</span><span class="o">.</span><span class="n">fill_</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">init_weights</span><span class="p">)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[1., 1.],</span>
<span class="go">        [1., 1.]], requires_grad=True)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[1., 1.],</span>
<span class="go">        [1., 1.]], requires_grad=True)</span>
<span class="go">Sequential(</span>
<span class="go">  (0): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">  (1): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.bfloat16">
<span class="sig-name descname"><span class="pre">bfloat16</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.bfloat16" title="Permalink to this definition"></a></dt>
<dd><p>Casts all floating point parameters and buffers to <code class="docutils literal notranslate"><span class="pre">bfloat16</span></code> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.buffers">
<span class="sig-name descname"><span class="pre">buffers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.buffers" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over module buffers.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>recurse (bool): if True, then yields buffers of this module</dt><dd><p>and all submodules. Otherwise, yields only buffers that
are direct members of this module.</p>
</dd>
</dl>
</dd>
<dt>Yields:</dt><dd><p>torch.Tensor: module buffer</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">buf</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">buffers</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="n">buf</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
<span class="go">&lt;class &#39;torch.Tensor&#39;&gt; (20L,)</span>
<span class="go">&lt;class &#39;torch.Tensor&#39;&gt; (20L, 1L, 5L, 5L)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.call_super_init">
<span class="sig-name descname"><span class="pre">call_super_init</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.call_super_init" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.children">
<span class="sig-name descname"><span class="pre">children</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.children" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over immediate children modules.</p>
<dl class="simple">
<dt>Yields:</dt><dd><p>Module: a child module</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.cpu">
<span class="sig-name descname"><span class="pre">cpu</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.cpu" title="Permalink to this definition"></a></dt>
<dd><p>Moves all model parameters and buffers to the CPU.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.cuda">
<span class="sig-name descname"><span class="pre">cuda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">device</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.cuda" title="Permalink to this definition"></a></dt>
<dd><p>Moves all model parameters and buffers to the GPU.</p>
<p>This also makes associated parameters and buffers different objects. So
it should be called before constructing optimizer if the module will
live on GPU while being optimized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>device (int, optional): if specified, all parameters will be</dt><dd><p>copied to that device</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.device">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">device</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">device</span></em><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.device" title="Permalink to this definition"></a></dt>
<dd><p>Get torch.device from module, assuming that the whole module has one device.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.double">
<span class="sig-name descname"><span class="pre">double</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.double" title="Permalink to this definition"></a></dt>
<dd><p>Casts all floating point parameters and buffers to <code class="docutils literal notranslate"><span class="pre">double</span></code> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.dump_patches">
<span class="sig-name descname"><span class="pre">dump_patches</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.dump_patches" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sentences</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress_bar</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sentence_embedding'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to_numpy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to_tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.encode" title="Permalink to this definition"></a></dt>
<dd><p>Computes sentence embeddings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentences</strong>  the sentences to embed</p></li>
<li><p><strong>batch_size</strong>  the batch size used for the computation</p></li>
<li><p><strong>show_progress_bar</strong>  Output a progress bar when encode sentences</p></li>
<li><p><strong>output_value</strong>  Default sentence_embedding, to get sentence embeddings. Can be set to token_embeddings to get wordpiece token embeddings. Set to None, to get all output values</p></li>
<li><p><strong>convert_to_numpy</strong>  If true, the output is a list of numpy vectors. Else, it is a list of pytorch tensors.</p></li>
<li><p><strong>convert_to_tensor</strong>  If true, you get one large tensor as return. Overwrites any setting from convert_to_numpy</p></li>
<li><p><strong>device</strong>  Which torch.device to use for the computation</p></li>
<li><p><strong>normalize_embeddings</strong>  If set to true, returned vectors will have length 1. In that case, the faster dot-product (util.dot_score) instead of cosine similarity can be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>By default, a list of tensors is returned. If convert_to_tensor, a stacked tensor is returned. If convert_to_numpy, a numpy matrix is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.encode_multi_process">
<span class="sig-name descname"><span class="pre">encode_multi_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sentences</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.encode_multi_process" title="Permalink to this definition"></a></dt>
<dd><p>This method allows to run encode() on multiple GPUs. The sentences are chunked into smaller packages
and sent to individual processes, which encode these on the different GPUs. This method is only suitable
for encoding large sets of sentences</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentences</strong>  List of sentences</p></li>
<li><p><strong>pool</strong>  A pool of workers started with SentenceTransformer.start_multi_process_pool</p></li>
<li><p><strong>batch_size</strong>  Encode sentences with batch size</p></li>
<li><p><strong>chunk_size</strong>  Sentences are chunked and sent to the individual processes. If none, it determine a sensible size.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Numpy matrix with all embeddings</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.eval">
<span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.eval" title="Permalink to this definition"></a></dt>
<dd><p>Sets the module in evaluation mode.</p>
<p>This has any effect only on certain modules. See documentations of
particular modules for details of their behaviors in training/evaluation
mode, if they are affected, e.g. <code class="xref py py-class docutils literal notranslate"><span class="pre">Dropout</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BatchNorm</span></code>,
etc.</p>
<p>This is equivalent with <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.train(False)</span></code>.</p>
<p>See <span class="xref std std-ref">locally-disable-grad-doc</span> for a comparison between
<cite>.eval()</cite> and several similar mechanisms that may be confused with it.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evaluator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="src.models.api_evaluator.html#src.models.api_evaluator.SentenceEvaluator" title="sentence_transformers.evaluation.SentenceEvaluator.SentenceEvaluator"><span class="pre">SentenceEvaluator</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.evaluate" title="Permalink to this definition"></a></dt>
<dd><p>Evaluate the model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluator</strong>  the evaluator</p></li>
<li><p><strong>output_path</strong>  the evaluator can write the results to this path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sequential</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequential</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.extend" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.extra_repr">
<span class="sig-name descname"><span class="pre">extra_repr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.extra_repr" title="Permalink to this definition"></a></dt>
<dd><p>Set the extra representation of the module</p>
<p>To print customized extra information, you should re-implement
this method in your own modules. Both single-line and multi-line
strings are acceptable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">train_objectives:</span> <span class="pre">~typing.Iterable[~typing.Tuple[~torch.utils.data.dataloader.DataLoader,</span> <span class="pre">~torch.nn.modules.module.Module]],</span> <span class="pre">evaluator:</span> <span class="pre">~sentence_transformers.evaluation.SentenceEvaluator.SentenceEvaluator</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">epochs:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1,</span> <span class="pre">steps_per_epoch=None,</span> <span class="pre">scheduler:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'WarmupLinear',</span> <span class="pre">warmup_steps:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">10000,</span> <span class="pre">optimizer_class:</span> <span class="pre">~typing.Type[~torch.optim.optimizer.Optimizer]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'torch.optim.adamw.AdamW'&gt;,</span> <span class="pre">optimizer_params:</span> <span class="pre">~typing.Dict[str,</span> <span class="pre">object]</span> <span class="pre">=</span> <span class="pre">{'lr':</span> <span class="pre">2e-05},</span> <span class="pre">weight_decay:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">0.01,</span> <span class="pre">evaluation_steps:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">output_path:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">save_best_model:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">max_grad_norm:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">1,</span> <span class="pre">use_amp:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">callback:</span> <span class="pre">~typing.Callable[[float,</span> <span class="pre">int,</span> <span class="pre">int],</span> <span class="pre">None]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">show_progress_bar:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">checkpoint_path:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">checkpoint_save_steps:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">500,</span> <span class="pre">checkpoint_save_total_limit:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.fit" title="Permalink to this definition"></a></dt>
<dd><p>Train the model with the given training objective
Each training objective is sampled in turn for one batch.
We sample only as many batches from each objective as there are in the smallest one
to make sure of equal training with each dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_objectives</strong>  Tuples of (DataLoader, LossFunction). Pass more than one for multi-task learning</p></li>
<li><p><strong>evaluator</strong>  An evaluator (sentence_transformers.evaluation) evaluates the model performance during training on held-out dev data. It is used to determine the best model that is saved to disc.</p></li>
<li><p><strong>epochs</strong>  Number of epochs for training</p></li>
<li><p><strong>steps_per_epoch</strong>  Number of training steps per epoch. If set to None (default), one epoch is equal the DataLoader size from train_objectives.</p></li>
<li><p><strong>scheduler</strong>  Learning rate scheduler. Available schedulers: constantlr, warmupconstant, warmuplinear, warmupcosine, warmupcosinewithhardrestarts</p></li>
<li><p><strong>warmup_steps</strong>  Behavior depends on the scheduler. For WarmupLinear (default), the learning rate is increased from o up to the maximal learning rate. After these many training steps, the learning rate is decreased linearly back to zero.</p></li>
<li><p><strong>optimizer_class</strong>  Optimizer</p></li>
<li><p><strong>optimizer_params</strong>  Optimizer parameters</p></li>
<li><p><strong>weight_decay</strong>  Weight decay for model parameters</p></li>
<li><p><strong>evaluation_steps</strong>  If &gt; 0, evaluate the model using evaluator after each number of training steps</p></li>
<li><p><strong>output_path</strong>  Storage path for the model and evaluation files</p></li>
<li><p><strong>save_best_model</strong>  If true, the best model (according to evaluator) is stored at output_path</p></li>
<li><p><strong>max_grad_norm</strong>  Used for gradient normalization.</p></li>
<li><p><strong>use_amp</strong>  Use Automatic Mixed Precision (AMP). Only for Pytorch &gt;= 1.6.0</p></li>
<li><p><strong>callback</strong>  Callback function that is invoked after each evaluation.
It must accept the following three parameters in this order:
<cite>score</cite>, <cite>epoch</cite>, <cite>steps</cite></p></li>
<li><p><strong>show_progress_bar</strong>  If True, output a tqdm progress bar</p></li>
<li><p><strong>checkpoint_path</strong>  Folder to save checkpoints during training</p></li>
<li><p><strong>checkpoint_save_steps</strong>  Will save a checkpoint after so many steps</p></li>
<li><p><strong>checkpoint_save_total_limit</strong>  Total number of checkpoints to store</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.float">
<span class="sig-name descname"><span class="pre">float</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.float" title="Permalink to this definition"></a></dt>
<dd><p>Casts all floating point parameters and buffers to <code class="docutils literal notranslate"><span class="pre">float</span></code> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.forward" title="Permalink to this definition"></a></dt>
<dd><p>Defines the computation performed at every call.</p>
<p>Should be overridden by all subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the recipe for forward pass needs to be defined within
this function, one should call the <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> instance afterwards
instead of this since the former takes care of running the
registered hooks while the latter silently ignores them.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.get_buffer">
<span class="sig-name descname"><span class="pre">get_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tensor</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Returns the buffer given by <code class="docutils literal notranslate"><span class="pre">target</span></code> if it exists,
otherwise throws an error.</p>
<p>See the docstring for <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> for a more detailed
explanation of this methods functionality as well as how to
correctly specify <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>target: The fully-qualified string name of the buffer</dt><dd><p>to look for. (See <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> for how to specify a
fully-qualified string.)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>torch.Tensor: The buffer referenced by <code class="docutils literal notranslate"><span class="pre">target</span></code></p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>AttributeError: If the target string references an invalid</dt><dd><p>path or resolves to something that is not a
buffer</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.get_extra_state">
<span class="sig-name descname"><span class="pre">get_extra_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_extra_state" title="Permalink to this definition"></a></dt>
<dd><p>Returns any extra state to include in the modules state_dict.
Implement this and a corresponding <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.set_extra_state" title="src.inference.retriever_batch_inference.SentenceTransformer.set_extra_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_extra_state()</span></code></a> for your module
if you need to store extra state. This function is called when building the
modules <cite>state_dict()</cite>.</p>
<p>Note that extra state should be picklable to ensure working serialization
of the state_dict. We only provide provide backwards compatibility guarantees
for serializing Tensors; other objects may break backwards compatibility if
their serialized pickled form changes.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>object: Any extra state to store in the modules state_dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.get_max_seq_length">
<span class="sig-name descname"><span class="pre">get_max_seq_length</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_max_seq_length" title="Permalink to this definition"></a></dt>
<dd><p>Returns the maximal sequence length for input the model accepts. Longer inputs will be truncated</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.get_parameter">
<span class="sig-name descname"><span class="pre">get_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Parameter</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Returns the parameter given by <code class="docutils literal notranslate"><span class="pre">target</span></code> if it exists,
otherwise throws an error.</p>
<p>See the docstring for <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> for a more detailed
explanation of this methods functionality as well as how to
correctly specify <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>target: The fully-qualified string name of the Parameter</dt><dd><p>to look for. (See <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> for how to specify a
fully-qualified string.)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>torch.nn.Parameter: The Parameter referenced by <code class="docutils literal notranslate"><span class="pre">target</span></code></p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>AttributeError: If the target string references an invalid</dt><dd><p>path or resolves to something that is not an
<code class="docutils literal notranslate"><span class="pre">nn.Parameter</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.get_sentence_embedding_dimension">
<span class="sig-name descname"><span class="pre">get_sentence_embedding_dimension</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_sentence_embedding_dimension" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.get_sentence_features">
<span class="sig-name descname"><span class="pre">get_sentence_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">features</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_sentence_features" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.get_submodule">
<span class="sig-name descname"><span class="pre">get_submodule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Module</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.get_submodule" title="Permalink to this definition"></a></dt>
<dd><p>Returns the submodule given by <code class="docutils literal notranslate"><span class="pre">target</span></code> if it exists,
otherwise throws an error.</p>
<p>For example, lets say you have an <code class="docutils literal notranslate"><span class="pre">nn.Module</span></code> <code class="docutils literal notranslate"><span class="pre">A</span></code> that
looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>A(
    (net_b): Module(
        (net_c): Module(
            (conv): Conv2d(16, 33, kernel_size=(3, 3), stride=(2, 2))
        )
        (linear): Linear(in_features=100, out_features=200, bias=True)
    )
)
</pre></div>
</div>
<p>(The diagram shows an <code class="docutils literal notranslate"><span class="pre">nn.Module</span></code> <code class="docutils literal notranslate"><span class="pre">A</span></code>. <code class="docutils literal notranslate"><span class="pre">A</span></code> has a nested
submodule <code class="docutils literal notranslate"><span class="pre">net_b</span></code>, which itself has two submodules <code class="docutils literal notranslate"><span class="pre">net_c</span></code>
and <code class="docutils literal notranslate"><span class="pre">linear</span></code>. <code class="docutils literal notranslate"><span class="pre">net_c</span></code> then has a submodule <code class="docutils literal notranslate"><span class="pre">conv</span></code>.)</p>
<p>To check whether or not we have the <code class="docutils literal notranslate"><span class="pre">linear</span></code> submodule, we
would call <code class="docutils literal notranslate"><span class="pre">get_submodule(&quot;net_b.linear&quot;)</span></code>. To check whether
we have the <code class="docutils literal notranslate"><span class="pre">conv</span></code> submodule, we would call
<code class="docutils literal notranslate"><span class="pre">get_submodule(&quot;net_b.net_c.conv&quot;)</span></code>.</p>
<p>The runtime of <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> is bounded by the degree
of module nesting in <code class="docutils literal notranslate"><span class="pre">target</span></code>. A query against
<code class="docutils literal notranslate"><span class="pre">named_modules</span></code> achieves the same result, but it is O(N) in
the number of transitive modules. So, for a simple check to see
if some submodule exists, <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> should always be
used.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>target: The fully-qualified string name of the submodule</dt><dd><p>to look for. (See above example for how to specify a
fully-qualified string.)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>torch.nn.Module: The submodule referenced by <code class="docutils literal notranslate"><span class="pre">target</span></code></p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>AttributeError: If the target string references an invalid</dt><dd><p>path or resolves to something that is not an
<code class="docutils literal notranslate"><span class="pre">nn.Module</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.half">
<span class="sig-name descname"><span class="pre">half</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.half" title="Permalink to this definition"></a></dt>
<dd><p>Casts all floating point parameters and buffers to <code class="docutils literal notranslate"><span class="pre">half</span></code> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequential</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.insert" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.ipu">
<span class="sig-name descname"><span class="pre">ipu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">device</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.ipu" title="Permalink to this definition"></a></dt>
<dd><p>Moves all model parameters and buffers to the IPU.</p>
<p>This also makes associated parameters and buffers different objects. So
it should be called before constructing optimizer if the module will
live on IPU while being optimized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>device (int, optional): if specified, all parameters will be</dt><dd><p>copied to that device</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.load">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.load" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict">
<span class="sig-name descname"><span class="pre">load_state_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict" title="Permalink to this definition"></a></dt>
<dd><p>Copies parameters and buffers from <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a> into
this module and its descendants. If <code class="xref py py-attr docutils literal notranslate"><span class="pre">strict</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then
the keys of <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a> must exactly match the keys returned
by this modules <code class="xref py py-meth docutils literal notranslate"><span class="pre">state_dict()</span></code> function.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>state_dict (dict): a dict containing parameters and</dt><dd><p>persistent buffers.</p>
</dd>
<dt>strict (bool, optional): whether to strictly enforce that the keys</dt><dd><p>in <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a> match the keys returned by this modules
<code class="xref py py-meth docutils literal notranslate"><span class="pre">state_dict()</span></code> function. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">NamedTuple</span></code> with <code class="docutils literal notranslate"><span class="pre">missing_keys</span></code> and <code class="docutils literal notranslate"><span class="pre">unexpected_keys</span></code> fields:</dt><dd><ul class="simple">
<li><p><strong>missing_keys</strong> is a list of str containing the missing keys</p></li>
<li><p><strong>unexpected_keys</strong> is a list of str containing the unexpected keys</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><p>If a parameter or buffer is registered as <code class="docutils literal notranslate"><span class="pre">None</span></code> and its corresponding key
exists in <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>, <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_state_dict()</span></code></a> will raise a
<code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.max_seq_length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_seq_length</span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.max_seq_length" title="Permalink to this definition"></a></dt>
<dd><p>Property to get the maximal input sequence length for the model. Longer inputs will be truncated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.modules">
<span class="sig-name descname"><span class="pre">modules</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.modules" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over all modules in the network.</p>
<dl class="simple">
<dt>Yields:</dt><dd><p>Module: a module in the network</p>
</dd>
<dt>Note:</dt><dd><p>Duplicate modules are returned only once. In the following
example, <code class="docutils literal notranslate"><span class="pre">l</span></code> will be returned only once.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">net</span><span class="o">.</span><span class="n">modules</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

<span class="go">0 -&gt; Sequential(</span>
<span class="go">  (0): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">  (1): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">)</span>
<span class="go">1 -&gt; Linear(in_features=2, out_features=2, bias=True)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.named_buffers">
<span class="sig-name descname"><span class="pre">named_buffers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_duplicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.named_buffers" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over module buffers, yielding both the
name of the buffer as well as the buffer itself.</p>
<dl>
<dt>Args:</dt><dd><p>prefix (str): prefix to prepend to all buffer names.
recurse (bool, optional): if True, then yields buffers of this module</p>
<blockquote>
<div><p>and all submodules. Otherwise, yields only buffers that
are direct members of this module. Defaults to True.</p>
</div></blockquote>
<p>remove_duplicate (bool, optional): whether to remove the duplicated buffers in the result. Defaults to True.</p>
</dd>
<dt>Yields:</dt><dd><p>(str, torch.Tensor): Tuple containing the name and buffer</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">buf</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">named_buffers</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;running_var&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">buf</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.named_children">
<span class="sig-name descname"><span class="pre">named_children</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.named_children" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over immediate children modules, yielding both
the name of the module as well as the module itself.</p>
<dl class="simple">
<dt>Yields:</dt><dd><p>(str, Module): Tuple containing a name and child module</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">named_children</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;conv4&#39;</span><span class="p">,</span> <span class="s1">&#39;conv5&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.named_modules">
<span class="sig-name descname"><span class="pre">named_modules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_duplicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.named_modules" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over all modules in the network, yielding
both the name of the module as well as the module itself.</p>
<dl>
<dt>Args:</dt><dd><p>memo: a memo to store the set of modules already added to the result
prefix: a prefix that will be added to the name of the module
remove_duplicate: whether to remove the duplicated module instances in the result</p>
<blockquote>
<div><p>or not</p>
</div></blockquote>
</dd>
<dt>Yields:</dt><dd><p>(str, Module): Tuple of name and module</p>
</dd>
<dt>Note:</dt><dd><p>Duplicate modules are returned only once. In the following
example, <code class="docutils literal notranslate"><span class="pre">l</span></code> will be returned only once.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">net</span><span class="o">.</span><span class="n">named_modules</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

<span class="go">0 -&gt; (&#39;&#39;, Sequential(</span>
<span class="go">  (0): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">  (1): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">))</span>
<span class="go">1 -&gt; (&#39;0&#39;, Linear(in_features=2, out_features=2, bias=True))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.named_parameters">
<span class="sig-name descname"><span class="pre">named_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_duplicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Parameter</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.named_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over module parameters, yielding both the
name of the parameter as well as the parameter itself.</p>
<dl>
<dt>Args:</dt><dd><p>prefix (str): prefix to prepend to all parameter names.
recurse (bool): if True, then yields parameters of this module</p>
<blockquote>
<div><p>and all submodules. Otherwise, yields only parameters that
are direct members of this module.</p>
</div></blockquote>
<dl class="simple">
<dt>remove_duplicate (bool, optional): whether to remove the duplicated</dt><dd><p>parameters in the result. Defaults to True.</p>
</dd>
</dl>
</dd>
<dt>Yields:</dt><dd><p>(str, Parameter): Tuple containing the name and parameter</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">named_parameters</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;bias&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.parameters">
<span class="sig-name descname"><span class="pre">parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Parameter</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.parameters" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over module parameters.</p>
<p>This is typically passed to an optimizer.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>recurse (bool): if True, then yields parameters of this module</dt><dd><p>and all submodules. Otherwise, yields only parameters that
are direct members of this module.</p>
</dd>
</dl>
</dd>
<dt>Yields:</dt><dd><p>Parameter: module parameter</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">),</span> <span class="n">param</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
<span class="go">&lt;class &#39;torch.Tensor&#39;&gt; (20L,)</span>
<span class="go">&lt;class &#39;torch.Tensor&#39;&gt; (20L, 1L, 5L, 5L)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">slice</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Module</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.pop" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_backward_hook">
<span class="sig-name descname"><span class="pre">register_backward_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_backward_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a backward hook on the module.</p>
<p>This function is deprecated in favor of <code class="xref py py-meth docutils literal notranslate"><span class="pre">register_full_backward_hook()</span></code> and
the behavior of this function will change in future versions.</p>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_buffer">
<span class="sig-name descname"><span class="pre">register_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Adds a buffer to the module.</p>
<p>This is typically used to register a buffer that should not to be
considered a model parameter. For example, BatchNorms <code class="docutils literal notranslate"><span class="pre">running_mean</span></code>
is not a parameter, but is part of the modules state. Buffers, by
default, are persistent and will be saved alongside parameters. This
behavior can be changed by setting <code class="xref py py-attr docutils literal notranslate"><span class="pre">persistent</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>. The
only difference between a persistent buffer and a non-persistent buffer
is that the latter will not be a part of this modules
<a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>.</p>
<p>Buffers can be accessed as attributes using given names.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>name (str): name of the buffer. The buffer can be accessed</dt><dd><p>from this module using the given name</p>
</dd>
<dt>tensor (Tensor or None): buffer to be registered. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, then operations</dt><dd><p>that run on buffers, such as <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.cuda" title="src.inference.retriever_batch_inference.SentenceTransformer.cuda"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cuda</span></code></a>, are ignored. If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the buffer is <strong>not</strong> included in the modules <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>.</p>
</dd>
<dt>persistent (bool): whether the buffer is part of this modules</dt><dd><p><a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>.</p>
</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">register_buffer</span><span class="p">(</span><span class="s1">&#39;running_mean&#39;</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_features</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_forward_hook">
<span class="sig-name descname"><span class="pre">register_forward_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_forward_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a forward hook on the module.</p>
<p>The hook will be called every time after <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.forward" title="src.inference.retriever_batch_inference.SentenceTransformer.forward"><code class="xref py py-func docutils literal notranslate"><span class="pre">forward()</span></code></a> has computed an output.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">with_kwargs</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> or not specified, the input contains only
the positional arguments given to the module. Keyword arguments wont be
passed to the hooks and only to the <code class="docutils literal notranslate"><span class="pre">forward</span></code>. The hook can modify the
output. It can modify the input inplace but it will not have effect on
forward since this is called after <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.forward" title="src.inference.retriever_batch_inference.SentenceTransformer.forward"><code class="xref py py-func docutils literal notranslate"><span class="pre">forward()</span></code></a> is called. The hook
should have the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">modified</span> <span class="n">output</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">with_kwargs</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the forward hook will be passed the
<code class="docutils literal notranslate"><span class="pre">kwargs</span></code> given to the forward function and be expected to return the
output possibly modified. The hook should have the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">modified</span> <span class="n">output</span>
</pre></div>
</div>
<dl>
<dt>Args:</dt><dd><p>hook (Callable): The user defined hook to be registered.
prepend (bool): If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the provided <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired</p>
<blockquote>
<div><p>before all existing <code class="docutils literal notranslate"><span class="pre">forward</span></code> hooks on this
<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Otherwise, the provided
<code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired after all existing <code class="docutils literal notranslate"><span class="pre">forward</span></code> hooks on
this <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Note that global
<code class="docutils literal notranslate"><span class="pre">forward</span></code> hooks registered with
<code class="xref py py-func docutils literal notranslate"><span class="pre">register_module_forward_hook()</span></code> will fire before all hooks
registered by this method.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</div></blockquote>
<dl class="simple">
<dt>with_kwargs (bool): If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be passed the</dt><dd><p>kwargs given to the forward function.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_forward_pre_hook">
<span class="sig-name descname"><span class="pre">register_forward_pre_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_forward_pre_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a forward pre-hook on the module.</p>
<p>The hook will be called every time before <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.forward" title="src.inference.retriever_batch_inference.SentenceTransformer.forward"><code class="xref py py-func docutils literal notranslate"><span class="pre">forward()</span></code></a> is invoked.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">with_kwargs</span></code> is false or not specified, the input contains only
the positional arguments given to the module. Keyword arguments wont be
passed to the hooks and only to the <code class="docutils literal notranslate"><span class="pre">forward</span></code>. The hook can modify the
input. User can either return a tuple or a single modified value in the
hook. We will wrap the value into a tuple if a single value is returned
(unless that value is already a tuple). The hook should have the
following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">modified</span> <span class="nb">input</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">with_kwargs</span></code> is true, the forward pre-hook will be passed the
kwargs given to the forward function. And if the hook modifies the
input, both the args and kwargs should be returned. The hook should have
the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">a</span> <span class="nb">tuple</span> <span class="n">of</span> <span class="n">modified</span> <span class="nb">input</span> <span class="ow">and</span> <span class="n">kwargs</span>
</pre></div>
</div>
<dl>
<dt>Args:</dt><dd><p>hook (Callable): The user defined hook to be registered.
prepend (bool): If true, the provided <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired before</p>
<blockquote>
<div><p>all existing <code class="docutils literal notranslate"><span class="pre">forward_pre</span></code> hooks on this
<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Otherwise, the provided
<code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired after all existing <code class="docutils literal notranslate"><span class="pre">forward_pre</span></code> hooks
on this <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Note that global
<code class="docutils literal notranslate"><span class="pre">forward_pre</span></code> hooks registered with
<code class="xref py py-func docutils literal notranslate"><span class="pre">register_module_forward_pre_hook()</span></code> will fire before all
hooks registered by this method.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</div></blockquote>
<dl class="simple">
<dt>with_kwargs (bool): If true, the <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be passed the kwargs</dt><dd><p>given to the forward function.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_full_backward_hook">
<span class="sig-name descname"><span class="pre">register_full_backward_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_full_backward_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a backward hook on the module.</p>
<p>The hook will be called every time the gradients with respect to a module
are computed, i.e. the hook will execute if and only if the gradients with
respect to module outputs are computed. The hook should have the following
signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">grad_input</span><span class="p">,</span> <span class="n">grad_output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">Tensor</span><span class="p">)</span> <span class="ow">or</span> <span class="kc">None</span>
</pre></div>
</div>
<p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_input</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> are tuples that contain the gradients
with respect to the inputs and outputs respectively. The hook should
not modify its arguments, but it can optionally return a new gradient with
respect to the input that will be used in place of <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_input</span></code> in
subsequent computations. <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_input</span></code> will only correspond to the inputs given
as positional arguments and all kwarg arguments are ignored. Entries
in <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_input</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> will be <code class="docutils literal notranslate"><span class="pre">None</span></code> for all non-Tensor
arguments.</p>
<p>For technical reasons, when this hook is applied to a Module, its forward function will
receive a view of each Tensor passed to the Module. Similarly the caller will receive a view
of each Tensor returned by the Modules forward function.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Modifying inputs or outputs inplace is not allowed when using backward hooks and
will raise an error.</p>
</div>
<dl>
<dt>Args:</dt><dd><p>hook (Callable): The user-defined hook to be registered.
prepend (bool): If true, the provided <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired before</p>
<blockquote>
<div><p>all existing <code class="docutils literal notranslate"><span class="pre">backward</span></code> hooks on this
<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Otherwise, the provided
<code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired after all existing <code class="docutils literal notranslate"><span class="pre">backward</span></code> hooks on
this <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Note that global
<code class="docutils literal notranslate"><span class="pre">backward</span></code> hooks registered with
<code class="xref py py-func docutils literal notranslate"><span class="pre">register_module_full_backward_hook()</span></code> will fire before
all hooks registered by this method.</p>
</div></blockquote>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_full_backward_pre_hook">
<span class="sig-name descname"><span class="pre">register_full_backward_pre_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_full_backward_pre_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a backward pre-hook on the module.</p>
<p>The hook will be called every time the gradients for the module are computed.
The hook should have the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">grad_output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tensor</span> <span class="ow">or</span> <span class="kc">None</span>
</pre></div>
</div>
<p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> is a tuple. The hook should
not modify its arguments, but it can optionally return a new gradient with
respect to the output that will be used in place of <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> in
subsequent computations. Entries in <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> will be <code class="docutils literal notranslate"><span class="pre">None</span></code> for
all non-Tensor arguments.</p>
<p>For technical reasons, when this hook is applied to a Module, its forward function will
receive a view of each Tensor passed to the Module. Similarly the caller will receive a view
of each Tensor returned by the Modules forward function.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Modifying inputs inplace is not allowed when using backward hooks and
will raise an error.</p>
</div>
<dl>
<dt>Args:</dt><dd><p>hook (Callable): The user-defined hook to be registered.
prepend (bool): If true, the provided <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired before</p>
<blockquote>
<div><p>all existing <code class="docutils literal notranslate"><span class="pre">backward_pre</span></code> hooks on this
<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Otherwise, the provided
<code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired after all existing <code class="docutils literal notranslate"><span class="pre">backward_pre</span></code> hooks
on this <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Note that global
<code class="docutils literal notranslate"><span class="pre">backward_pre</span></code> hooks registered with
<code class="xref py py-func docutils literal notranslate"><span class="pre">register_module_full_backward_pre_hook()</span></code> will fire before
all hooks registered by this method.</p>
</div></blockquote>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_load_state_dict_post_hook">
<span class="sig-name descname"><span class="pre">register_load_state_dict_post_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_load_state_dict_post_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a post hook to be run after modules <code class="docutils literal notranslate"><span class="pre">load_state_dict</span></code>
is called.</p>
<dl class="simple">
<dt>It should have the following signature::</dt><dd><p>hook(module, incompatible_keys) -&gt; None</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">module</span></code> argument is the current module that this hook is registered
on, and the <code class="docutils literal notranslate"><span class="pre">incompatible_keys</span></code> argument is a <code class="docutils literal notranslate"><span class="pre">NamedTuple</span></code> consisting
of attributes <code class="docutils literal notranslate"><span class="pre">missing_keys</span></code> and <code class="docutils literal notranslate"><span class="pre">unexpected_keys</span></code>. <code class="docutils literal notranslate"><span class="pre">missing_keys</span></code>
is a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">str</span></code> containing the missing keys and
<code class="docutils literal notranslate"><span class="pre">unexpected_keys</span></code> is a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">str</span></code> containing the unexpected keys.</p>
<p>The given incompatible_keys can be modified inplace if needed.</p>
<p>Note that the checks performed when calling <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_state_dict()</span></code></a> with
<code class="docutils literal notranslate"><span class="pre">strict=True</span></code> are affected by modifications the hook makes to
<code class="docutils literal notranslate"><span class="pre">missing_keys</span></code> or <code class="docutils literal notranslate"><span class="pre">unexpected_keys</span></code>, as expected. Additions to either
set of keys will result in an error being thrown when <code class="docutils literal notranslate"><span class="pre">strict=True</span></code>, and
clearing out both missing and unexpected keys will avoid an error.</p>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_module">
<span class="sig-name descname"><span class="pre">register_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_module" title="Permalink to this definition"></a></dt>
<dd><p>Alias for <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.add_module" title="src.inference.retriever_batch_inference.SentenceTransformer.add_module"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_module()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_parameter">
<span class="sig-name descname"><span class="pre">register_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Parameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Adds a parameter to the module.</p>
<p>The parameter can be accessed as an attribute using given name.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>name (str): name of the parameter. The parameter can be accessed</dt><dd><p>from this module using the given name</p>
</dd>
<dt>param (Parameter or None): parameter to be added to the module. If</dt><dd><p><code class="docutils literal notranslate"><span class="pre">None</span></code>, then operations that run on parameters, such as <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.cuda" title="src.inference.retriever_batch_inference.SentenceTransformer.cuda"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cuda</span></code></a>,
are ignored. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the parameter is <strong>not</strong> included in the
modules <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.register_state_dict_pre_hook">
<span class="sig-name descname"><span class="pre">register_state_dict_pre_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.register_state_dict_pre_hook" title="Permalink to this definition"></a></dt>
<dd><p>These hooks will be called with arguments: <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">prefix</span></code>,
and <code class="docutils literal notranslate"><span class="pre">keep_vars</span></code> before calling <code class="docutils literal notranslate"><span class="pre">state_dict</span></code> on <code class="docutils literal notranslate"><span class="pre">self</span></code>. The registered
hooks can be used to perform pre-processing before the <code class="docutils literal notranslate"><span class="pre">state_dict</span></code>
call is made.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.requires_grad_">
<span class="sig-name descname"><span class="pre">requires_grad_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requires_grad</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.requires_grad_" title="Permalink to this definition"></a></dt>
<dd><p>Change if autograd should record operations on parameters in this
module.</p>
<p>This method sets the parameters <code class="xref py py-attr docutils literal notranslate"><span class="pre">requires_grad</span></code> attributes
in-place.</p>
<p>This method is helpful for freezing part of the module for finetuning
or training parts of a model individually (e.g., GAN training).</p>
<p>See <span class="xref std std-ref">locally-disable-grad-doc</span> for a comparison between
<cite>.requires_grad_()</cite> and several similar mechanisms that may be confused with it.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>requires_grad (bool): whether autograd should record operations on</dt><dd><p>parameters in this module. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_model_card</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_datasets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.save" title="Permalink to this definition"></a></dt>
<dd><p>Saves all elements for this seq. sentence embedder into different sub-folders
:param path: Path on disc
:param model_name: Optional model name
:param create_model_card: If True, create a README.md with basic information about this model
:param train_datasets: Optional list with the names of the datasets used to to train the model</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.save_to_hub">
<span class="sig-name descname"><span class="pre">save_to_hub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">private</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Add</span> <span class="pre">new</span> <span class="pre">SentenceTransformer</span> <span class="pre">model.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_model_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_model_card</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_datasets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.save_to_hub" title="Permalink to this definition"></a></dt>
<dd><p>Uploads all elements of this Sentence Transformer to a new HuggingFace Hub repository.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repo_name</strong>  Repository name for your model in the Hub.</p></li>
<li><p><strong>organization</strong>  Organization in which you want to push your model or tokenizer (you must be a member of this organization).</p></li>
<li><p><strong>private</strong>  Set to true, for hosting a prive model</p></li>
<li><p><strong>commit_message</strong>  Message to commit while pushing.</p></li>
<li><p><strong>local_model_path</strong>  Path of the model locally. If set, this file path will be uploaded. Otherwise, the current model will be uploaded</p></li>
<li><p><strong>exist_ok</strong>  If true, saving to an existing repository is OK. If false, saving only to a new repository is possible</p></li>
<li><p><strong>replace_model_card</strong>  If true, replace an existing model card in the hub with the automatically created model card</p></li>
<li><p><strong>train_datasets</strong>  Datasets used to train the model. If set, the datasets will be added to the model card in the Hub.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The url of the commit of your model in the given repository.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.set_extra_state">
<span class="sig-name descname"><span class="pre">set_extra_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.set_extra_state" title="Permalink to this definition"></a></dt>
<dd><p>This function is called from <a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict" title="src.inference.retriever_batch_inference.SentenceTransformer.load_state_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_state_dict()</span></code></a> to handle any extra state
found within the <cite>state_dict</cite>. Implement this function and a corresponding
<a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.get_extra_state" title="src.inference.retriever_batch_inference.SentenceTransformer.get_extra_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_extra_state()</span></code></a> for your module if you need to store extra state within its
<cite>state_dict</cite>.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>state (dict): Extra state from the <cite>state_dict</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.share_memory">
<span class="sig-name descname"><span class="pre">share_memory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.share_memory" title="Permalink to this definition"></a></dt>
<dd><p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.Tensor.share_memory_()</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.smart_batching_collate">
<span class="sig-name descname"><span class="pre">smart_batching_collate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.smart_batching_collate" title="Permalink to this definition"></a></dt>
<dd><p>Transforms a batch from a SmartBatchingDataset to a batch of tensors for the model
Here, batch is a list of tuples: [(tokens, label), ]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>batch</strong>  a batch from a SmartBatchingDataset</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a batch of tensors for the model</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.start_multi_process_pool">
<span class="sig-name descname"><span class="pre">start_multi_process_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_devices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.start_multi_process_pool" title="Permalink to this definition"></a></dt>
<dd><p>Starts multi process to process the encoding with several, independent processes.
This method is recommended if you want to encode on multiple GPUs. It is advised
to start only one process per GPU. This method works together with encode_multi_process</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>target_devices</strong>  PyTorch target devices, e.g. cuda:0, cuda:1 If None, all available CUDA devices will be used</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns a dict with the target processes, an input queue and and output queue.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.state_dict">
<span class="sig-name descname"><span class="pre">state_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.state_dict" title="Permalink to this definition"></a></dt>
<dd><p>Returns a dictionary containing references to the whole state of the module.</p>
<p>Both parameters and persistent buffers (e.g. running averages) are
included. Keys are corresponding parameter and buffer names.
Parameters and buffers set to <code class="docutils literal notranslate"><span class="pre">None</span></code> are not included.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned object is a shallow copy. It contains references
to the modules parameters and buffers.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently <code class="docutils literal notranslate"><span class="pre">state_dict()</span></code> also accepts positional arguments for
<code class="docutils literal notranslate"><span class="pre">destination</span></code>, <code class="docutils literal notranslate"><span class="pre">prefix</span></code> and <code class="docutils literal notranslate"><span class="pre">keep_vars</span></code> in order. However,
this is being deprecated and keyword arguments will be enforced in
future releases.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please avoid the use of argument <code class="docutils literal notranslate"><span class="pre">destination</span></code> as it is not
designed for end-users.</p>
</div>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>destination (dict, optional): If provided, the state of module will</dt><dd><p>be updated into the dict and the same object is returned.
Otherwise, an <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> will be created and returned.
Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt>prefix (str, optional): a prefix added to parameter and buffer</dt><dd><p>names to compose the keys in state_dict. Default: <code class="docutils literal notranslate"><span class="pre">''</span></code>.</p>
</dd>
<dt>keep_vars (bool, optional): by default the <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code> s</dt><dd><p>returned in the state dict are detached from autograd. If its
set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, detaching will not be performed.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>dict:</dt><dd><p>a dictionary containing a whole state of the module</p>
</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">module</span><span class="o">.</span><span class="n">state_dict</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;bias&#39;, &#39;weight&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.stop_multi_process_pool">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stop_multi_process_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pool</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.stop_multi_process_pool" title="Permalink to this definition"></a></dt>
<dd><p>Stops all processes started with start_multi_process_pool</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.to">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.to" title="Permalink to this definition"></a></dt>
<dd><p>Moves and/or casts the parameters and buffers.</p>
<p>This can be called as</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">non_blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">non_blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">non_blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memory_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.channels_last</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>Its signature is similar to <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.Tensor.to()</span></code>, but only accepts
floating point or complex <code class="xref py py-attr docutils literal notranslate"><span class="pre">dtype</span></code>s. In addition, this method will
only cast the floating point or complex parameters and buffers to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dtype</span></code>
(if given). The integral parameters and buffers will be moved
<a class="reference internal" href="src.inference.retriever_batch_inference.html#src.inference.retriever_batch_inference.SentenceTransformer.device" title="src.inference.retriever_batch_inference.SentenceTransformer.device"><code class="xref py py-attr docutils literal notranslate"><span class="pre">device</span></code></a>, if that is given, but with dtypes unchanged. When
<code class="xref py py-attr docutils literal notranslate"><span class="pre">non_blocking</span></code> is set, it tries to convert/move asynchronously
with respect to the host if possible, e.g., moving CPU Tensors with
pinned memory to CUDA devices.</p>
<p>See below for examples.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>device (<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.device</span></code>): the desired device of the parameters</dt><dd><p>and buffers in this module</p>
</dd>
<dt>dtype (<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.dtype</span></code>): the desired floating point or complex dtype of</dt><dd><p>the parameters and buffers in this module</p>
</dd>
<dt>tensor (torch.Tensor): Tensor whose dtype and device are the desired</dt><dd><p>dtype and device for all parameters and buffers in this module</p>
</dd>
<dt>memory_format (<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.memory_format</span></code>): the desired memory</dt><dd><p>format for 4D parameters and buffers in this module (keyword
only argument)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +IGNORE_WANT(&quot;non-deterministic&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.1913, -0.3420],</span>
<span class="go">        [-0.5113, -0.2325]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">double</span><span class="p">)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.1913, -0.3420],</span>
<span class="go">        [-0.5113, -0.2325]], dtype=torch.float64)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(env:TORCH_DOCTEST_CUDA1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gpu1</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda:1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">gpu1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">half</span><span class="p">,</span> <span class="n">non_blocking</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.1914, -0.3420],</span>
<span class="go">        [-0.5112, -0.2324]], dtype=torch.float16, device=&#39;cuda:1&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cpu</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.1914, -0.3420],</span>
<span class="go">        [-0.5112, -0.2324]], dtype=torch.float16)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">cdouble</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.3741+0.j,  0.2382+0.j],</span>
<span class="go">        [ 0.5593+0.j, -0.4443+0.j]], dtype=torch.complex128)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">cdouble</span><span class="p">))</span>
<span class="go">tensor([[0.6122+0.j, 0.1150+0.j],</span>
<span class="go">        [0.6122+0.j, 0.1150+0.j],</span>
<span class="go">        [0.6122+0.j, 0.1150+0.j]], dtype=torch.complex128)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.to_empty">
<span class="sig-name descname"><span class="pre">to_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">device</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.to_empty" title="Permalink to this definition"></a></dt>
<dd><p>Moves the parameters and buffers to the specified device without copying storage.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>device (<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.device</span></code>): The desired device of the parameters</dt><dd><p>and buffers in this module.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.tokenize">
<span class="sig-name descname"><span class="pre">tokenize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.tokenize" title="Permalink to this definition"></a></dt>
<dd><p>Tokenizes the texts</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.tokenizer">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tokenizer</span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.tokenizer" title="Permalink to this definition"></a></dt>
<dd><p>Property to get the tokenizer that is used by this model</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.train" title="Permalink to this definition"></a></dt>
<dd><p>Sets the module in training mode.</p>
<p>This has any effect only on certain modules. See documentations of
particular modules for details of their behaviors in training/evaluation
mode, if they are affected, e.g. <code class="xref py py-class docutils literal notranslate"><span class="pre">Dropout</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BatchNorm</span></code>,
etc.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>mode (bool): whether to set training mode (<code class="docutils literal notranslate"><span class="pre">True</span></code>) or evaluation</dt><dd><p>mode (<code class="docutils literal notranslate"><span class="pre">False</span></code>). Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.training">
<span class="sig-name descname"><span class="pre">training</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.training" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.type">
<span class="sig-name descname"><span class="pre">type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.type" title="Permalink to this definition"></a></dt>
<dd><p>Casts all parameters and buffers to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dst_type</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Args:</dt><dd><p>dst_type (type or string): the desired type</p>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.xpu">
<span class="sig-name descname"><span class="pre">xpu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">device</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.xpu" title="Permalink to this definition"></a></dt>
<dd><p>Moves all model parameters and buffers to the XPU.</p>
<p>This also makes associated parameters and buffers different objects. So
it should be called before constructing optimizer if the module will
live on XPU while being optimized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>device (int, optional): if specified, all parameters will be</dt><dd><p>copied to that device</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.SentenceTransformer.zero_grad">
<span class="sig-name descname"><span class="pre">zero_grad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_to_none</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.SentenceTransformer.zero_grad" title="Permalink to this definition"></a></dt>
<dd><p>Sets gradients of all model parameters to zero. See similar function
under <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.optim.Optimizer</span></code> for more context.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>set_to_none (bool): instead of setting to zero, set the grads to None.</dt><dd><p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.optim.Optimizer.zero_grad()</span></code> for details.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.compress_api_str_from_list_query_version">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_batch_inference.</span></span><span class="sig-name descname"><span class="pre">compress_api_str_from_list_query_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.compress_api_str_from_list_query_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.load_query">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_batch_inference.</span></span><span class="sig-name descname"><span class="pre">load_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.load_query" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.load_relevant_docs">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_batch_inference.</span></span><span class="sig-name descname"><span class="pre">load_relevant_docs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.load_relevant_docs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.process_retrieval_document_query_version">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_batch_inference.</span></span><span class="sig-name descname"><span class="pre">process_retrieval_document_query_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.process_retrieval_document_query_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.retrieve_inference">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_batch_inference.</span></span><span class="sig-name descname"><span class="pre">retrieve_inference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_batch_inference.retrieve_inference" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_batch_inference.save_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_batch_inference.</span></span><span class="sig-name descname"><span class="pre">save_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_batch_inference.save_json" title="Permalink to this definition"></a></dt>
<dd><p>Save results to a JSON file with indentation of 4 spaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_path</strong> (<em>str</em>)  Path to the output file.</p></li>
<li><p><strong>results</strong> (<em>dict</em>)  Dictionary containing the results to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">save_json</span><span class="p">(</span><span class="s1">&#39;output.json&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-src.inference.retriever_bm25_inference">
<span id="src-inference-retriever-bm25-inference-module"></span><h2>src.inference.retriever_bm25_inference module<a class="headerlink" href="#module-src.inference.retriever_bm25_inference" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Okapi">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">BM25Okapi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corpus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Okapi" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BM25</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Okapi.get_batch_scores">
<span class="sig-name descname"><span class="pre">get_batch_scores</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc_ids</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Okapi.get_batch_scores" title="Permalink to this definition"></a></dt>
<dd><p>Calculate bm25 scores between query and subset of all docs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Okapi.get_scores">
<span class="sig-name descname"><span class="pre">get_scores</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Okapi.get_scores" title="Permalink to this definition"></a></dt>
<dd><p>The ATIRE BM25 variant uses an idf function which uses a log(idf) score. To prevent negative idf scores,
this algorithm also adds a floor to the idf value of epsilon.
See [Trotman, A., X. Jia, M. Crane, Towards an Efficient and Effective Search Engine] for more info
:param query:
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Okapi.get_top_n">
<span class="sig-name descname"><span class="pre">get_top_n</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">documents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Okapi.get_top_n" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">BM25Retriever</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corpus</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{'similarity_top_k':</span> <span class="pre">5}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="src.retrievers.schema.html#src.retrievers.schema.BaseRetriever" title="src.retrievers.schema.BaseRetriever"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseRetriever</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseModel</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.Config">
<span class="sig-name descname"><span class="pre">Config</span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.Config" title="Permalink to this definition"></a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseConfig</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.aget_relevant_documents">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aget_relevant_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="src.retrievers.schema.html#src.retrievers.schema.Document" title="src.retrievers.schema.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.aget_relevant_documents" title="Permalink to this definition"></a></dt>
<dd><p>Get documents relevant for a query.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>query: string to find relevant documents for</p>
</dd>
<dt>Returns:</dt><dd><p>List of relevant documents</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.construct">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">construct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_fields_set</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SetStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.construct" title="Permalink to this definition"></a></dt>
<dd><p>Creates a new model setting __dict__ and __fields_set__ from trusted or pre-validated data.
Default values are respected, but no other validation is performed.
Behaves as if <cite>Config.extra = allow</cite> was set since it adds all passed values</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DictStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.copy" title="Permalink to this definition"></a></dt>
<dd><p>Duplicate a model, optionally choose which fields to include, exclude and change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>include</strong>  fields to include in new model</p></li>
<li><p><strong>exclude</strong>  fields to exclude from new model, as with values this takes precedence over include</p></li>
<li><p><strong>update</strong>  values to change/add in the new model. Note: the data is not validated before creating
the new model: you should trust this data</p></li>
<li><p><strong>deep</strong>  set to <cite>True</cite> to make a deep copy of the model</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>new model instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.corpus">
<span class="sig-name descname"><span class="pre">corpus</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.corpus" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.dict">
<span class="sig-name descname"><span class="pre">dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_unset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_none</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DictStrAny</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.dict" title="Permalink to this definition"></a></dt>
<dd><p>Generate a dictionary representation of the model, optionally specifying which fields to include or exclude.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.from_orm">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_orm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.from_orm" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.get_relevant_documents">
<span class="sig-name descname"><span class="pre">get_relevant_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="src.retrievers.schema.html#src.retrievers.schema.Document" title="src.retrievers.schema.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.get_relevant_documents" title="Permalink to this definition"></a></dt>
<dd><p>Get documents relevant for a query.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>query: string to find relevant documents for</p>
</dd>
<dt>Returns:</dt><dd><p>List of relevant documents</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.index">
<span class="sig-name descname"><span class="pre">index</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.index" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.json">
<span class="sig-name descname"><span class="pre">json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_unset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_none</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_as_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dumps_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">unicode</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.json" title="Permalink to this definition"></a></dt>
<dd><p>Generate a JSON representation of the model, <cite>include</cite> and <cite>exclude</cite> arguments as per <cite>dict()</cite>.</p>
<p><cite>encoder</cite> is an optional function to supply as <cite>default</cite> to json.dumps(), other arguments as per <cite>json.dumps()</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.parse_file">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="src.models.inference_classification.html#src.models.inference_classification.Path" title="pathlib.Path"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'utf8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proto</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Protocol</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_pickle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.parse_file" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.parse_obj">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.parse_obj" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.parse_raw">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'utf8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proto</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Protocol</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_pickle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.parse_raw" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.query_kwargs">
<span class="sig-name descname"><span class="pre">query_kwargs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.query_kwargs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.schema">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">by_alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'#/definitions/{model}'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DictStrAny</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.schema" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.schema_json">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">schema_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'#/definitions/{model}'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dumps_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">unicode</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.schema_json" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.update_forward_refs">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">update_forward_refs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">localns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.update_forward_refs" title="Permalink to this definition"></a></dt>
<dd><p>Try to update ForwardRefs on fields based on this Model, globalns and localns.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.BM25Retriever.validate">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.BM25Retriever.validate" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.LLM_model">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">LLM_model</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.LLM_model" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.LLM_response">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">LLM_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chat_prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gpt-3.5-turbo-0125'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">history</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.LLM_response" title="Permalink to this definition"></a></dt>
<dd><p>get response from LLM</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">OpenAIEmbeddings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'text-embedding-ada-002'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deployment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'text-embedding-ada-002'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openai_api_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openai_api_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openai_api_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openai_proxy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding_ctx_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8191</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openai_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openai_organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_special</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'all'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disallowed_special</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'all'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request_timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tiktoken_model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress_bar</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseModel</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Embeddings</span></code></p>
<p>OpenAI embedding models.</p>
<p>To use, you should have the <code class="docutils literal notranslate"><span class="pre">openai</span></code> python package installed, and the
environment variable <code class="docutils literal notranslate"><span class="pre">OPENAI_API_KEY</span></code> set with your API key or pass it
as a named parameter to the constructor.</p>
<dl>
<dt>Example:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain.embeddings</span> <span class="kn">import</span> <span class="n">OpenAIEmbeddings</span>
<span class="n">openai</span> <span class="o">=</span> <span class="n">OpenAIEmbeddings</span><span class="p">(</span><span class="n">openai_api_key</span><span class="o">=</span><span class="s2">&quot;my-api-key&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p>In order to use the library with Microsoft Azure endpoints, you need to set
the OPENAI_API_TYPE, OPENAI_API_BASE, OPENAI_API_KEY and OPENAI_API_VERSION.
The OPENAI_API_TYPE must be set to azure and the others correspond to
the properties of your endpoint.
In addition, the deployment name must be passed as the model parameter.</p>
<dl>
<dt>Example:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_TYPE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;azure&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_BASE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;https://&lt;your-endpoint.openai.azure.com/&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;your AzureOpenAI key&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_VERSION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;2023-05-15&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_PROXY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;http://your-corporate-proxy:8080&quot;</span>

<span class="kn">from</span> <span class="nn">langchain.embeddings.openai</span> <span class="kn">import</span> <span class="n">OpenAIEmbeddings</span>
<span class="n">embeddings</span> <span class="o">=</span> <span class="n">OpenAIEmbeddings</span><span class="p">(</span>
    <span class="n">deployment</span><span class="o">=</span><span class="s2">&quot;your-embeddings-deployment-name&quot;</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;your-embeddings-model-name&quot;</span><span class="p">,</span>
    <span class="n">openai_api_base</span><span class="o">=</span><span class="s2">&quot;https://your-endpoint.openai.azure.com/&quot;</span><span class="p">,</span>
    <span class="n">openai_api_type</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;This is a test query.&quot;</span>
<span class="n">query_result</span> <span class="o">=</span> <span class="n">embeddings</span><span class="o">.</span><span class="n">embed_query</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.Config">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Config</span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.Config" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Configuration for this pydantic object.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.Config.extra">
<span class="sig-name descname"><span class="pre">extra</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'forbid'</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.Config.extra" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.aembed_documents">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aembed_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.aembed_documents" title="Permalink to this definition"></a></dt>
<dd><p>Call out to OpenAIs embedding endpoint async for embedding search docs.</p>
<dl>
<dt>Args:</dt><dd><p>texts: The list of texts to embed.
chunk_size: The chunk size of embeddings. If None, will use the chunk size</p>
<blockquote>
<div><p>specified by the class.</p>
</div></blockquote>
</dd>
<dt>Returns:</dt><dd><p>List of embeddings, one for each text.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.aembed_query">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aembed_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.aembed_query" title="Permalink to this definition"></a></dt>
<dd><p>Call out to OpenAIs embedding endpoint async for embedding query text.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>text: The text to embed.</p>
</dd>
<dt>Returns:</dt><dd><p>Embedding for the text.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.allowed_special">
<span class="sig-name descname"><span class="pre">allowed_special</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'all'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.allowed_special" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.build_extra">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_extra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.build_extra" title="Permalink to this definition"></a></dt>
<dd><p>Build extra kwargs from additional params that were passed in.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.chunk_size">
<span class="sig-name descname"><span class="pre">chunk_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.chunk_size" title="Permalink to this definition"></a></dt>
<dd><p>Maximum number of texts to embed in each batch</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.construct">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">construct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_fields_set</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SetStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.construct" title="Permalink to this definition"></a></dt>
<dd><p>Creates a new model setting __dict__ and __fields_set__ from trusted or pre-validated data.
Default values are respected, but no other validation is performed.
Behaves as if <cite>Config.extra = allow</cite> was set since it adds all passed values</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DictStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.copy" title="Permalink to this definition"></a></dt>
<dd><p>Duplicate a model, optionally choose which fields to include, exclude and change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>include</strong>  fields to include in new model</p></li>
<li><p><strong>exclude</strong>  fields to exclude from new model, as with values this takes precedence over include</p></li>
<li><p><strong>update</strong>  values to change/add in the new model. Note: the data is not validated before creating
the new model: you should trust this data</p></li>
<li><p><strong>deep</strong>  set to <cite>True</cite> to make a deep copy of the model</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>new model instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.deployment">
<span class="sig-name descname"><span class="pre">deployment</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.deployment" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.dict">
<span class="sig-name descname"><span class="pre">dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_unset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_none</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DictStrAny</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.dict" title="Permalink to this definition"></a></dt>
<dd><p>Generate a dictionary representation of the model, optionally specifying which fields to include or exclude.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.disallowed_special">
<span class="sig-name descname"><span class="pre">disallowed_special</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'all'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.disallowed_special" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.embed_documents">
<span class="sig-name descname"><span class="pre">embed_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.embed_documents" title="Permalink to this definition"></a></dt>
<dd><p>Call out to OpenAIs embedding endpoint for embedding search docs.</p>
<dl>
<dt>Args:</dt><dd><p>texts: The list of texts to embed.
chunk_size: The chunk size of embeddings. If None, will use the chunk size</p>
<blockquote>
<div><p>specified by the class.</p>
</div></blockquote>
</dd>
<dt>Returns:</dt><dd><p>List of embeddings, one for each text.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.embed_query">
<span class="sig-name descname"><span class="pre">embed_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.embed_query" title="Permalink to this definition"></a></dt>
<dd><p>Call out to OpenAIs embedding endpoint for embedding query text.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>text: The text to embed.</p>
</dd>
<dt>Returns:</dt><dd><p>Embedding for the text.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.embedding_ctx_length">
<span class="sig-name descname"><span class="pre">embedding_ctx_length</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.embedding_ctx_length" title="Permalink to this definition"></a></dt>
<dd><p>The maximum number of tokens to embed at once.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.from_orm">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_orm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.from_orm" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.headers">
<span class="sig-name descname"><span class="pre">headers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.headers" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.json">
<span class="sig-name descname"><span class="pre">json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSetIntStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MappingIntStrAny</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_unset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_none</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_as_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dumps_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">unicode</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.json" title="Permalink to this definition"></a></dt>
<dd><p>Generate a JSON representation of the model, <cite>include</cite> and <cite>exclude</cite> arguments as per <cite>dict()</cite>.</p>
<p><cite>encoder</cite> is an optional function to supply as <cite>default</cite> to json.dumps(), other arguments as per <cite>json.dumps()</cite>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.max_retries">
<span class="sig-name descname"><span class="pre">max_retries</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.max_retries" title="Permalink to this definition"></a></dt>
<dd><p>Maximum number of retries to make when generating.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.model">
<span class="sig-name descname"><span class="pre">model</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.model" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.model_kwargs">
<span class="sig-name descname"><span class="pre">model_kwargs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.model_kwargs" title="Permalink to this definition"></a></dt>
<dd><p>Holds any model parameters valid for <cite>create</cite> call not explicitly specified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_base">
<span class="sig-name descname"><span class="pre">openai_api_base</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_base" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_key">
<span class="sig-name descname"><span class="pre">openai_api_key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_key" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_type">
<span class="sig-name descname"><span class="pre">openai_api_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_version">
<span class="sig-name descname"><span class="pre">openai_api_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_api_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_organization">
<span class="sig-name descname"><span class="pre">openai_organization</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_organization" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_proxy">
<span class="sig-name descname"><span class="pre">openai_proxy</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.openai_proxy" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_file">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="src.models.inference_classification.html#src.models.inference_classification.Path" title="pathlib.Path"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'utf8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proto</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Protocol</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_pickle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_file" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_obj">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_obj" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_raw">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'utf8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proto</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Protocol</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_pickle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.parse_raw" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.request_timeout">
<span class="sig-name descname"><span class="pre">request_timeout</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.request_timeout" title="Permalink to this definition"></a></dt>
<dd><p>Timeout in seconds for the OpenAPI request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.schema">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">by_alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'#/definitions/{model}'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DictStrAny</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.schema" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.schema_json">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">schema_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">unicode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'#/definitions/{model}'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dumps_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">unicode</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.schema_json" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.show_progress_bar">
<span class="sig-name descname"><span class="pre">show_progress_bar</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.show_progress_bar" title="Permalink to this definition"></a></dt>
<dd><p>Whether to show a progress bar when embedding.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.skip_empty">
<span class="sig-name descname"><span class="pre">skip_empty</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.skip_empty" title="Permalink to this definition"></a></dt>
<dd><p>Whether to skip empty strings when embedding or raise an error.
Defaults to not skipping.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.tiktoken_model_name">
<span class="sig-name descname"><span class="pre">tiktoken_model_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.tiktoken_model_name" title="Permalink to this definition"></a></dt>
<dd><p>The model name to pass to tiktoken when using this class.
Tiktoken is used to count the number of tokens in documents to constrain
them to be under a certain limit. By default, when set to None, this will
be the same as the embedding model name. However, there are some cases
where you may want to use this Embedding class with a model name not
supported by tiktoken. This can include when using Azure embeddings or
when using one of the many model providers that expose an OpenAI-like
API but with different models. In those cases, in order to avoid erroring
when tiktoken is called, you can specify a model name to use here.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.update_forward_refs">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">update_forward_refs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">localns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.update_forward_refs" title="Permalink to this definition"></a></dt>
<dd><p>Try to update ForwardRefs on fields based on this Model, globalns and localns.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.validate">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Model</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.validate" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.OpenAIEmbeddings.validate_environment">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">validate_environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.OpenAIEmbeddings.validate_environment" title="Permalink to this definition"></a></dt>
<dd><p>Validate that api key and python package exists in environment.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.embedding_model">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">embedding_model</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.embedding_model" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.evaluate_query_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">evaluate_query_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">retriever</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="src.retrievers.bm25.html#src.retrievers.bm25.BM25Retriever" title="src.retrievers.bm25.BM25Retriever"><span class="pre">BM25Retriever</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_pairs_set</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merged_pairs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.evaluate_query_pairs" title="Permalink to this definition"></a></dt>
<dd><p>Evaluates the accuracy of the retriever on a set of query pairs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>retriever</strong> (<a class="reference internal" href="src.inference.retriever_bm25_inference.html#src.inference.retriever_bm25_inference.BM25Retriever" title="src.inference.retriever_bm25_inference.BM25Retriever"><em>BM25Retriever</em></a>)  The retriever to use for getting relevant documents.</p></li>
<li><p><strong>query_pairs_set</strong> (<em>List</em><em>[</em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em>)  A set of query pairs to evaluate.</p></li>
<li><p><strong>name</strong> (<em>str</em>)  A name for the dataset being evaluated (e.g., train, test).</p></li>
<li><p><strong>top_k</strong> (<em>int</em>)  The number of top documents to consider for accuracy calculation.</p></li>
<li><p><strong>merged_pairs</strong> (<em>Set</em><em>[</em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em>)  A set of merged pairs for checking ambiguous correctness.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.find_similar_two_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">find_similar_two_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">API_init_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./data/standard_process/scanpy/API_init.json'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.find_similar_two_pairs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.generate_completion_stream">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">generate_completion_stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.generate_completion_stream" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.get_all_basic_func_from_cheatsheet">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">get_all_basic_func_from_cheatsheet</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.get_all_basic_func_from_cheatsheet" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.get_all_variable_from_cheatsheet">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">get_all_variable_from_cheatsheet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">LIB</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_bm25_inference.get_all_variable_from_cheatsheet" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.get_query_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">get_query_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.get_query_pairs" title="Permalink to this definition"></a></dt>
<dd><p>Extracts query pairs from the result data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>results</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>)  The list of result entries containing query and API name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of tuples where each tuple contains a query and the corresponding API name.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Tuple[str, str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.load_dotenv">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">load_dotenv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dotenv_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'utf-8'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.load_dotenv" title="Permalink to this definition"></a></dt>
<dd><p>Parse a .env file and then load all the variables found as environment variables.</p>
<dl>
<dt>Parameters:</dt><dd><p>dotenv_path: Absolute or relative path to .env file.
stream: Text stream (such as <cite>io.StringIO</cite>) with .env content, used if</p>
<blockquote>
<div><p><cite>dotenv_path</cite> is <cite>None</cite>.</p>
</div></blockquote>
<p>verbose: Whether to output a warning the .env file is missing.
override: Whether to override the system environment variables with the variables</p>
<blockquote>
<div><p>from the <cite>.env</cite> file.</p>
</div></blockquote>
<p>encoding: Encoding to be used to read the file.</p>
</dd>
<dt>Returns:</dt><dd><p>Bool: True if at least one environment variable is set else False</p>
</dd>
</dl>
<p>If both <cite>dotenv_path</cite> and <cite>stream</cite> are <cite>None</cite>, <cite>find_dotenv()</cite> is used to find the
.env file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.load_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">load_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.load_json" title="Permalink to this definition"></a></dt>
<dd><p>Load JSON data from a specified file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>)  The path to the JSON file to be loaded.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The data loaded from the JSON file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.main">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LIB</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.main" title="Permalink to this definition"></a></dt>
<dd><p>Main function to prepare data, create a retriever, and evaluate its performance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_k</strong> (<em>int</em>)  The number of top documents to retrieve.</p></li>
<li><p><strong>LIB</strong> (<em>str</em>)  Library identifier used to specify paths and filenames.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_bm25_inference.prepare_corpus">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_bm25_inference.</span></span><span class="sig-name descname"><span class="pre">prepare_corpus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ori_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_bm25_inference.prepare_corpus" title="Permalink to this definition"></a></dt>
<dd><p>Prepares a corpus from the original data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ori_data</strong> (<em>dict</em>)  Original data mapping API names to their information.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing:
- A list of dictionaries, each representing an API with its description and parameters.
- A list of tokenized representations of each API for BM25 processing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[Dict[str, Any]], List[List[str]]]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-src.inference.retriever_finetune_inference">
<span id="src-inference-retriever-finetune-inference-module"></span><h2>src.inference.retriever_finetune_inference module<a class="headerlink" href="#module-src.inference.retriever_finetune_inference" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">SentenceTransformer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name_or_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modules</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_auth_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequential</span></code></p>
<p>Loads or create a SentenceTransformer model, that can be used to map sentences / text to embeddings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name_or_path</strong>  If it is a filepath on disc, it loads the model from that path. If it is not a path, it first tries to download a pre-trained SentenceTransformer model. If that fails, tries to construct a model from Huggingface models repository with that name.</p></li>
<li><p><strong>modules</strong>  This parameter can be used to create custom SentenceTransformer models from scratch.</p></li>
<li><p><strong>device</strong>  Device (like cuda / cpu) that should be used for computation. If None, checks if a GPU can be used.</p></li>
<li><p><strong>cache_folder</strong>  Path to store models</p></li>
<li><p><strong>use_auth_token</strong>  HuggingFace authentication token to download private models.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.T_destination">
<span class="sig-name descname"><span class="pre">T_destination</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">~T_destination</span></em><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.T_destination" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.add_module">
<span class="sig-name descname"><span class="pre">add_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.add_module" title="Permalink to this definition"></a></dt>
<dd><p>Adds a child module to the current module.</p>
<p>The module can be accessed as an attribute using the given name.</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>name (str): name of the child module. The child module can be</dt><dd><p>accessed from this module using the given name</p>
</dd>
</dl>
<p>module (Module): child module to be added to the module.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequential</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.append" title="Permalink to this definition"></a></dt>
<dd><p>Appends a given module to the end.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>module (nn.Module): module to append</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.apply" title="Permalink to this definition"></a></dt>
<dd><p>Applies <code class="docutils literal notranslate"><span class="pre">fn</span></code> recursively to every submodule (as returned by <code class="docutils literal notranslate"><span class="pre">.children()</span></code>)
as well as self. Typical use includes initializing the parameters of a model
(see also <span class="xref std std-ref">nn-init-doc</span>).</p>
<dl class="simple">
<dt>Args:</dt><dd><p>fn (<code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> -&gt; None): function to be applied to each submodule</p>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">init_weights</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">==</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">m</span><span class="o">.</span><span class="n">weight</span><span class="o">.</span><span class="n">fill_</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">init_weights</span><span class="p">)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[1., 1.],</span>
<span class="go">        [1., 1.]], requires_grad=True)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[1., 1.],</span>
<span class="go">        [1., 1.]], requires_grad=True)</span>
<span class="go">Sequential(</span>
<span class="go">  (0): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">  (1): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.bfloat16">
<span class="sig-name descname"><span class="pre">bfloat16</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.bfloat16" title="Permalink to this definition"></a></dt>
<dd><p>Casts all floating point parameters and buffers to <code class="docutils literal notranslate"><span class="pre">bfloat16</span></code> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.buffers">
<span class="sig-name descname"><span class="pre">buffers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.buffers" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over module buffers.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>recurse (bool): if True, then yields buffers of this module</dt><dd><p>and all submodules. Otherwise, yields only buffers that
are direct members of this module.</p>
</dd>
</dl>
</dd>
<dt>Yields:</dt><dd><p>torch.Tensor: module buffer</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">buf</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">buffers</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="n">buf</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
<span class="go">&lt;class &#39;torch.Tensor&#39;&gt; (20L,)</span>
<span class="go">&lt;class &#39;torch.Tensor&#39;&gt; (20L, 1L, 5L, 5L)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.call_super_init">
<span class="sig-name descname"><span class="pre">call_super_init</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.call_super_init" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.children">
<span class="sig-name descname"><span class="pre">children</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.children" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over immediate children modules.</p>
<dl class="simple">
<dt>Yields:</dt><dd><p>Module: a child module</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.cpu">
<span class="sig-name descname"><span class="pre">cpu</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.cpu" title="Permalink to this definition"></a></dt>
<dd><p>Moves all model parameters and buffers to the CPU.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.cuda">
<span class="sig-name descname"><span class="pre">cuda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">device</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.cuda" title="Permalink to this definition"></a></dt>
<dd><p>Moves all model parameters and buffers to the GPU.</p>
<p>This also makes associated parameters and buffers different objects. So
it should be called before constructing optimizer if the module will
live on GPU while being optimized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>device (int, optional): if specified, all parameters will be</dt><dd><p>copied to that device</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.device">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">device</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">device</span></em><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.device" title="Permalink to this definition"></a></dt>
<dd><p>Get torch.device from module, assuming that the whole module has one device.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.double">
<span class="sig-name descname"><span class="pre">double</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.double" title="Permalink to this definition"></a></dt>
<dd><p>Casts all floating point parameters and buffers to <code class="docutils literal notranslate"><span class="pre">double</span></code> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.dump_patches">
<span class="sig-name descname"><span class="pre">dump_patches</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.dump_patches" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sentences</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress_bar</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sentence_embedding'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to_numpy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to_tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.encode" title="Permalink to this definition"></a></dt>
<dd><p>Computes sentence embeddings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentences</strong>  the sentences to embed</p></li>
<li><p><strong>batch_size</strong>  the batch size used for the computation</p></li>
<li><p><strong>show_progress_bar</strong>  Output a progress bar when encode sentences</p></li>
<li><p><strong>output_value</strong>  Default sentence_embedding, to get sentence embeddings. Can be set to token_embeddings to get wordpiece token embeddings. Set to None, to get all output values</p></li>
<li><p><strong>convert_to_numpy</strong>  If true, the output is a list of numpy vectors. Else, it is a list of pytorch tensors.</p></li>
<li><p><strong>convert_to_tensor</strong>  If true, you get one large tensor as return. Overwrites any setting from convert_to_numpy</p></li>
<li><p><strong>device</strong>  Which torch.device to use for the computation</p></li>
<li><p><strong>normalize_embeddings</strong>  If set to true, returned vectors will have length 1. In that case, the faster dot-product (util.dot_score) instead of cosine similarity can be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>By default, a list of tensors is returned. If convert_to_tensor, a stacked tensor is returned. If convert_to_numpy, a numpy matrix is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.encode_multi_process">
<span class="sig-name descname"><span class="pre">encode_multi_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sentences</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.encode_multi_process" title="Permalink to this definition"></a></dt>
<dd><p>This method allows to run encode() on multiple GPUs. The sentences are chunked into smaller packages
and sent to individual processes, which encode these on the different GPUs. This method is only suitable
for encoding large sets of sentences</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentences</strong>  List of sentences</p></li>
<li><p><strong>pool</strong>  A pool of workers started with SentenceTransformer.start_multi_process_pool</p></li>
<li><p><strong>batch_size</strong>  Encode sentences with batch size</p></li>
<li><p><strong>chunk_size</strong>  Sentences are chunked and sent to the individual processes. If none, it determine a sensible size.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Numpy matrix with all embeddings</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.eval">
<span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.eval" title="Permalink to this definition"></a></dt>
<dd><p>Sets the module in evaluation mode.</p>
<p>This has any effect only on certain modules. See documentations of
particular modules for details of their behaviors in training/evaluation
mode, if they are affected, e.g. <code class="xref py py-class docutils literal notranslate"><span class="pre">Dropout</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BatchNorm</span></code>,
etc.</p>
<p>This is equivalent with <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.train(False)</span></code>.</p>
<p>See <span class="xref std std-ref">locally-disable-grad-doc</span> for a comparison between
<cite>.eval()</cite> and several similar mechanisms that may be confused with it.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evaluator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="src.models.api_evaluator.html#src.models.api_evaluator.SentenceEvaluator" title="sentence_transformers.evaluation.SentenceEvaluator.SentenceEvaluator"><span class="pre">SentenceEvaluator</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.evaluate" title="Permalink to this definition"></a></dt>
<dd><p>Evaluate the model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluator</strong>  the evaluator</p></li>
<li><p><strong>output_path</strong>  the evaluator can write the results to this path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sequential</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequential</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.extend" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.extra_repr">
<span class="sig-name descname"><span class="pre">extra_repr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.extra_repr" title="Permalink to this definition"></a></dt>
<dd><p>Set the extra representation of the module</p>
<p>To print customized extra information, you should re-implement
this method in your own modules. Both single-line and multi-line
strings are acceptable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">train_objectives:</span> <span class="pre">~typing.Iterable[~typing.Tuple[~torch.utils.data.dataloader.DataLoader,</span> <span class="pre">~torch.nn.modules.module.Module]],</span> <span class="pre">evaluator:</span> <span class="pre">~sentence_transformers.evaluation.SentenceEvaluator.SentenceEvaluator</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">epochs:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1,</span> <span class="pre">steps_per_epoch=None,</span> <span class="pre">scheduler:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'WarmupLinear',</span> <span class="pre">warmup_steps:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">10000,</span> <span class="pre">optimizer_class:</span> <span class="pre">~typing.Type[~torch.optim.optimizer.Optimizer]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'torch.optim.adamw.AdamW'&gt;,</span> <span class="pre">optimizer_params:</span> <span class="pre">~typing.Dict[str,</span> <span class="pre">object]</span> <span class="pre">=</span> <span class="pre">{'lr':</span> <span class="pre">2e-05},</span> <span class="pre">weight_decay:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">0.01,</span> <span class="pre">evaluation_steps:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">output_path:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">save_best_model:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">max_grad_norm:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">1,</span> <span class="pre">use_amp:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">callback:</span> <span class="pre">~typing.Callable[[float,</span> <span class="pre">int,</span> <span class="pre">int],</span> <span class="pre">None]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">show_progress_bar:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">checkpoint_path:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">checkpoint_save_steps:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">500,</span> <span class="pre">checkpoint_save_total_limit:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.fit" title="Permalink to this definition"></a></dt>
<dd><p>Train the model with the given training objective
Each training objective is sampled in turn for one batch.
We sample only as many batches from each objective as there are in the smallest one
to make sure of equal training with each dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_objectives</strong>  Tuples of (DataLoader, LossFunction). Pass more than one for multi-task learning</p></li>
<li><p><strong>evaluator</strong>  An evaluator (sentence_transformers.evaluation) evaluates the model performance during training on held-out dev data. It is used to determine the best model that is saved to disc.</p></li>
<li><p><strong>epochs</strong>  Number of epochs for training</p></li>
<li><p><strong>steps_per_epoch</strong>  Number of training steps per epoch. If set to None (default), one epoch is equal the DataLoader size from train_objectives.</p></li>
<li><p><strong>scheduler</strong>  Learning rate scheduler. Available schedulers: constantlr, warmupconstant, warmuplinear, warmupcosine, warmupcosinewithhardrestarts</p></li>
<li><p><strong>warmup_steps</strong>  Behavior depends on the scheduler. For WarmupLinear (default), the learning rate is increased from o up to the maximal learning rate. After these many training steps, the learning rate is decreased linearly back to zero.</p></li>
<li><p><strong>optimizer_class</strong>  Optimizer</p></li>
<li><p><strong>optimizer_params</strong>  Optimizer parameters</p></li>
<li><p><strong>weight_decay</strong>  Weight decay for model parameters</p></li>
<li><p><strong>evaluation_steps</strong>  If &gt; 0, evaluate the model using evaluator after each number of training steps</p></li>
<li><p><strong>output_path</strong>  Storage path for the model and evaluation files</p></li>
<li><p><strong>save_best_model</strong>  If true, the best model (according to evaluator) is stored at output_path</p></li>
<li><p><strong>max_grad_norm</strong>  Used for gradient normalization.</p></li>
<li><p><strong>use_amp</strong>  Use Automatic Mixed Precision (AMP). Only for Pytorch &gt;= 1.6.0</p></li>
<li><p><strong>callback</strong>  Callback function that is invoked after each evaluation.
It must accept the following three parameters in this order:
<cite>score</cite>, <cite>epoch</cite>, <cite>steps</cite></p></li>
<li><p><strong>show_progress_bar</strong>  If True, output a tqdm progress bar</p></li>
<li><p><strong>checkpoint_path</strong>  Folder to save checkpoints during training</p></li>
<li><p><strong>checkpoint_save_steps</strong>  Will save a checkpoint after so many steps</p></li>
<li><p><strong>checkpoint_save_total_limit</strong>  Total number of checkpoints to store</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.float">
<span class="sig-name descname"><span class="pre">float</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.float" title="Permalink to this definition"></a></dt>
<dd><p>Casts all floating point parameters and buffers to <code class="docutils literal notranslate"><span class="pre">float</span></code> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.forward" title="Permalink to this definition"></a></dt>
<dd><p>Defines the computation performed at every call.</p>
<p>Should be overridden by all subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the recipe for forward pass needs to be defined within
this function, one should call the <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> instance afterwards
instead of this since the former takes care of running the
registered hooks while the latter silently ignores them.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.get_buffer">
<span class="sig-name descname"><span class="pre">get_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tensor</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Returns the buffer given by <code class="docutils literal notranslate"><span class="pre">target</span></code> if it exists,
otherwise throws an error.</p>
<p>See the docstring for <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> for a more detailed
explanation of this methods functionality as well as how to
correctly specify <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>target: The fully-qualified string name of the buffer</dt><dd><p>to look for. (See <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> for how to specify a
fully-qualified string.)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>torch.Tensor: The buffer referenced by <code class="docutils literal notranslate"><span class="pre">target</span></code></p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>AttributeError: If the target string references an invalid</dt><dd><p>path or resolves to something that is not a
buffer</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.get_extra_state">
<span class="sig-name descname"><span class="pre">get_extra_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_extra_state" title="Permalink to this definition"></a></dt>
<dd><p>Returns any extra state to include in the modules state_dict.
Implement this and a corresponding <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.set_extra_state" title="src.inference.retriever_finetune_inference.SentenceTransformer.set_extra_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_extra_state()</span></code></a> for your module
if you need to store extra state. This function is called when building the
modules <cite>state_dict()</cite>.</p>
<p>Note that extra state should be picklable to ensure working serialization
of the state_dict. We only provide provide backwards compatibility guarantees
for serializing Tensors; other objects may break backwards compatibility if
their serialized pickled form changes.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>object: Any extra state to store in the modules state_dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.get_max_seq_length">
<span class="sig-name descname"><span class="pre">get_max_seq_length</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_max_seq_length" title="Permalink to this definition"></a></dt>
<dd><p>Returns the maximal sequence length for input the model accepts. Longer inputs will be truncated</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.get_parameter">
<span class="sig-name descname"><span class="pre">get_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Parameter</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Returns the parameter given by <code class="docutils literal notranslate"><span class="pre">target</span></code> if it exists,
otherwise throws an error.</p>
<p>See the docstring for <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> for a more detailed
explanation of this methods functionality as well as how to
correctly specify <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>target: The fully-qualified string name of the Parameter</dt><dd><p>to look for. (See <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> for how to specify a
fully-qualified string.)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>torch.nn.Parameter: The Parameter referenced by <code class="docutils literal notranslate"><span class="pre">target</span></code></p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>AttributeError: If the target string references an invalid</dt><dd><p>path or resolves to something that is not an
<code class="docutils literal notranslate"><span class="pre">nn.Parameter</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.get_sentence_embedding_dimension">
<span class="sig-name descname"><span class="pre">get_sentence_embedding_dimension</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_sentence_embedding_dimension" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.get_sentence_features">
<span class="sig-name descname"><span class="pre">get_sentence_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">features</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_sentence_features" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.get_submodule">
<span class="sig-name descname"><span class="pre">get_submodule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Module</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.get_submodule" title="Permalink to this definition"></a></dt>
<dd><p>Returns the submodule given by <code class="docutils literal notranslate"><span class="pre">target</span></code> if it exists,
otherwise throws an error.</p>
<p>For example, lets say you have an <code class="docutils literal notranslate"><span class="pre">nn.Module</span></code> <code class="docutils literal notranslate"><span class="pre">A</span></code> that
looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>A(
    (net_b): Module(
        (net_c): Module(
            (conv): Conv2d(16, 33, kernel_size=(3, 3), stride=(2, 2))
        )
        (linear): Linear(in_features=100, out_features=200, bias=True)
    )
)
</pre></div>
</div>
<p>(The diagram shows an <code class="docutils literal notranslate"><span class="pre">nn.Module</span></code> <code class="docutils literal notranslate"><span class="pre">A</span></code>. <code class="docutils literal notranslate"><span class="pre">A</span></code> has a nested
submodule <code class="docutils literal notranslate"><span class="pre">net_b</span></code>, which itself has two submodules <code class="docutils literal notranslate"><span class="pre">net_c</span></code>
and <code class="docutils literal notranslate"><span class="pre">linear</span></code>. <code class="docutils literal notranslate"><span class="pre">net_c</span></code> then has a submodule <code class="docutils literal notranslate"><span class="pre">conv</span></code>.)</p>
<p>To check whether or not we have the <code class="docutils literal notranslate"><span class="pre">linear</span></code> submodule, we
would call <code class="docutils literal notranslate"><span class="pre">get_submodule(&quot;net_b.linear&quot;)</span></code>. To check whether
we have the <code class="docutils literal notranslate"><span class="pre">conv</span></code> submodule, we would call
<code class="docutils literal notranslate"><span class="pre">get_submodule(&quot;net_b.net_c.conv&quot;)</span></code>.</p>
<p>The runtime of <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> is bounded by the degree
of module nesting in <code class="docutils literal notranslate"><span class="pre">target</span></code>. A query against
<code class="docutils literal notranslate"><span class="pre">named_modules</span></code> achieves the same result, but it is O(N) in
the number of transitive modules. So, for a simple check to see
if some submodule exists, <code class="docutils literal notranslate"><span class="pre">get_submodule</span></code> should always be
used.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>target: The fully-qualified string name of the submodule</dt><dd><p>to look for. (See above example for how to specify a
fully-qualified string.)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>torch.nn.Module: The submodule referenced by <code class="docutils literal notranslate"><span class="pre">target</span></code></p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>AttributeError: If the target string references an invalid</dt><dd><p>path or resolves to something that is not an
<code class="docutils literal notranslate"><span class="pre">nn.Module</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.half">
<span class="sig-name descname"><span class="pre">half</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.half" title="Permalink to this definition"></a></dt>
<dd><p>Casts all floating point parameters and buffers to <code class="docutils literal notranslate"><span class="pre">half</span></code> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequential</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.insert" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.ipu">
<span class="sig-name descname"><span class="pre">ipu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">device</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.ipu" title="Permalink to this definition"></a></dt>
<dd><p>Moves all model parameters and buffers to the IPU.</p>
<p>This also makes associated parameters and buffers different objects. So
it should be called before constructing optimizer if the module will
live on IPU while being optimized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>device (int, optional): if specified, all parameters will be</dt><dd><p>copied to that device</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.load">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.load" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict">
<span class="sig-name descname"><span class="pre">load_state_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict" title="Permalink to this definition"></a></dt>
<dd><p>Copies parameters and buffers from <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a> into
this module and its descendants. If <code class="xref py py-attr docutils literal notranslate"><span class="pre">strict</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then
the keys of <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a> must exactly match the keys returned
by this modules <code class="xref py py-meth docutils literal notranslate"><span class="pre">state_dict()</span></code> function.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>state_dict (dict): a dict containing parameters and</dt><dd><p>persistent buffers.</p>
</dd>
<dt>strict (bool, optional): whether to strictly enforce that the keys</dt><dd><p>in <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a> match the keys returned by this modules
<code class="xref py py-meth docutils literal notranslate"><span class="pre">state_dict()</span></code> function. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">NamedTuple</span></code> with <code class="docutils literal notranslate"><span class="pre">missing_keys</span></code> and <code class="docutils literal notranslate"><span class="pre">unexpected_keys</span></code> fields:</dt><dd><ul class="simple">
<li><p><strong>missing_keys</strong> is a list of str containing the missing keys</p></li>
<li><p><strong>unexpected_keys</strong> is a list of str containing the unexpected keys</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><p>If a parameter or buffer is registered as <code class="docutils literal notranslate"><span class="pre">None</span></code> and its corresponding key
exists in <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>, <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_state_dict()</span></code></a> will raise a
<code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.max_seq_length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_seq_length</span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.max_seq_length" title="Permalink to this definition"></a></dt>
<dd><p>Property to get the maximal input sequence length for the model. Longer inputs will be truncated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.modules">
<span class="sig-name descname"><span class="pre">modules</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.modules" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over all modules in the network.</p>
<dl class="simple">
<dt>Yields:</dt><dd><p>Module: a module in the network</p>
</dd>
<dt>Note:</dt><dd><p>Duplicate modules are returned only once. In the following
example, <code class="docutils literal notranslate"><span class="pre">l</span></code> will be returned only once.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">net</span><span class="o">.</span><span class="n">modules</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

<span class="go">0 -&gt; Sequential(</span>
<span class="go">  (0): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">  (1): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">)</span>
<span class="go">1 -&gt; Linear(in_features=2, out_features=2, bias=True)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.named_buffers">
<span class="sig-name descname"><span class="pre">named_buffers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_duplicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.named_buffers" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over module buffers, yielding both the
name of the buffer as well as the buffer itself.</p>
<dl>
<dt>Args:</dt><dd><p>prefix (str): prefix to prepend to all buffer names.
recurse (bool, optional): if True, then yields buffers of this module</p>
<blockquote>
<div><p>and all submodules. Otherwise, yields only buffers that
are direct members of this module. Defaults to True.</p>
</div></blockquote>
<p>remove_duplicate (bool, optional): whether to remove the duplicated buffers in the result. Defaults to True.</p>
</dd>
<dt>Yields:</dt><dd><p>(str, torch.Tensor): Tuple containing the name and buffer</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">buf</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">named_buffers</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;running_var&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">buf</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.named_children">
<span class="sig-name descname"><span class="pre">named_children</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.named_children" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over immediate children modules, yielding both
the name of the module as well as the module itself.</p>
<dl class="simple">
<dt>Yields:</dt><dd><p>(str, Module): Tuple containing a name and child module</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">named_children</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;conv4&#39;</span><span class="p">,</span> <span class="s1">&#39;conv5&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.named_modules">
<span class="sig-name descname"><span class="pre">named_modules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_duplicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.named_modules" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over all modules in the network, yielding
both the name of the module as well as the module itself.</p>
<dl>
<dt>Args:</dt><dd><p>memo: a memo to store the set of modules already added to the result
prefix: a prefix that will be added to the name of the module
remove_duplicate: whether to remove the duplicated module instances in the result</p>
<blockquote>
<div><p>or not</p>
</div></blockquote>
</dd>
<dt>Yields:</dt><dd><p>(str, Module): Tuple of name and module</p>
</dd>
<dt>Note:</dt><dd><p>Duplicate modules are returned only once. In the following
example, <code class="docutils literal notranslate"><span class="pre">l</span></code> will be returned only once.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">net</span><span class="o">.</span><span class="n">named_modules</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

<span class="go">0 -&gt; (&#39;&#39;, Sequential(</span>
<span class="go">  (0): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">  (1): Linear(in_features=2, out_features=2, bias=True)</span>
<span class="go">))</span>
<span class="go">1 -&gt; (&#39;0&#39;, Linear(in_features=2, out_features=2, bias=True))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.named_parameters">
<span class="sig-name descname"><span class="pre">named_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_duplicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Parameter</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.named_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over module parameters, yielding both the
name of the parameter as well as the parameter itself.</p>
<dl>
<dt>Args:</dt><dd><p>prefix (str): prefix to prepend to all parameter names.
recurse (bool): if True, then yields parameters of this module</p>
<blockquote>
<div><p>and all submodules. Otherwise, yields only parameters that
are direct members of this module.</p>
</div></blockquote>
<dl class="simple">
<dt>remove_duplicate (bool, optional): whether to remove the duplicated</dt><dd><p>parameters in the result. Defaults to True.</p>
</dd>
</dl>
</dd>
<dt>Yields:</dt><dd><p>(str, Parameter): Tuple containing the name and parameter</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">named_parameters</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;bias&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.parameters">
<span class="sig-name descname"><span class="pre">parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Parameter</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.parameters" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterator over module parameters.</p>
<p>This is typically passed to an optimizer.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>recurse (bool): if True, then yields parameters of this module</dt><dd><p>and all submodules. Otherwise, yields only parameters that
are direct members of this module.</p>
</dd>
</dl>
</dd>
<dt>Yields:</dt><dd><p>Parameter: module parameter</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">),</span> <span class="n">param</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
<span class="go">&lt;class &#39;torch.Tensor&#39;&gt; (20L,)</span>
<span class="go">&lt;class &#39;torch.Tensor&#39;&gt; (20L, 1L, 5L, 5L)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">slice</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Module</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.pop" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_backward_hook">
<span class="sig-name descname"><span class="pre">register_backward_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_backward_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a backward hook on the module.</p>
<p>This function is deprecated in favor of <code class="xref py py-meth docutils literal notranslate"><span class="pre">register_full_backward_hook()</span></code> and
the behavior of this function will change in future versions.</p>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_buffer">
<span class="sig-name descname"><span class="pre">register_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Adds a buffer to the module.</p>
<p>This is typically used to register a buffer that should not to be
considered a model parameter. For example, BatchNorms <code class="docutils literal notranslate"><span class="pre">running_mean</span></code>
is not a parameter, but is part of the modules state. Buffers, by
default, are persistent and will be saved alongside parameters. This
behavior can be changed by setting <code class="xref py py-attr docutils literal notranslate"><span class="pre">persistent</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>. The
only difference between a persistent buffer and a non-persistent buffer
is that the latter will not be a part of this modules
<a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>.</p>
<p>Buffers can be accessed as attributes using given names.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>name (str): name of the buffer. The buffer can be accessed</dt><dd><p>from this module using the given name</p>
</dd>
<dt>tensor (Tensor or None): buffer to be registered. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, then operations</dt><dd><p>that run on buffers, such as <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.cuda" title="src.inference.retriever_finetune_inference.SentenceTransformer.cuda"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cuda</span></code></a>, are ignored. If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the buffer is <strong>not</strong> included in the modules <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>.</p>
</dd>
<dt>persistent (bool): whether the buffer is part of this modules</dt><dd><p><a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>.</p>
</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">register_buffer</span><span class="p">(</span><span class="s1">&#39;running_mean&#39;</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_features</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_forward_hook">
<span class="sig-name descname"><span class="pre">register_forward_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_forward_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a forward hook on the module.</p>
<p>The hook will be called every time after <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.forward" title="src.inference.retriever_finetune_inference.SentenceTransformer.forward"><code class="xref py py-func docutils literal notranslate"><span class="pre">forward()</span></code></a> has computed an output.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">with_kwargs</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> or not specified, the input contains only
the positional arguments given to the module. Keyword arguments wont be
passed to the hooks and only to the <code class="docutils literal notranslate"><span class="pre">forward</span></code>. The hook can modify the
output. It can modify the input inplace but it will not have effect on
forward since this is called after <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.forward" title="src.inference.retriever_finetune_inference.SentenceTransformer.forward"><code class="xref py py-func docutils literal notranslate"><span class="pre">forward()</span></code></a> is called. The hook
should have the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">modified</span> <span class="n">output</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">with_kwargs</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the forward hook will be passed the
<code class="docutils literal notranslate"><span class="pre">kwargs</span></code> given to the forward function and be expected to return the
output possibly modified. The hook should have the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">modified</span> <span class="n">output</span>
</pre></div>
</div>
<dl>
<dt>Args:</dt><dd><p>hook (Callable): The user defined hook to be registered.
prepend (bool): If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the provided <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired</p>
<blockquote>
<div><p>before all existing <code class="docutils literal notranslate"><span class="pre">forward</span></code> hooks on this
<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Otherwise, the provided
<code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired after all existing <code class="docutils literal notranslate"><span class="pre">forward</span></code> hooks on
this <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Note that global
<code class="docutils literal notranslate"><span class="pre">forward</span></code> hooks registered with
<code class="xref py py-func docutils literal notranslate"><span class="pre">register_module_forward_hook()</span></code> will fire before all hooks
registered by this method.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</div></blockquote>
<dl class="simple">
<dt>with_kwargs (bool): If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be passed the</dt><dd><p>kwargs given to the forward function.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_forward_pre_hook">
<span class="sig-name descname"><span class="pre">register_forward_pre_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_forward_pre_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a forward pre-hook on the module.</p>
<p>The hook will be called every time before <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.forward" title="src.inference.retriever_finetune_inference.SentenceTransformer.forward"><code class="xref py py-func docutils literal notranslate"><span class="pre">forward()</span></code></a> is invoked.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">with_kwargs</span></code> is false or not specified, the input contains only
the positional arguments given to the module. Keyword arguments wont be
passed to the hooks and only to the <code class="docutils literal notranslate"><span class="pre">forward</span></code>. The hook can modify the
input. User can either return a tuple or a single modified value in the
hook. We will wrap the value into a tuple if a single value is returned
(unless that value is already a tuple). The hook should have the
following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">modified</span> <span class="nb">input</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">with_kwargs</span></code> is true, the forward pre-hook will be passed the
kwargs given to the forward function. And if the hook modifies the
input, both the args and kwargs should be returned. The hook should have
the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">a</span> <span class="nb">tuple</span> <span class="n">of</span> <span class="n">modified</span> <span class="nb">input</span> <span class="ow">and</span> <span class="n">kwargs</span>
</pre></div>
</div>
<dl>
<dt>Args:</dt><dd><p>hook (Callable): The user defined hook to be registered.
prepend (bool): If true, the provided <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired before</p>
<blockquote>
<div><p>all existing <code class="docutils literal notranslate"><span class="pre">forward_pre</span></code> hooks on this
<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Otherwise, the provided
<code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired after all existing <code class="docutils literal notranslate"><span class="pre">forward_pre</span></code> hooks
on this <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Note that global
<code class="docutils literal notranslate"><span class="pre">forward_pre</span></code> hooks registered with
<code class="xref py py-func docutils literal notranslate"><span class="pre">register_module_forward_pre_hook()</span></code> will fire before all
hooks registered by this method.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</div></blockquote>
<dl class="simple">
<dt>with_kwargs (bool): If true, the <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be passed the kwargs</dt><dd><p>given to the forward function.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_full_backward_hook">
<span class="sig-name descname"><span class="pre">register_full_backward_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_full_backward_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a backward hook on the module.</p>
<p>The hook will be called every time the gradients with respect to a module
are computed, i.e. the hook will execute if and only if the gradients with
respect to module outputs are computed. The hook should have the following
signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">grad_input</span><span class="p">,</span> <span class="n">grad_output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">Tensor</span><span class="p">)</span> <span class="ow">or</span> <span class="kc">None</span>
</pre></div>
</div>
<p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_input</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> are tuples that contain the gradients
with respect to the inputs and outputs respectively. The hook should
not modify its arguments, but it can optionally return a new gradient with
respect to the input that will be used in place of <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_input</span></code> in
subsequent computations. <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_input</span></code> will only correspond to the inputs given
as positional arguments and all kwarg arguments are ignored. Entries
in <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_input</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> will be <code class="docutils literal notranslate"><span class="pre">None</span></code> for all non-Tensor
arguments.</p>
<p>For technical reasons, when this hook is applied to a Module, its forward function will
receive a view of each Tensor passed to the Module. Similarly the caller will receive a view
of each Tensor returned by the Modules forward function.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Modifying inputs or outputs inplace is not allowed when using backward hooks and
will raise an error.</p>
</div>
<dl>
<dt>Args:</dt><dd><p>hook (Callable): The user-defined hook to be registered.
prepend (bool): If true, the provided <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired before</p>
<blockquote>
<div><p>all existing <code class="docutils literal notranslate"><span class="pre">backward</span></code> hooks on this
<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Otherwise, the provided
<code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired after all existing <code class="docutils literal notranslate"><span class="pre">backward</span></code> hooks on
this <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Note that global
<code class="docutils literal notranslate"><span class="pre">backward</span></code> hooks registered with
<code class="xref py py-func docutils literal notranslate"><span class="pre">register_module_full_backward_hook()</span></code> will fire before
all hooks registered by this method.</p>
</div></blockquote>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_full_backward_pre_hook">
<span class="sig-name descname"><span class="pre">register_full_backward_pre_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RemovableHandle</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_full_backward_pre_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a backward pre-hook on the module.</p>
<p>The hook will be called every time the gradients for the module are computed.
The hook should have the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">grad_output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tensor</span> <span class="ow">or</span> <span class="kc">None</span>
</pre></div>
</div>
<p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> is a tuple. The hook should
not modify its arguments, but it can optionally return a new gradient with
respect to the output that will be used in place of <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> in
subsequent computations. Entries in <code class="xref py py-attr docutils literal notranslate"><span class="pre">grad_output</span></code> will be <code class="docutils literal notranslate"><span class="pre">None</span></code> for
all non-Tensor arguments.</p>
<p>For technical reasons, when this hook is applied to a Module, its forward function will
receive a view of each Tensor passed to the Module. Similarly the caller will receive a view
of each Tensor returned by the Modules forward function.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Modifying inputs inplace is not allowed when using backward hooks and
will raise an error.</p>
</div>
<dl>
<dt>Args:</dt><dd><p>hook (Callable): The user-defined hook to be registered.
prepend (bool): If true, the provided <code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired before</p>
<blockquote>
<div><p>all existing <code class="docutils literal notranslate"><span class="pre">backward_pre</span></code> hooks on this
<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Otherwise, the provided
<code class="docutils literal notranslate"><span class="pre">hook</span></code> will be fired after all existing <code class="docutils literal notranslate"><span class="pre">backward_pre</span></code> hooks
on this <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.Module</span></code>. Note that global
<code class="docutils literal notranslate"><span class="pre">backward_pre</span></code> hooks registered with
<code class="xref py py-func docutils literal notranslate"><span class="pre">register_module_full_backward_pre_hook()</span></code> will fire before
all hooks registered by this method.</p>
</div></blockquote>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_load_state_dict_post_hook">
<span class="sig-name descname"><span class="pre">register_load_state_dict_post_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_load_state_dict_post_hook" title="Permalink to this definition"></a></dt>
<dd><p>Registers a post hook to be run after modules <code class="docutils literal notranslate"><span class="pre">load_state_dict</span></code>
is called.</p>
<dl class="simple">
<dt>It should have the following signature::</dt><dd><p>hook(module, incompatible_keys) -&gt; None</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">module</span></code> argument is the current module that this hook is registered
on, and the <code class="docutils literal notranslate"><span class="pre">incompatible_keys</span></code> argument is a <code class="docutils literal notranslate"><span class="pre">NamedTuple</span></code> consisting
of attributes <code class="docutils literal notranslate"><span class="pre">missing_keys</span></code> and <code class="docutils literal notranslate"><span class="pre">unexpected_keys</span></code>. <code class="docutils literal notranslate"><span class="pre">missing_keys</span></code>
is a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">str</span></code> containing the missing keys and
<code class="docutils literal notranslate"><span class="pre">unexpected_keys</span></code> is a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">str</span></code> containing the unexpected keys.</p>
<p>The given incompatible_keys can be modified inplace if needed.</p>
<p>Note that the checks performed when calling <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_state_dict()</span></code></a> with
<code class="docutils literal notranslate"><span class="pre">strict=True</span></code> are affected by modifications the hook makes to
<code class="docutils literal notranslate"><span class="pre">missing_keys</span></code> or <code class="docutils literal notranslate"><span class="pre">unexpected_keys</span></code>, as expected. Additions to either
set of keys will result in an error being thrown when <code class="docutils literal notranslate"><span class="pre">strict=True</span></code>, and
clearing out both missing and unexpected keys will avoid an error.</p>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.hooks.RemovableHandle</span></code>:</dt><dd><p>a handle that can be used to remove the added hook by calling
<code class="docutils literal notranslate"><span class="pre">handle.remove()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_module">
<span class="sig-name descname"><span class="pre">register_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_module" title="Permalink to this definition"></a></dt>
<dd><p>Alias for <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.add_module" title="src.inference.retriever_finetune_inference.SentenceTransformer.add_module"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_module()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_parameter">
<span class="sig-name descname"><span class="pre">register_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Parameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Adds a parameter to the module.</p>
<p>The parameter can be accessed as an attribute using given name.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>name (str): name of the parameter. The parameter can be accessed</dt><dd><p>from this module using the given name</p>
</dd>
<dt>param (Parameter or None): parameter to be added to the module. If</dt><dd><p><code class="docutils literal notranslate"><span class="pre">None</span></code>, then operations that run on parameters, such as <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.cuda" title="src.inference.retriever_finetune_inference.SentenceTransformer.cuda"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cuda</span></code></a>,
are ignored. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the parameter is <strong>not</strong> included in the
modules <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state_dict</span></code></a>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.register_state_dict_pre_hook">
<span class="sig-name descname"><span class="pre">register_state_dict_pre_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hook</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.register_state_dict_pre_hook" title="Permalink to this definition"></a></dt>
<dd><p>These hooks will be called with arguments: <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">prefix</span></code>,
and <code class="docutils literal notranslate"><span class="pre">keep_vars</span></code> before calling <code class="docutils literal notranslate"><span class="pre">state_dict</span></code> on <code class="docutils literal notranslate"><span class="pre">self</span></code>. The registered
hooks can be used to perform pre-processing before the <code class="docutils literal notranslate"><span class="pre">state_dict</span></code>
call is made.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.requires_grad_">
<span class="sig-name descname"><span class="pre">requires_grad_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requires_grad</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.requires_grad_" title="Permalink to this definition"></a></dt>
<dd><p>Change if autograd should record operations on parameters in this
module.</p>
<p>This method sets the parameters <code class="xref py py-attr docutils literal notranslate"><span class="pre">requires_grad</span></code> attributes
in-place.</p>
<p>This method is helpful for freezing part of the module for finetuning
or training parts of a model individually (e.g., GAN training).</p>
<p>See <span class="xref std std-ref">locally-disable-grad-doc</span> for a comparison between
<cite>.requires_grad_()</cite> and several similar mechanisms that may be confused with it.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>requires_grad (bool): whether autograd should record operations on</dt><dd><p>parameters in this module. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_model_card</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_datasets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.save" title="Permalink to this definition"></a></dt>
<dd><p>Saves all elements for this seq. sentence embedder into different sub-folders
:param path: Path on disc
:param model_name: Optional model name
:param create_model_card: If True, create a README.md with basic information about this model
:param train_datasets: Optional list with the names of the datasets used to to train the model</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.save_to_hub">
<span class="sig-name descname"><span class="pre">save_to_hub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">private</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Add</span> <span class="pre">new</span> <span class="pre">SentenceTransformer</span> <span class="pre">model.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_model_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_model_card</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_datasets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.save_to_hub" title="Permalink to this definition"></a></dt>
<dd><p>Uploads all elements of this Sentence Transformer to a new HuggingFace Hub repository.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repo_name</strong>  Repository name for your model in the Hub.</p></li>
<li><p><strong>organization</strong>  Organization in which you want to push your model or tokenizer (you must be a member of this organization).</p></li>
<li><p><strong>private</strong>  Set to true, for hosting a prive model</p></li>
<li><p><strong>commit_message</strong>  Message to commit while pushing.</p></li>
<li><p><strong>local_model_path</strong>  Path of the model locally. If set, this file path will be uploaded. Otherwise, the current model will be uploaded</p></li>
<li><p><strong>exist_ok</strong>  If true, saving to an existing repository is OK. If false, saving only to a new repository is possible</p></li>
<li><p><strong>replace_model_card</strong>  If true, replace an existing model card in the hub with the automatically created model card</p></li>
<li><p><strong>train_datasets</strong>  Datasets used to train the model. If set, the datasets will be added to the model card in the Hub.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The url of the commit of your model in the given repository.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.set_extra_state">
<span class="sig-name descname"><span class="pre">set_extra_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.set_extra_state" title="Permalink to this definition"></a></dt>
<dd><p>This function is called from <a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict" title="src.inference.retriever_finetune_inference.SentenceTransformer.load_state_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_state_dict()</span></code></a> to handle any extra state
found within the <cite>state_dict</cite>. Implement this function and a corresponding
<a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.get_extra_state" title="src.inference.retriever_finetune_inference.SentenceTransformer.get_extra_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_extra_state()</span></code></a> for your module if you need to store extra state within its
<cite>state_dict</cite>.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>state (dict): Extra state from the <cite>state_dict</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.share_memory">
<span class="sig-name descname"><span class="pre">share_memory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.share_memory" title="Permalink to this definition"></a></dt>
<dd><p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.Tensor.share_memory_()</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.smart_batching_collate">
<span class="sig-name descname"><span class="pre">smart_batching_collate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.smart_batching_collate" title="Permalink to this definition"></a></dt>
<dd><p>Transforms a batch from a SmartBatchingDataset to a batch of tensors for the model
Here, batch is a list of tuples: [(tokens, label), ]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>batch</strong>  a batch from a SmartBatchingDataset</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a batch of tensors for the model</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.start_multi_process_pool">
<span class="sig-name descname"><span class="pre">start_multi_process_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_devices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.start_multi_process_pool" title="Permalink to this definition"></a></dt>
<dd><p>Starts multi process to process the encoding with several, independent processes.
This method is recommended if you want to encode on multiple GPUs. It is advised
to start only one process per GPU. This method works together with encode_multi_process</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>target_devices</strong>  PyTorch target devices, e.g. cuda:0, cuda:1 If None, all available CUDA devices will be used</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns a dict with the target processes, an input queue and and output queue.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.state_dict">
<span class="sig-name descname"><span class="pre">state_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.state_dict" title="Permalink to this definition"></a></dt>
<dd><p>Returns a dictionary containing references to the whole state of the module.</p>
<p>Both parameters and persistent buffers (e.g. running averages) are
included. Keys are corresponding parameter and buffer names.
Parameters and buffers set to <code class="docutils literal notranslate"><span class="pre">None</span></code> are not included.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned object is a shallow copy. It contains references
to the modules parameters and buffers.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently <code class="docutils literal notranslate"><span class="pre">state_dict()</span></code> also accepts positional arguments for
<code class="docutils literal notranslate"><span class="pre">destination</span></code>, <code class="docutils literal notranslate"><span class="pre">prefix</span></code> and <code class="docutils literal notranslate"><span class="pre">keep_vars</span></code> in order. However,
this is being deprecated and keyword arguments will be enforced in
future releases.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please avoid the use of argument <code class="docutils literal notranslate"><span class="pre">destination</span></code> as it is not
designed for end-users.</p>
</div>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>destination (dict, optional): If provided, the state of module will</dt><dd><p>be updated into the dict and the same object is returned.
Otherwise, an <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> will be created and returned.
Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt>prefix (str, optional): a prefix added to parameter and buffer</dt><dd><p>names to compose the keys in state_dict. Default: <code class="docutils literal notranslate"><span class="pre">''</span></code>.</p>
</dd>
<dt>keep_vars (bool, optional): by default the <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code> s</dt><dd><p>returned in the state dict are detached from autograd. If its
set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, detaching will not be performed.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>dict:</dt><dd><p>a dictionary containing a whole state of the module</p>
</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +SKIP(&quot;undefined vars&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">module</span><span class="o">.</span><span class="n">state_dict</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;bias&#39;, &#39;weight&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.stop_multi_process_pool">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stop_multi_process_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pool</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.stop_multi_process_pool" title="Permalink to this definition"></a></dt>
<dd><p>Stops all processes started with start_multi_process_pool</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.to">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.to" title="Permalink to this definition"></a></dt>
<dd><p>Moves and/or casts the parameters and buffers.</p>
<p>This can be called as</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">non_blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">non_blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">non_blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memory_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.channels_last</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>Its signature is similar to <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.Tensor.to()</span></code>, but only accepts
floating point or complex <code class="xref py py-attr docutils literal notranslate"><span class="pre">dtype</span></code>s. In addition, this method will
only cast the floating point or complex parameters and buffers to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dtype</span></code>
(if given). The integral parameters and buffers will be moved
<a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.SentenceTransformer.device" title="src.inference.retriever_finetune_inference.SentenceTransformer.device"><code class="xref py py-attr docutils literal notranslate"><span class="pre">device</span></code></a>, if that is given, but with dtypes unchanged. When
<code class="xref py py-attr docutils literal notranslate"><span class="pre">non_blocking</span></code> is set, it tries to convert/move asynchronously
with respect to the host if possible, e.g., moving CPU Tensors with
pinned memory to CUDA devices.</p>
<p>See below for examples.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>device (<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.device</span></code>): the desired device of the parameters</dt><dd><p>and buffers in this module</p>
</dd>
<dt>dtype (<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.dtype</span></code>): the desired floating point or complex dtype of</dt><dd><p>the parameters and buffers in this module</p>
</dd>
<dt>tensor (torch.Tensor): Tensor whose dtype and device are the desired</dt><dd><p>dtype and device for all parameters and buffers in this module</p>
</dd>
<dt>memory_format (<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.memory_format</span></code>): the desired memory</dt><dd><p>format for 4D parameters and buffers in this module (keyword
only argument)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +IGNORE_WANT(&quot;non-deterministic&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.1913, -0.3420],</span>
<span class="go">        [-0.5113, -0.2325]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">double</span><span class="p">)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.1913, -0.3420],</span>
<span class="go">        [-0.5113, -0.2325]], dtype=torch.float64)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(env:TORCH_DOCTEST_CUDA1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gpu1</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda:1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">gpu1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">half</span><span class="p">,</span> <span class="n">non_blocking</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.1914, -0.3420],</span>
<span class="go">        [-0.5112, -0.2324]], dtype=torch.float16, device=&#39;cuda:1&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cpu</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
<span class="go">Linear(in_features=2, out_features=2, bias=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.1914, -0.3420],</span>
<span class="go">        [-0.5112, -0.2324]], dtype=torch.float16)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">cdouble</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="o">.</span><span class="n">weight</span>
<span class="go">Parameter containing:</span>
<span class="go">tensor([[ 0.3741+0.j,  0.2382+0.j],</span>
<span class="go">        [ 0.5593+0.j, -0.4443+0.j]], dtype=torch.complex128)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linear</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">cdouble</span><span class="p">))</span>
<span class="go">tensor([[0.6122+0.j, 0.1150+0.j],</span>
<span class="go">        [0.6122+0.j, 0.1150+0.j],</span>
<span class="go">        [0.6122+0.j, 0.1150+0.j]], dtype=torch.complex128)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.to_empty">
<span class="sig-name descname"><span class="pre">to_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">device</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.to_empty" title="Permalink to this definition"></a></dt>
<dd><p>Moves the parameters and buffers to the specified device without copying storage.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>device (<code class="xref py py-class docutils literal notranslate"><span class="pre">torch.device</span></code>): The desired device of the parameters</dt><dd><p>and buffers in this module.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.tokenize">
<span class="sig-name descname"><span class="pre">tokenize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.tokenize" title="Permalink to this definition"></a></dt>
<dd><p>Tokenizes the texts</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.tokenizer">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tokenizer</span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.tokenizer" title="Permalink to this definition"></a></dt>
<dd><p>Property to get the tokenizer that is used by this model</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.train" title="Permalink to this definition"></a></dt>
<dd><p>Sets the module in training mode.</p>
<p>This has any effect only on certain modules. See documentations of
particular modules for details of their behaviors in training/evaluation
mode, if they are affected, e.g. <code class="xref py py-class docutils literal notranslate"><span class="pre">Dropout</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BatchNorm</span></code>,
etc.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>mode (bool): whether to set training mode (<code class="docutils literal notranslate"><span class="pre">True</span></code>) or evaluation</dt><dd><p>mode (<code class="docutils literal notranslate"><span class="pre">False</span></code>). Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.training">
<span class="sig-name descname"><span class="pre">training</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.training" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.type">
<span class="sig-name descname"><span class="pre">type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.type" title="Permalink to this definition"></a></dt>
<dd><p>Casts all parameters and buffers to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dst_type</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Args:</dt><dd><p>dst_type (type or string): the desired type</p>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.xpu">
<span class="sig-name descname"><span class="pre">xpu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">device</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.xpu" title="Permalink to this definition"></a></dt>
<dd><p>Moves all model parameters and buffers to the XPU.</p>
<p>This also makes associated parameters and buffers different objects. So
it should be called before constructing optimizer if the module will
live on XPU while being optimized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method modifies the module in-place.</p>
</div>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>device (int, optional): if specified, all parameters will be</dt><dd><p>copied to that device</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>Module: self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.SentenceTransformer.zero_grad">
<span class="sig-name descname"><span class="pre">zero_grad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_to_none</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.SentenceTransformer.zero_grad" title="Permalink to this definition"></a></dt>
<dd><p>Sets gradients of all model parameters to zero. See similar function
under <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.optim.Optimizer</span></code> for more context.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>set_to_none (bool): instead of setting to zero, set the grads to None.</dt><dd><p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.optim.Optimizer.zero_grad()</span></code> for details.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.ToolRetriever">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">ToolRetriever</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">LIB</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corpus_tsv_path=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_path=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_corpus_tsv_path='./data/standard_process/base/retriever_train_data/corpus.tsv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_base=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle_data=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">process_func=&lt;function</span> <span class="pre">process_retrieval_document_query_version&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_seq_length=256</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.ToolRetriever" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.ToolRetriever.build_and_merge_corpus">
<span class="sig-name descname"><span class="pre">build_and_merge_corpus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">add_base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.ToolRetriever.build_and_merge_corpus" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.ToolRetriever.build_shuffle_data">
<span class="sig-name descname"><span class="pre">build_shuffle_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">LIB</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.ToolRetriever.build_shuffle_data" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.ToolRetriever.retrieve_similar_queries">
<span class="sig-name descname"><span class="pre">retrieve_similar_queries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.ToolRetriever.retrieve_similar_queries" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.ToolRetriever.retrieving">
<span class="sig-name descname"><span class="pre">retrieving</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.ToolRetriever.retrieving" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.compute_accuracy">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">compute_accuracy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">retriever</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.ToolRetriever" title="src.inference.retriever_finetune_inference.ToolRetriever"><span class="pre">ToolRetriever</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Namespace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LIB_ALIAS</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'scanpy'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.compute_accuracy" title="Permalink to this definition"></a></dt>
<dd><p>Computes the accuracy of the retrieval based on the given data and the retrievers responses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>retriever</strong> (<a class="reference internal" href="src.inference.retriever_finetune_inference.html#src.inference.retriever_finetune_inference.ToolRetriever" title="src.inference.retriever_finetune_inference.ToolRetriever"><em>ToolRetriever</em></a>)  The retrieval tool to use for finding similar APIs.</p></li>
<li><p><strong>data</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>)  The dataset containing queries and their corresponding true APIs.</p></li>
<li><p><strong>args</strong> (<em>argparse.Namespace</em>)  The command line arguments passed to the script.</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>)  The name of the dataset (e.g., train, test, or val). Default is train.</p></li>
<li><p><strong>LIB_ALIAS</strong> (<em>str</em><em>, </em><em>optional</em>)  The library alias to filter APIs by, default is scanpy.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing:
- Accuracy as a percentage of correct predictions.
- Dictionary with lists of scores for ranks 1 through 5.
- Ambiguous accuracy as a percentage of correct predictions considering ambiguous matches.
- The count of total non-ambiguous API matches.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[float, Dict[str, List[float]], float, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.compute_accuracy_filter_compositeAPI">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">compute_accuracy_filter_compositeAPI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">retriever</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LIB_ALIAS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'scanpy'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.compute_accuracy_filter_compositeAPI" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.compute_and_plot">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">compute_and_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retriever</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LIB_ALIAS</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.compute_and_plot" title="Permalink to this definition"></a></dt>
<dd><p>Compute scores, visualize</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.find_similar_two_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">find_similar_two_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">API_init_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./data/standard_process/scanpy/API_init.json'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.find_similar_two_pairs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.get_all_variable_from_cheatsheet">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">get_all_variable_from_cheatsheet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">LIB</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.get_all_variable_from_cheatsheet" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.is_pair_in_merged_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">is_pair_in_merged_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merged_pairs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.is_pair_in_merged_pairs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.load_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">load_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.load_json" title="Permalink to this definition"></a></dt>
<dd><p>Load JSON data from a specified file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>)  The path to the JSON file to be loaded.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The data loaded from the JSON file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.plot_boxplot">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">plot_boxplot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.plot_boxplot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.process_retrieval_document_query_version">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">process_retrieval_document_query_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.process_retrieval_document_query_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.save_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">save_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.save_json" title="Permalink to this definition"></a></dt>
<dd><p>Save results to a JSON file with indentation of 4 spaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_path</strong> (<em>str</em>)  Path to the output file.</p></li>
<li><p><strong>results</strong> (<em>dict</em>)  Dictionary containing the results to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">save_json</span><span class="p">(</span><span class="s1">&#39;output.json&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.retriever_finetune_inference.</span></span><span class="sig-name descname"><span class="pre">tqdm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">__</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Comparable</span></code></p>
<p>Decorate an iterable object, returning an iterator which acts exactly
like the original iterable, but prints a dynamically updating
progressbar every time a value is requested.</p>
<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nolock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.clear" title="Permalink to this definition"></a></dt>
<dd><p>Clear current bar display.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.close" title="Permalink to this definition"></a></dt>
<dd><p>Cleanup and (if leave=False) close the progressbar.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.display">
<span class="sig-name descname"><span class="pre">display</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.display" title="Permalink to this definition"></a></dt>
<dd><p>Use <cite>self.sp</cite> to display <cite>msg</cite> in the specified <cite>pos</cite>.</p>
<p>Consider overloading this function when inheriting to use e.g.:
<cite>self.some_frontend(**self.format_dict)</cite> instead of <cite>self.sp</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> (str, optional. What to display (default: <cite>repr(self)</cite>).)  </p></li>
<li><p><strong>pos</strong> (int, optional. Position to <cite>moveto</cite>)  (default: <cite>abs(self.pos)</cite>).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.external_write_mode">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">external_write_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nolock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.external_write_mode" title="Permalink to this definition"></a></dt>
<dd><p>Disable tqdm within context and refresh tqdm when exits.
Useful when writing to standard output stream</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.format_dict">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_dict</span></span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.format_dict" title="Permalink to this definition"></a></dt>
<dd><p>Public API for read-only member access.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.format_interval">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_interval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.format_interval" title="Permalink to this definition"></a></dt>
<dd><p>Formats a number of seconds as a clock time, [H:]MM:SS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>int</em>)  Number of seconds.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong>  [H:]MM:SS</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.format_meter">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_meter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elapsed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ascii</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'it'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_divisor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colour</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.format_meter" title="Permalink to this definition"></a></dt>
<dd><p>Return a string-based progress bar given some parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<em>int</em><em> or </em><em>float</em>)  Number of finished iterations.</p></li>
<li><p><strong>total</strong> (<em>int</em><em> or </em><em>float</em>)  The expected total number of iterations. If meaningless (None),
only basic progress statistics are displayed (no ETA).</p></li>
<li><p><strong>elapsed</strong> (<em>float</em>)  Number of seconds passed since start.</p></li>
<li><p><strong>ncols</strong> (<em>int</em><em>, </em><em>optional</em>)  The width of the entire output message. If specified,
dynamically resizes <cite>{bar}</cite> to stay within this bound
[default: None]. If <cite>0</cite>, will not print any bar (only stats).
The fallback is <cite>{bar:10}</cite>.</p></li>
<li><p><strong>prefix</strong> (<em>str</em><em>, </em><em>optional</em>)  Prefix message (included in total width) [default: ].
Use as {desc} in bar_format string.</p></li>
<li><p><strong>ascii</strong> (<em>bool</em><em>, </em><em>optional</em><em> or </em><em>str</em><em>, </em><em>optional</em>)  If not set, use unicode (smooth blocks) to fill the meter
[default: False]. The fallback is to use ASCII characters
 123456789#.</p></li>
<li><p><strong>unit</strong> (<em>str</em><em>, </em><em>optional</em>)  The iteration unit [default: it].</p></li>
<li><p><strong>unit_scale</strong> (<em>bool</em><em> or </em><em>int</em><em> or </em><em>float</em><em>, </em><em>optional</em>)  If 1 or True, the number of iterations will be printed with an
appropriate SI metric prefix (k = 10^3, M = 10^6, etc.)
[default: False]. If any other non-zero number, will scale
<cite>total</cite> and <cite>n</cite>.</p></li>
<li><p><strong>rate</strong> (<em>float</em><em>, </em><em>optional</em>)  Manual override for iteration rate.
If [default: None], uses n/elapsed.</p></li>
<li><p><strong>bar_format</strong> (<em>str</em><em>, </em><em>optional</em>)  <p>Specify a custom bar string formatting. May impact performance.
[default: {l_bar}{bar}{r_bar}], where
l_bar={desc}: {percentage:3.0f}%| and
r_bar=| {n_fmt}/{total_fmt} [{elapsed}&lt;{remaining}, </p>
<blockquote>
<div><p>{rate_fmt}{postfix}]</p>
</div></blockquote>
<dl class="simple">
<dt>Possible vars: l_bar, bar, r_bar, n, n_fmt, total, total_fmt,</dt><dd><p>percentage, elapsed, elapsed_s, ncols, nrows, desc, unit,
rate, rate_fmt, rate_noinv, rate_noinv_fmt,
rate_inv, rate_inv_fmt, postfix, unit_divisor,
remaining, remaining_s, eta.</p>
</dd>
</dl>
<p>Note that a trailing :  is automatically removed after {desc}
if the latter is empty.</p>
</p></li>
<li><p><strong>postfix</strong> (<a href="#id8"><span class="problematic" id="id9">*</span></a>, optional)  Similar to <cite>prefix</cite>, but placed at the end
(e.g. for additional stats).
Note: postfix is usually a string (not a dict) for this method,
and will if possible be set to postfix = ,  + postfix.
However other types are supported (#382).</p></li>
<li><p><strong>unit_divisor</strong> (<em>float</em><em>, </em><em>optional</em>)  [default: 1000], ignored unless <cite>unit_scale</cite> is True.</p></li>
<li><p><strong>initial</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>optional</em>)  The initial counter value [default: 0].</p></li>
<li><p><strong>colour</strong> (<em>str</em><em>, </em><em>optional</em>)  Bar colour (e.g. green, #00ff00).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Formatted meter and stats, ready to display.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.format_num">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_num</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.format_num" title="Permalink to this definition"></a></dt>
<dd><p>Intelligent scientific notation (.3g).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n</strong> (<em>int</em><em> or </em><em>float</em><em> or </em><em>Numeric</em>)  A Number.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong>  Formatted number.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.format_sizeof">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_sizeof</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">divisor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.format_sizeof" title="Permalink to this definition"></a></dt>
<dd><p>Formats a number (greater than unity) with SI Order of Magnitude
prefixes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num</strong> (<em>float</em>)  Number ( &gt;= 1) to format.</p></li>
<li><p><strong>suffix</strong> (<em>str</em><em>, </em><em>optional</em>)  Post-postfix [default: ].</p></li>
<li><p><strong>divisor</strong> (<em>float</em><em>, </em><em>optional</em>)  Divisor between prefixes [default: 1000].</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong>  Number with Order of Magnitude SI unit postfix.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.get_lock">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_lock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.get_lock" title="Permalink to this definition"></a></dt>
<dd><p>Get the global lock. Construct it if it does not exist.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.monitor">
<span class="sig-name descname"><span class="pre">monitor</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.monitor" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.monitor_interval">
<span class="sig-name descname"><span class="pre">monitor_interval</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.monitor_interval" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.moveto">
<span class="sig-name descname"><span class="pre">moveto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.moveto" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.pandas">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pandas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.pandas" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Registers the current <cite>tqdm</cite> class with</dt><dd><p>pandas.core.
( frame.DataFrame
| series.Series
| groupby.(generic.)DataFrameGroupBy
| groupby.(generic.)SeriesGroupBy
).progress_apply</p>
</dd>
</dl>
<p>A new instance will be created every time <cite>progress_apply</cite> is called,
and each instance will automatically <cite>close()</cite> upon completion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tqdm_kwargs</strong> (<em>arguments for the tqdm instance</em>)  </p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tqdm.gui</span> <span class="kn">import</span> <span class="n">tqdm</span> <span class="k">as</span> <span class="n">tqdm_gui</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="p">(</span><span class="mi">100000</span><span class="p">,</span> <span class="mi">6</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tqdm</span><span class="o">.</span><span class="n">pandas</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>  <span class="c1"># can use tqdm_gui, optional kwargs, etc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Now you can use `progress_apply` instead of `apply`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">progress_apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p>&lt;<a class="reference external" href="https://stackoverflow.com/questions/18603270/">https://stackoverflow.com/questions/18603270/</a>        progress-indicator-during-pandas-operations-python&gt;</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.refresh">
<span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nolock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.refresh" title="Permalink to this definition"></a></dt>
<dd><p>Force refresh the display of this bar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nolock</strong> (<em>bool</em><em>, </em><em>optional</em>)  If <cite>True</cite>, does not lock.
If [default: <cite>False</cite>]: calls <cite>acquire()</cite> on internal lock.</p></li>
<li><p><strong>lock_args</strong> (<em>tuple</em><em>, </em><em>optional</em>)  Passed to internal locks <cite>acquire()</cite>.
If specified, will only <cite>display()</cite> if <cite>acquire()</cite> returns <cite>True</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.reset" title="Permalink to this definition"></a></dt>
<dd><p>Resets to 0 iterations for repeated use.</p>
<p>Consider combining with <cite>leave=True</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>total</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>optional. Total to use for the new bar.</em>)  </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.set_description">
<span class="sig-name descname"><span class="pre">set_description</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">desc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.set_description" title="Permalink to this definition"></a></dt>
<dd><p>Set/modify description of the progress bar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>desc</strong> (<em>str</em><em>, </em><em>optional</em>)  </p></li>
<li><p><strong>refresh</strong> (<em>bool</em><em>, </em><em>optional</em>)  Forces refresh [default: True].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.set_description_str">
<span class="sig-name descname"><span class="pre">set_description_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">desc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.set_description_str" title="Permalink to this definition"></a></dt>
<dd><p>Set/modify description without :  appended.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.set_lock">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lock</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.set_lock" title="Permalink to this definition"></a></dt>
<dd><p>Set the global lock.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.set_postfix">
<span class="sig-name descname"><span class="pre">set_postfix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ordered_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.set_postfix" title="Permalink to this definition"></a></dt>
<dd><p>Set/modify postfix (additional stats)
with automatic formatting based on datatype.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ordered_dict</strong> (<em>dict</em><em> or </em><a class="reference internal" href="src.gpt.get_summarize_tutorial.html#src.gpt.get_summarize_tutorial.OrderedDict" title="src.gpt.get_summarize_tutorial.OrderedDict"><em>OrderedDict</em></a><em>, </em><em>optional</em>)  </p></li>
<li><p><strong>refresh</strong> (<em>bool</em><em>, </em><em>optional</em>)  Forces refresh [default: True].</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>)  </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.set_postfix_str">
<span class="sig-name descname"><span class="pre">set_postfix_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.set_postfix_str" title="Permalink to this definition"></a></dt>
<dd><p>Postfix without dictionary expansion, similar to prefix handling.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.status_printer">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">status_printer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.status_printer" title="Permalink to this definition"></a></dt>
<dd><p>Manage the printing and in-place updating of a line of characters.
Note that if the string is longer than a line, then in-place
updating may not work (it will print a new line at each refresh).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.unpause">
<span class="sig-name descname"><span class="pre">unpause</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.unpause" title="Permalink to this definition"></a></dt>
<dd><p>Restart tqdm timer from last print time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.update" title="Permalink to this definition"></a></dt>
<dd><p>Manually update the progress bar, useful for streams
such as reading files.
E.g.:
&gt;&gt;&gt; t = tqdm(total=filesize) # Initialise
&gt;&gt;&gt; for current_buffer in stream:
    
    t.update(len(current_buffer))
&gt;&gt;&gt; t.close()
The last line is highly recommended, but possibly not necessary if
<cite>t.update()</cite> will be called in such a way that <cite>filesize</cite> will be
exactly reached and printed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>optional</em>)  Increment to add to the internal counter of iterations
[default: 1]. If using float, consider specifying <cite>{n:.3f}</cite>
or similar in <cite>bar_format</cite>, or specifying <cite>unit_scale</cite>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong>  True if a <cite>display()</cite> was triggered.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.wrapattr">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wrapattr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.wrapattr" title="Permalink to this definition"></a></dt>
<dd><p>stream  : file-like object.
method  : str, read or write. The result of <cite>read()</cite> and</p>
<blockquote>
<div><p>the first argument of <cite>write()</cite> should have a <cite>len()</cite>.</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">wrapattr</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">file_obj</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="k">as</span> <span class="n">fobj</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">chunk</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">break</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.retriever_finetune_inference.tqdm.write">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nolock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.retriever_finetune_inference.tqdm.write" title="Permalink to this definition"></a></dt>
<dd><p>Print a message via tqdm (without overlap with bars).</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-src.inference.utils">
<span id="src-inference-utils-module"></span><h2>src.inference.utils module<a class="headerlink" href="#module-src.inference.utils" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.bert_embed">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">bert_embed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.bert_embed" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.compress_and_save_image">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">compress_and_save_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.compress_and_save_image" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.compress_api_str_from_list">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">compress_api_str_from_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.compress_api_str_from_list" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.compress_api_str_from_list_query_version">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">compress_api_str_from_list_query_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.compress_api_str_from_list_query_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.compress_desc">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">compress_desc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.compress_desc" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.compress_tut_version">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">compress_tut_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.compress_tut_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">defaultdict</span></span><a class="headerlink" href="#src.inference.utils.defaultdict" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>defaultdict(default_factory=None, /, []) &gt; dict with default factory</p>
<p>The default factory is called without arguments to produce
a new value when a key is not present, in __getitem__ only.
A defaultdict compares equal to a dict with the same items.
All remaining arguments are treated the same as if they were
passed to the dict constructor, including keyword arguments.</p>
<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None.</span>&#160; <span class="pre">Remove</span> <span class="pre">all</span> <span class="pre">items</span> <span class="pre">from</span> <span class="pre">D.</span></span></span><a class="headerlink" href="#src.inference.utils.defaultdict.clear" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">a</span> <span class="pre">shallow</span> <span class="pre">copy</span> <span class="pre">of</span> <span class="pre">D.</span></span></span><a class="headerlink" href="#src.inference.utils.defaultdict.copy" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.default_factory">
<span class="sig-name descname"><span class="pre">default_factory</span></span><a class="headerlink" href="#src.inference.utils.defaultdict.default_factory" title="Permalink to this definition"></a></dt>
<dd><p>Factory for default value called by __missing__().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.fromkeys">
<span class="sig-name descname"><span class="pre">fromkeys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.defaultdict.fromkeys" title="Permalink to this definition"></a></dt>
<dd><p>Create a new dictionary with keys from iterable and values set to value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.defaultdict.get" title="Permalink to this definition"></a></dt>
<dd><p>Return the value for key if key is in the dictionary, else default.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">a</span> <span class="pre">set-like</span> <span class="pre">object</span> <span class="pre">providing</span> <span class="pre">a</span> <span class="pre">view</span> <span class="pre">on</span> <span class="pre">D's</span> <span class="pre">items</span></span></span><a class="headerlink" href="#src.inference.utils.defaultdict.items" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">a</span> <span class="pre">set-like</span> <span class="pre">object</span> <span class="pre">providing</span> <span class="pre">a</span> <span class="pre">view</span> <span class="pre">on</span> <span class="pre">D's</span> <span class="pre">keys</span></span></span><a class="headerlink" href="#src.inference.utils.defaultdict.keys" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">v,</span> <span class="pre">remove</span> <span class="pre">specified</span> <span class="pre">key</span> <span class="pre">and</span> <span class="pre">return</span> <span class="pre">the</span> <span class="pre">corresponding</span> <span class="pre">value.</span></span></span><a class="headerlink" href="#src.inference.utils.defaultdict.pop" title="Permalink to this definition"></a></dt>
<dd><p>If key is not found, default is returned if given, otherwise KeyError is raised</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.popitem">
<span class="sig-name descname"><span class="pre">popitem</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.defaultdict.popitem" title="Permalink to this definition"></a></dt>
<dd><p>Remove and return a (key, value) pair as a 2-tuple.</p>
<p>Pairs are returned in LIFO (last-in, first-out) order.
Raises KeyError if the dict is empty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.setdefault">
<span class="sig-name descname"><span class="pre">setdefault</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.defaultdict.setdefault" title="Permalink to this definition"></a></dt>
<dd><p>Insert key with a value of default if key is not in the dictionary.</p>
<p>Return the value for key if key is in the dictionary, else default.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">E</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">**F</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None.</span>&#160; <span class="pre">Update</span> <span class="pre">D</span> <span class="pre">from</span> <span class="pre">dict/iterable</span> <span class="pre">E</span> <span class="pre">and</span> <span class="pre">F.</span></span></span><a class="headerlink" href="#src.inference.utils.defaultdict.update" title="Permalink to this definition"></a></dt>
<dd><p>If E is present and has a .keys() method, then does:  for k in E: D[k] = E[k]
If E is present and lacks a .keys() method, then does:  for k, v in E: D[k] = v
In either case, this is followed by: for k in F:  D[k] = F[k]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.inference.utils.defaultdict.values">
<span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">an</span> <span class="pre">object</span> <span class="pre">providing</span> <span class="pre">a</span> <span class="pre">view</span> <span class="pre">on</span> <span class="pre">D's</span> <span class="pre">values</span></span></span><a class="headerlink" href="#src.inference.utils.defaultdict.values" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.find_similar_api_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">find_similar_api_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_descriptions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.find_similar_api_pairs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.find_similar_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">find_similar_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_same_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.find_similar_pairs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.find_similar_two_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">find_similar_two_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">API_init_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./data/standard_process/scanpy/API_init.json'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.find_similar_two_pairs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.get_all_api_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">get_all_api_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">API_init_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.get_all_api_json" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.get_all_types_in_API">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">get_all_types_in_API</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">LIB</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.get_all_types_in_API" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.get_ambiguous_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">get_ambiguous_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">API_init_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./data/standard_process/scanpy/API_init.json'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.get_ambiguous_pairs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.is_pair_in_merged_pairs">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">is_pair_in_merged_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merged_pairs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.is_pair_in_merged_pairs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.json_to_docstring">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">json_to_docstring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.json_to_docstring" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.load_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">load_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#src.inference.utils.load_json" title="Permalink to this definition"></a></dt>
<dd><p>Load JSON data from a specified file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>)  The path to the JSON file to be loaded.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The data loaded from the JSON file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.predict_by_similarity">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">predict_by_similarity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_query_vector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centroids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.predict_by_similarity" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.process_retrieval_desc">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">process_retrieval_desc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.process_retrieval_desc" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.process_retrieval_document">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">process_retrieval_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.process_retrieval_document" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.process_retrieval_document_query_version">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">process_retrieval_document_query_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.process_retrieval_document_query_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.process_tut_version">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">process_tut_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.process_tut_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.save_json">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">save_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.inference.utils.save_json" title="Permalink to this definition"></a></dt>
<dd><p>Save results to a JSON file with indentation of 4 spaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_path</strong> (<em>str</em>)  Path to the output file.</p></li>
<li><p><strong>results</strong> (<em>dict</em>)  Dictionary containing the results to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">save_json</span><span class="p">(</span><span class="s1">&#39;output.json&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.save_plot_with_timestamp">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">save_plot_with_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./tmp/images'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'img'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'webp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_pdf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.save_plot_with_timestamp" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.inference.utils.sentence_transformer_embed">
<span class="sig-prename descclassname"><span class="pre">src.inference.utils.</span></span><span class="sig-name descname"><span class="pre">sentence_transformer_embed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">texts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.inference.utils.sentence_transformer_embed" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-src.inference">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-src.inference" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, BioMANIA Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>